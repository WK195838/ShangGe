# ARAFLF3 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | ARAFLF3 |
| 檔案描述 | 價差折讓資料檔邏輯檔案3 |
| 檔案類型 | 邏輯檔案 (Logical File) |
| 基礎實體檔 | ARAFPF |
| 作業系統 | IBM i (AS/400) |
| 程式語言 | DDS |

## 2. 檔案功能說明

ARAFLF3是基於價差折讓資料實體檔ARAFPF的邏輯檔案，提供以下功能：
- 使用REFACCPTH(ARAFPF)參照實體檔案的存取路徑
- 提供與實體檔案相同的資料存取順序
- 適用於需要完整價差折讓資料但不需要特殊排序的作業

## 3. 系統檔案清單

| 序號 | 檔案名稱 | 檔案類型 | 說明 |
|------|----------|----------|------|
| 1 | ARAFPF | 實體檔案 | 價差折讓資料主檔 |
| 2 | ARAFLF3 | 邏輯檔案 | 價差折讓資料檔邏輯檔案3 |

## 4. 紀錄格式

| 紀錄格式名稱 | 說明 | 基礎檔案 |
|--------------|------|----------|
| AF0 | 價差折讓資料紀錄格式 | ARAFPF |

## 5. 欄位規格

ARAFLF3使用與基礎實體檔ARAFPF完全相同的欄位結構，包含所有欄位：

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|----------|
| AF01 | 公司別 | 1-2 | 2 | 文字 | 必填欄位 |
| AF02 | 客戶代號 | 3-8 | 6 | 文字 | 必填欄位 |
| AF03 | 業務員 | 9-11 | 3 | 文字 | 必填欄位 |
| AF04 | 發票別 | 12-13 | 2 | 文字 | 必填欄位 |
| AF05 | 發票日期 | 14-21 | 8 | 數值 | 日期格式YYYYMMDD |
| AF06 | 發票年月 | 22-25 | 4 | 數值 | 格式YYMM |
| ... | ... | ... | ... | ... | (完整欄位同ARAFPF) |

## 6. 主鍵欄位

ARAFLF3本身為邏輯檔案，無獨立主鍵定義，其資料完整性由基礎實體檔ARAFPF維護。

## 7. 索引資料

| 索引名稱 | 索引欄位 | 排序 | 說明 |
|----------|----------|------|------|
| 參照索引 | 參照ARAFPF存取路徑 | 同實體檔 | 使用實體檔案的存取路徑 |

### 索引特性：
- 使用REFACCPTH(ARAFPF)關鍵字
- 直接參照實體檔案ARAFPF的存取路徑
- 與實體檔案保持相同的資料存取順序

## 8. 備註

### 設計考量：
- 使用REFACCPTH關鍵字簡化邏輯檔案定義
- 直接參照實體檔案的存取路徑，減少維護複雜度
- 提供與實體檔案相同的資料存取方式

### 使用時機：
- 需要完整價差折讓資料但不需特殊排序的作業
- 作為其他程式的資料來源檔案
- 資料匯出或備份作業
- 簡單的資料查詢和瀏覽

### 注意事項：
- 本邏輯檔案依賴ARAFPF實體檔案的資料完整性
- 存取路徑完全參照實體檔案，變更實體檔案索引會影響此邏輯檔案
- 適用於不需要特殊排序但需要邏輯檔案特性的應用場景
- REFACCPTH關鍵字提供了簡潔的檔案定義方式 