# W2CBPF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | W2CBPF |
| 檔案類型 | 實體檔 (PF) |
| 檔案描述 | 其他產品匯總表暫存檔 |
| 作業系統 | AS/400 |
| 資料庫 | DB2/400 |

## 2. 檔案功能說明

此檔案為其他產品匯總報表的暫存檔，負責暫存非茂世產品的匯總分析資料。主要功能：
- 暫存其他產品的匯總統計資料
- 提供供應商分類的產品匯總功能
- 支援營業點及產品的多維度分析
- 管理供應商與營業點的對應關係
- 提供其他產品匯總的暫時儲存機制

## 3. 系統檔案清單

| 項目 | 檔案名稱 | 類型 | 說明 |
|------|----------|------|------|
| 主檔 | W2CBPF | PF | 其他產品匯總表暫存檔 |

## 4. 紀錄格式

### 記錄格式：CB0
**唯一性約束：UNIQUE**

| 欄位代號 | 欄位名稱 | 型態 | 長度 | 小數 | 說明 |
|----------|----------|------|------|------|------|
| CB01 | 供應商 | A | 5 | 0 | 供應商代號 |
| CB02 | 供應商名稱 | O | 18 | 0 | 供應商名稱 |
| CB03 | 營業點 | A | 5 | 0 | 營業點代號 |
| CB04 | 專櫃名稱 | O | 18 | 0 | 專櫃名稱 |
| CB05 | 產品代號 | A | 9 | 0 | 產品代號 |
| CB06 | 產品名稱 | O | 18 | 0 | 產品名稱 |
| CB07 | 週期編號 | S | 8 | 0 | 統計週期編號 |
| CB08 | 數量 | S | 8 | 0 | 匯總數量 |

## 5. 主鍵欄位

| 順序 | 欄位代號 | 欄位名稱 | 排序方式 |
|------|----------|----------|----------|
| 1 | CB01 | 供應商 | 遞增 |
| 2 | CB03 | 營業點 | 遞增 |
| 3 | CB05 | 產品代號 | 遞增 |
| 4 | CB07 | 週期編號 | 遞增 |

## 6. 索引資料

### 索引鍵值
- **主索引**：CB01 + CB03 + CB05 + CB07
- **唯一性約束**：UNIQUE
- **排序方式**：供應商遞增，營業點遞增，產品代號遞增，週期編號遞增

### 存取路徑
此檔案提供以下存取路徑：
1. 依供應商分組檢索匯總資料
2. 依營業點分組統計
3. 依產品代號分類檢索
4. 依週期編號時間分析
5. 支援供應商×營業點×產品×週期的四維分析

## 7. 使用說明

### 查詢功能
- 支援依供應商查詢匯總資料
- 提供營業點分組的匯總檢索
- 支援產品代號的分類統計
- 提供週期編號的時間分析
- 支援其他產品銷售數量統計

### 作業程序
1. 從基礎交易資料彙整其他產品統計
2. 按供應商、營業點、產品、週期分組匯總
3. 記錄匯總數量及相關描述資訊
4. 提供其他產品報表的資料來源
5. 定期清理過期的暫存資料

### 維護作業
- **新增**：建立新的匯總暫存記錄
- **查詢**：支援多維度檢索分析
- **更新**：更新匯總數量資料
- **刪除**：清理過期暫存資料
- **彙總**：產生各種統計報表

### 注意事項
- 此為暫存檔，資料具有時效性
- 檔案具有UNIQUE約束，避免重複匯總
- 四重複合主鍵支援多維度分析
- 定期執行資料清理作業

## 8. 備註

- 此檔案為其他產品匯總分析的暫存檔案
- 四重複合主鍵確保匯總資料唯一性
- 支援供應商×營業點×產品×週期的四維分析
- 提供其他產品銷售統計的資料基礎
- 所有名稱欄位採用開放長度格式
- 支援報表系統的資料準備功能 