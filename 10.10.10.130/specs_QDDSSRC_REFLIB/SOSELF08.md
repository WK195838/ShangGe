# SOSELF08 檔案規格書

## 1. 基本資料
- **檔案名稱**: SOSELF08
- **檔案類型**: LF (邏輯檔案)
- **基底檔案**: SOSEPF (送貨單主檔)
- **檔案說明**: 送貨單主檔邏輯檔案 - 待配送確認管理
- **建立日期**: (依系統記錄)
- **最後異動日期**: (依系統記錄)

## 2. 檔案功能說明
此邏輯檔案專門用於處理已發貨尚未配送確認的送貨單，提供以店代名稱為主的排序索引。

### 主要功能
- 待配送確認管理
- 店代導向配送安排
- 配送確認前置處理

## 3. 系統檔案清單
| 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|------|
| SOSEPF | PF | 送貨單主檔 (基底檔案) |
| SOSELF08 | LF | 送貨單主檔邏輯檔案 |

## 4. 紀錄格式

### 4.1 邏輯檔案設定
```
PFILE(SOSEPF)      // 基底實體檔案
```

### 4.2 關鍵欄位 (Key Fields)
| 順序 | 欄位代號 | 欄位名稱 | 型態 | 長度 | 排序 | 說明 |
|------|----------|----------|------|------|------|------|
| 1 | SE04 | 店代名稱 | A | 20 | ASC | 主要排序鍵 |

### 4.3 選擇條件 (SELECT/OMIT)
| 類型 | 欄位代號 | 條件 | 值 | 說明 |
|------|----------|------|----|----|
| SELECT | SE31 | COMP(EQ) | '*' | 選擇發貨狀態為已發貨待配送 |
| SELECT | SE36 | COMP(NE) | 'T' | 核准狀態不等於配送鍊狀態 |

## 5. 主鍵欄位
- **主要鍵值**: SE04 (店代名稱)
- **排序方式**: 店代名稱升序
- **索引類型**: 單一索引

## 6. 索引資料
- **排序方式**: SE04 (店代名稱)
- **索引類型**: 單一索引
- **特殊屬性**: 專門處理待配送確認資料

## 7. 使用說明

### 7.1 檔案用途
- 待配送確認送貨單管理
- 配送確認處理
- 店代配送管理

### 7.2 程式存取方式
```rpg
// 依店代名稱查詢待配送送貨單
SETLL (店代名稱) SOSELF08;
READ SOSELF08;
// 讀取所有待配送確認記錄
SETLL (*LOVAL) SOSELF08;
READ SOSELF08;
```

### 7.3 業務邏輯說明
此檔案專門處理以下狀態組合的送貨單：
- **SE31 = '*'**: 發貨狀態已完成發貨待配送
- **SE36 ≠ 'T'**: 核准狀態非配送鍊狀態

### 7.4 適用場景
- 已完成發貨作業但尚未進入配送流程的送貨單
- 需要按店代進行配送安排的送貨單
- 配送確認作業的前置處理

## 8. 備註
- 此邏輯檔案專注於配送確認前的狀態管理
- 提供店代導向的配送安排功能
- 支援配送流程的精確控制
- 專門處理特定狀態組合的送貨單 