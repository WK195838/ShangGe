# W1AFLF03 檔案規格書

## 1. 基本資料
- **檔案名稱**: W1AFLF03
- **檔案描述**: 前台調撥主檔邏輯檔03
- **檔案類型**: 邏輯檔案 (LF)
- **實體檔案**: W1AFPF
- **記錄格式**: AF0
- **索引**: AF01(DESCEND) + AF02
- **用途**: 提供前台調撥主檔按編號倒序+發貨號排序的邏輯視圖
- **相關系統**: 前台調撥管理系統

## 2. 檔案功能說明
W1AFLF03邏輯檔案主要用於：
- 提供前台調撥資料的時序倒序視圖
- 支援按調撥編號倒序的快速查詢
- 優化最新調撥記錄查詢效能
- 提供調撥時序管理功能

## 3. 系統檔案清單
### 邏輯檔案
- W1AFLF03: 前台調撥主檔邏輯檔03

### 實體檔案
- W1AFPF: 前台調撥主檔 (基底檔案)

### 相關邏輯檔案
- W1AFLF01: 前台調撥主檔邏輯檔01
- W1AFLF02: 前台調撥主檔邏輯檔02
- W1AFLF04: 前台調撥主檔邏輯檔04

## 4. 紀錄格式

### 記錄: AF0 (承襲自W1AFPF)
| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| AF01 | 調撥編號 | 1-8 | 8 | S 0 | 索引鍵1(倒序) | 調撥單編號 |
| AF02 | 調撥發貨號 | 9-20 | 12 | A | 索引鍵2 | 發貨單號 |
| AF03 | 收貨營業點 | 21-25 | 5 | A | - | 收貨地點代碼 |
| AF04 | 發貨營業點 | 26-30 | 5 | A | - | 發貨地點代碼 |
| AF05 | 狀態 | 31 | 1 | A | - | 調撥狀態 |
| AF06 | 數量 | 32-95 | 64 | O | - | 包裝數量 |
| AFXX | 異動日期 | 96-103 | 8 | S 0 | - | 異動日期 |
| AFYY | 異動時間 | 104-109 | 6 | S 0 | - | 異動時間 |
| AFZZ | 異動人員 | 110-119 | 10 | A | - | 異動人員 |

## 5. 主鍵欄位
- **邏輯鍵組合**: AF01(DESCEND) + AF02
- **排序**: 調撥編號(倒序) + 調撥發貨號

## 6. 索引資料
### 主要索引
- **索引1**: AF01 DESCEND (調撥編號，倒序)
- **索引2**: AF02 (調撥發貨號)

### 索引結構
```
KEY: AF01 DESCEND (調撥編號) + AF02 (調撥發貨號)
排序: 倒序 + 升序
```

## 7. 使用說明
### 查詢作業
1. 主要用於時序倒序查詢
2. 最新調撥編號記錄優先顯示
3. 支援發貨號次要排序

### 排序特性
1. 優先按調撥編號倒序排序(最新在前)
2. 其次按調撥發貨號升序排序

### 應用場景
1. 最新調撥記錄瀏覽
2. 調撥時序分析
3. 近期調撥統計
4. 調撥趨勢監控

## 8. 備註
- 此邏輯檔案承襲W1AFPF的所有欄位定義
- 簡化的二重索引結構，提供最佳的時序查詢效能
- 調撥編號倒序排列，便於快速存取最新資料
- 適用於需要時序排序的調撥作業 