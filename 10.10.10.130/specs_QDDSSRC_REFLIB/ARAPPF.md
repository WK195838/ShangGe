# ARAPPF 檔案規格書

## 1. 基本資料
- 檔名: ARAPPF
- 類型: PF (Physical File)
- 說明: 電子發票主檔 - 有效 B2B
- 主鍵: AP01
- 建立日期: (待補)
- 最後修改日期: (待補)
- 參考檔: (無)
- 索引約束: (無)

## 2. 檔案功能說明
此實體檔案為電子發票主檔(有效 B2B)，提供以下功能：
- 記錄有效 B2B 電子發票的主要資料
- 儲存電子發票的完整開立資訊
- 支援 B2B 電子發票的完整生命週期管理
- 提供電子發票買賣雙方的完整資訊
- 記錄電子發票的稅額與金額計算
- 支援電子發票系統的主檔管理作業
- 提供電子發票資料的主要儲存結構
- 記錄電子發票的開立狀態與內容
- 支援電子發票的查詢與報表作業
- 支援 B2B 電子發票相關的管理作業

## 3. 系統檔案清單
- 主要實體檔: ARAPPF (電子發票主檔 - 有效 B2B)
- 相關檔案: 
  - ARAOPF (電子發票控制 - 有效)
  - ARAPPF1 (電子發票主檔 - 有效 B2C)
  - ARAPPF2 (電子發票主檔 - 作廢)
  - ARAQPF (電子發票明細檔 - 有效 B2B)
- 參考檔: (無)

## 4. 紀錄格式
實體檔案記錄格式，包含完整的 B2B 電子發票主檔資料欄位，涵蓋買賣雙方資訊與發票內容。

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明
| 欄位代號 | 名稱 | 位置 | 長度 | 屬性 | 檢核說明 |
|----------|------|------|------|------|----------|
| AP01 | 發票號碼 | 1-10 | 10A | 文字 | 必填，電子發票號碼 |
| AP02 | 發票開立日期 | 11-18 | 8A | 文字 | 發票開立日期 |
| AP03 | 發票開立時間 | 19-26 | 8A | 文字 | 發票開立時間 |
| AP04 | 賣方統一編號 | 27-36 | 10A | 文字 | 賣方統一編號 |
| AP05 | 賣方名稱 | 37-96 | 60A | 文字 | 賣方公司名稱 |
| AP06 | 賣方地址 | 97-196 | 100A | 文字 | 賣方地址 |
| AP07 | 賣方負責人 | 197-226 | 30A | 文字 | 賣方負責人 |
| AP08 | 賣方電話號碼 | 227-252 | 26A | 文字 | 賣方電話號碼 |
| AP09 | 賣方傳真號碼 | 253-278 | 26A | 文字 | 賣方傳真號碼 |
| AP10 | 賣方電子信箱 | 279-358 | 80A | 文字 | 賣方電子信箱 |
| AP11 | 賣方營業人代號 | 359-378 | 20A | 文字 | 賣方營業人代號 |
| AP12 | 賣方營業人證號 | 379-418 | 40A | 文字 | 賣方營業人證號 |
| AP13 | 買方統一編號 | 419-428 | 10A | 文字 | 買方統一編號 |
| AP14 | 買方名稱 | 429-488 | 60A | 文字 | 買方公司名稱 |
| AP15 | 買方地址 | 489-588 | 100A | 文字 | 買方地址 |
| AP16 | 買方負責人 | 589-618 | 30A | 文字 | 買方負責人 |
| AP17 | 買方電話號碼 | 619-644 | 26A | 文字 | 買方電話號碼 |
| AP18 | 買方傳真號碼 | 645-670 | 26A | 文字 | 買方傳真號碼 |
| AP19 | 買方電子信箱 | 671-750 | 80A | 文字 | 買方電子信箱 |
| AP20 | 買方營業人代號 | 751-770 | 20A | 文字 | 買方營業人代號 |
| AP21 | 買方營業人證號 | 771-810 | 40A | 文字 | 買方營業人證號 |
| AP22 | 發票檢查碼 | 811-820 | 10A | 文字 | 發票檢查碼 |
| AP23 | 買方類別 | 821-821 | 1A | 文字 | 買方類別代碼 |
| AP24 | 備註 | 822-1205 | 384A | 文字 | 備註欄位 |
| AP25 | 電子格式代碼 | 1206-1206 | 1A | 文字 | 電子格式代碼 |
| AP26 | 課稅別 | 1207-1208 | 2A | 文字 | 課稅別代碼 |
| AP27 | 隨機碼 | 1209-1228 | 20A | 文字 | 隨機碼 |
| AP28 | 發票類別 | 1229-1230 | 2A | 文字 | 發票類別代碼 |
| AP29 | 扣抵代碼 | 1231-1231 | 1A | 文字 | 扣抵代碼 |
| AP30 | 特種稅額 | 1232-1232 | 1A | 文字 | 特種稅額代碼 |
| AP31 | 營業稅額 | 1233-1233 | 1A | 文字 | 營業稅額代碼 |
| AP32 | 折扣金額 | 1234-1245 | 12A | 文字 | 折扣金額 |
| AP33 | 課稅別 | 1246-1246 | 1A | 文字 | 課稅別 |
| AP34 | 稅率 | 1247-1252 | 6A | 文字 | 稅率 |
| AP35 | 商品稅額 | 1253-1264 | 12A | 文字 | 商品稅額 |
| AP36 | 總計 | 1265-1276 | 12A | 文字 | 總計金額 |
| AP37 | 營業稅額 | 1277-1288 | 12A | 文字 | 營業稅額 |
| AP38 | 總金額 | 1289-1308 | 20A | 文字 | 總金額 |
| AP39 | 稅率 | 1309-1321 | 13A | 文字 | 稅率 |
| AP40 | 幣別 | 1322-1324 | 3A | 文字 | 幣別代碼 |

## 6. 主鍵欄位
- 主鍵: AP01
  - AP01: 發票號碼
- 約束類型: 主鍵約束

## 7. 索引資料
- 主要索引: AP01 (依發票號碼)
- 索引類型: 主鍵索引
- 排序特性: 
  - 第一層: 發票號碼 (AP01)

## 8. 備註
- 此實體檔案為 B2B 電子發票主檔的主要儲存結構
- 用於管理有效狀態的 B2B 電子發票
- 支援 B2B 電子發票的完整資訊管理
- 記錄電子發票的買賣雙方完整資訊
- 與電子發票控制檔(ARAOPF)密切相關
- 支援電子發票系統的主檔管理作業
- 記錄電子發票的開立狀態與內容
- 支援 B2B 電子發票的查詢、報表與統計分析
- 提供電子發票號碼的唯一性控制
- 支援 B2B 電子發票相關的管理作業
- 包含完整的賣方資訊(AP04-AP12)
- 包含完整的買方資訊(AP13-AP21)
- 記錄發票的稅額計算資訊(AP32-AP40)
- 支援多種課稅別與稅率設定
- 與 ARAQPF (電子發票明細檔) 形成主從關係
- 提供 B2B 電子發票的完整管理功能
- 支援電子發票的開立與傳送流程控制 