# W1AFPF 檔案規格書

## 1. 基本資料
- **檔案名稱**: W1AFPF
- **檔案描述**: 前台調撥主檔
- **檔案類型**: 實體檔案 (PF)
- **記錄格式**: AF0
- **主鍵**: AF01 + AF02 (UNIQUE約束)
- **用途**: 記錄前台調撥主要交易資料
- **相關系統**: 前台調撥管理系統

## 2. 檔案功能說明
W1AFPF檔案主要用於：
- 記錄前台調撥交易主檔資料
- 管理調撥編號與發貨號對應關係
- 追蹤調撥狀態與數量資訊
- 維護發收貨營業點資料

## 3. 系統檔案清單
### 主檔案
- W1AFPF: 前台調撥主檔

### 相關檔案
- W1AGPF: 前台調撥明細檔
- W1AGWF: 前台調撥明細檔(工作檔)

### 邏輯檔案
- W1AFLF01: 前台調撥主檔邏輯檔01
- W1AFLF02: 前台調撥主檔邏輯檔02
- W1AFLF03: 前台調撥主檔邏輯檔03
- W1AFLF04: 前台調撥主檔邏輯檔04

## 4. 紀錄格式

### 記錄: AF0
| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| AF01 | 調撥編號 | 1-8 | 8 | S 0 | 主鍵1 | 必填，不可重複 |
| AF02 | 調撥發貨號 | 9-20 | 12 | A | 主鍵2 | 必填，不可重複 |
| AF03 | 收貨營業點 | 21-25 | 5 | A | - | 收貨地點代碼 |
| AF04 | 發貨營業點 | 26-30 | 5 | A | - | 發貨地點代碼 |
| AF05 | 狀態 | 31 | 1 | A | - | 調撥狀態 |
| AF06 | 數量 | 32-95 | 64 | O | - | 包裝數量 |
| AFXX | 異動日期 | 96-103 | 8 | S 0 | - | YYYYMMDD格式 |
| AFYY | 異動時間 | 104-109 | 6 | S 0 | - | HHMMSS格式 |
| AFZZ | 異動人員 | 110-119 | 10 | A | - | 異動者代號 |

## 5. 主鍵欄位
- **主鍵組合**: AF01 + AF02
- **唯一性約束**: UNIQUE
- **索引**: 複合索引 (調撥編號 + 調撥發貨號)

## 6. 索引資料
### 主要索引
- **索引1**: AF01 + AF02 (主鍵，唯一性)

### 索引結構
```
KEY: AF01 (調撥編號) + AF02 (調撥發貨號)
```

## 7. 使用說明
### 新增作業
1. 指定調撥編號(AF01)
2. 輸入調撥發貨號(AF02)
3. 設定收發貨營業點
4. 記錄調撥狀態與數量
5. 系統自動記錄異動資訊

### 查詢作業
1. 可依調撥編號查詢
2. 可依調撥發貨號查詢
3. 支援複合條件查詢
4. 可查詢特定營業點調撥

### 維護作業
1. 調撥編號與發貨號組合不可重複
2. 可修改狀態與數量資訊
3. 營業點資料須為有效代碼
4. 系統記錄完整異動軌跡

## 8. 備註
- 檔案具有UNIQUE約束，確保調撥編號與發貨號組合唯一性
- 支援四個邏輯檔案提供不同排序視圖
- 調撥狀態控制調撥流程進度
- 數量欄位為64位元OPEN型態，支援大容量資料 