# W1AGWF 檔案規格書

## 1. 基本資料
- **檔案名稱**: W1AGWF
- **檔案描述**: 前台調撥明細檔(工作檔)
- **檔案類型**: 實體檔案 (PF)
- **記錄格式**: WG0
- **主鍵**: WG01 + WG03 + WG04
- **用途**: 前台調撥明細處理工作暫存檔
- **相關系統**: 前台調撥管理系統

## 2. 檔案功能說明
W1AGWF檔案主要用於：
- 提供前台調撥明細處理的工作暫存空間
- 支援調撥明細資料的批次處理
- 暫存調撥編制與商品資料
- 提供調撥作業的中間處理功能

## 3. 系統檔案清單
### 工作檔案
- W1AGWF: 前台調撥明細檔(工作檔)

### 相關檔案
- W1AFPF: 前台調撥主檔
- W1AGPF: 前台調撥明細檔

## 4. 紀錄格式

### 記錄: WG0
| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| WG01 | 選取記號 | 1 | 1 | A | 主鍵1 | 記錄選取標記 |
| WG02 | 調撥發貨號 | 2-13 | 12 | A | - | 對應調撥發貨號 |
| WG03 | 收貨營業點 | 14-18 | 5 | A | 主鍵2 | 收貨地點代碼 |
| WG04 | 商品代號 | 19-27 | 9 | A | 主鍵3 | 商品識別代號 |
| WG05 | 調撥數量 | 28-35 | 8 | S 0 | - | 調撥商品數量 |

## 5. 主鍵欄位
- **主鍵組合**: WG01 + WG03 + WG04
- **索引**: 複合索引 (選取記號 + 收貨營業點 + 商品代號)

## 6. 索引資料
### 主要索引
- **索引1**: WG01 + WG03 + WG04 (主鍵)

### 索引結構
```
KEY: WG01 (選取記號) + WG03 (收貨營業點) + WG04 (商品代號)
```

## 7. 使用說明
### 新增作業
1. 設定選取記號(WG01)
2. 輸入調撥發貨號(WG02)
3. 指定收貨營業點(WG03)
4. 設定商品代號(WG04)
5. 記錄調撥數量(WG05)

### 查詢作業
1. 可依選取記號查詢
2. 可依收貨營業點分類查詢
3. 可依商品代號查詢
4. 支援複合條件查詢

### 維護作業
1. 選取記號+收貨營業點+商品代號組合不可重複
2. 調撥數量不可為負數
3. 營業點與商品代號須為有效代碼
4. 定期清理暫存資料

### 批次處理
1. 支援批次資料匯入
2. 可進行批次驗證處理
3. 支援批次資料轉檔
4. 提供批次統計功能

## 8. 備註
- 此為工作檔案，主要用於暫存處理資料
- 選取記號用於控制資料處理批次
- 簡化的欄位結構，專注於核心調撥資訊
- 不含異動軌跡欄位，適用於臨時處理作業 