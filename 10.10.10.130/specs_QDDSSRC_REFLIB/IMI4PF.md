# IMI4PF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案代號 | IMI4PF |
| 檔案名稱 | 產品可用量紀錄檔 (+ 未送貨的保留量) |
| 檔案類型 | PF (實體檔案) |
| 資料庫 | REFLIB |
| 記錄格式 | I40 |
| 主鍵 | IA01+IA02+I401+IA03 |
| 參照檔案 | RERF |
| 建立日期 | - |
| 最後異動日期 | - |

## 2. 檔案功能說明

本檔案記錄產品可用量資訊，包含倉庫、項目、日期、產品的可用庫存數量，並考慮未送貨的保留量，提供準確的可用庫存查詢。

## 3. 系統檔案清單

| 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|------|
| IMI4PF | PF | 產品可用量紀錄檔 |
| IMI4WF | PF | 產品可用量暫存檔 |

## 4. 紀錄格式

**記錄格式名稱：** I40

## 5. 欄位規格

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|----------|----------|
| IA01 | 倉庫編號 | - | - | R | Key | 參照RERF |
| IA02 | 產品項目代號 | - | - | R | Key | 參照RERF |
| I401 | 日期 | - | 8 | N | Key | 紀錄日期 |
| IA03 | 產品類別代號 | - | - | R | Key | 參照RERF |
| MA02 | 產品名稱 | - | - | R | - | 參照RERF |
| IA09 | 現有出貨量 | - | - | R | - | 現有出貨量 |
| IA06 | 預定出貨量 | - | - | R | - | 預定出貨量 |
| IA10 | 實際可用數量 | - | - | R | - | 實際可用數量 |
| IAXX | 建立日期 | - | - | R | - | 建立日期 |
| IAYY | 建立時間 | - | - | R | - | 建立時間 |
| IAZZ | 建立者 | - | - | R | - | 建立者 |

## 6. 主鍵欄位

**主鍵組成：** IA01 + IA02 + I401 + IA03
- IA01：倉庫編號
- IA02：產品項目代號  
- I401：日期
- IA03：產品類別代號

## 7. 索引資料

| 索引名稱 | 索引欄位 | 索引類型 | 說明 |
|----------|----------|----------|------|
| 主索引 | IA01+IA02+I401+IA03 | UNIQUE | 唯一索引 |

## 8. 備註

1. UNIQUE屬性確保每個倉庫、項目、日期、產品組合只有一筆記錄
2. 包含未送貨的保留量計算
3. 提供實際可用庫存數量查詢
4. 支援按倉庫、項目、日期的複合查詢
5. 參照RERF檔案取得欄位定義
6. 與IMI4WF暫存檔配合使用 