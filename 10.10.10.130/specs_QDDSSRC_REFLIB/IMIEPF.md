# IMIEPF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | IMIEPF |
| 檔案類型 | 實體檔案 (Physical File) |
| 檔案用途 | 產品報廢主檔 |
| 紀錄格式 | IE0 |
| 主鍵欄位 | IE02 |
| 特殊屬性 | UNIQUE、REF(RERF) |
| 特殊用途 | 產品報廢作業的主檔資料管理 |

## 2. 檔案功能說明

IMIEPF是產品報廢主檔的實體檔案：

1. **主要功能**：儲存產品報廢作業的主要資料
2. **檔案特性**：實體檔案，實際儲存資料
3. **系統用途**：支援產品報廢作業的完整管理
4. **資料完整性**：具有UNIQUE屬性，確保資料唯一性
5. **參考檔案**：使用REF(RERF)參考檔案進行欄位定義
6. **支援功能**：為產品報廢作業提供完整的資料基礎

## 3. 系統檔案清單

| 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|------|
| IMIEPF | 實體檔案 | 產品報廢主檔實體檔案（本檔案） |
| IMIELF01 | 邏輯檔案 | 產品報廢主檔邏輯檔案（IE01+IE05+IE02排序） |
| IMIELF02 | 邏輯檔案 | 產品報廢主檔邏輯檔案（IE05+IE01+IE02排序） |
| IMIELF1 | 邏輯檔案 | 產品報廢主檔邏輯檔案（IE05降序+IE02排序） |
| IMIFPF | 實體檔案 | 產品報廢明細檔實體檔案 |

## 4. 紀錄格式

| 格式名稱 | 說明 |
|----------|------|
| IE0 | 產品報廢主記錄格式 |

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 說明 |
|----------|----------|------|------|------|------|------|
| IE01 | 報廢單號 | 1 | - | R | 參考欄位 | 報廢單號 |
| IE02 | 客戶代號 | 2 | - | R | 主鍵/參考欄位 | 客戶代號 |
| IE03 | 產品代號 | 3 | - | R | 參考欄位 | 產品代號 |
| IE04 | 良品 | 4 | - | R | 參考欄位 | 良品狀態（0-良品，1-不良品） |
| IE05 | 報廢日期 | 5 | 8 | 數值 | 參考欄位 | 報廢日期 |
| IE06 | 現在狀態 | 6 | - | R | 參考欄位 | 現在狀態（'V'-已確認） |
| IEXX | 異動日期 | 7 | 8 | 數值 | 參考欄位 | 異動日期 |
| IEYY | 異動時間 | 8 | - | R | 參考欄位 | 異動時間 |
| IEZZ | 異動人員 | 9 | - | R | 參考欄位 | 異動人員 |

*註：所有欄位使用REF(RERF)參考檔案定義，R表示參考欄位*

## 6. 主鍵欄位

本實體檔案的主鍵欄位為：
- IE02（客戶代號）

### 主鍵特性：
- **IE02（客戶代號）**：唯一主鍵，客戶代號
- **UNIQUE屬性**：確保客戶代號的唯一性
- **單一主鍵**：以客戶代號作為唯一識別
- **資料完整性**：保證每個客戶只有一筆主記錄

## 7. 索引資料

| 索引名稱 | 索引鍵 | 排序 | 用途說明 |
|----------|--------|------|----------|
| 主索引 | IE02 | 升序 | 客戶代號主鍵索引 |

### 索引特性：
- **主鍵索引**：客戶代號的唯一索引
- **UNIQUE約束**：確保客戶代號不重複
- **高效查詢**：提供快速的客戶代號查詢

## 8. 備註

1. **實體檔案特性**：
   - 產品報廢主檔的實體檔案
   - 實際儲存報廢作業的主要資料
   - 具有UNIQUE屬性確保資料唯一性
2. **產品報廢功能**：
   - 支援產品報廢作業的完整管理
   - 提供報廢單據的主要資料儲存
   - 支援報廢作業的狀態管理
3. **資料完整性設計**：
   - UNIQUE屬性確保客戶代號唯一性
   - REF(RERF)參考檔案統一欄位定義
   - 完整的異動追蹤機制
4. **與其他檔案關聯**：
   - 為IMIELF01、IMIELF02、IMIELF1邏輯檔案提供資料基礎
   - 與IMIFPF明細檔案形成主明細關係
   - 支援完整的報廢作業資料結構
5. **報廢作業支援**：
   - 報廢單號管理（IE01）
   - 客戶代號管理（IE02）
   - 產品代號管理（IE03）
   - 良品狀態管理（IE04）
   - 報廢日期管理（IE05）
   - 現在狀態管理（IE06）
6. **狀態管理功能**：
   - 良品狀態（IE04）：0-良品，1-不良品
   - 現在狀態（IE06）：'V'-已確認
   - 完整的報廢狀態追蹤
7. **異動追蹤機制**：
   - 異動日期（IEXX）
   - 異動時間（IEYY）
   - 異動人員（IEZZ）
   - 完整的異動記錄追蹤
8. **業務應用**：
   - 產品報廢申請管理
   - 報廢狀態追蹤
   - 報廢作業確認
   - 報廢記錄查詢
9. **系統整合**：
   - 與庫存管理系統（IMI系列）整合
   - 支援庫存狀態的報廢調整
   - 提供完整的庫存報廢管理
10. **資料驗證**：
    - 客戶代號唯一性驗證
    - 良品狀態值驗證（0或1）
    - 現在狀態值驗證（'V'等）
    - 日期格式驗證
11. **報廢流程支援**：
    - 報廢申請記錄
    - 報廢執行記錄
    - 報廢確認記錄
    - 報廢完成記錄
12. **客戶管理整合**：
    - 客戶代號（IE02）作為主鍵
    - 支援客戶別報廢管理
    - 提供客戶報廢記錄查詢
13. **產品管理整合**：
    - 產品代號（IE03）管理
    - 良品狀態（IE04）管理
    - 支援產品別報廢統計
14. **時間維度管理**：
    - 報廢日期（IE05）管理
    - 異動日期（IEXX）管理
    - 異動時間（IEYY）管理
    - 完整的時間追蹤功能
15. **系統價值**：
    - 作為產品報廢系統的核心資料檔案
    - 提供完整的報廢資料管理功能
    - 支援報廢作業的各種查詢需求
16. **特殊設計**：
    - 客戶代號單一主鍵設計
    - UNIQUE屬性確保資料完整性
    - REF(RERF)統一欄位定義
17. **庫存影響管理**：
    - 與庫存系統緊密整合
    - 支援庫存報廢狀態更新
    - 提供庫存報廢調整功能
18. **成本影響管理**：
    - 支援報廢成本計算
    - 提供成本報廢調整
    - 支援成本分析需求
19. **決策支援**：
    - 提供報廢決策資料
    - 支援報廢政策制定
    - 提供報廢效果評估
20. **合規管理**：
    - 支援報廢作業合規要求
    - 提供報廢記錄審計
    - 確保報廢作業透明度
21. **報廢統計功能**：
    - 支援報廢數量統計
    - 提供報廢金額統計
    - 支援報廢趨勢分析
22. **品質管理整合**：
    - 良品狀態（IE04）管理
    - 支援品質報廢分析
    - 提供品質改善資料
23. **多維度分析**：
    - 客戶維度（IE02）
    - 產品維度（IE03）
    - 時間維度（IE05）
    - 狀態維度（IE04、IE06）
24. **系統維護**：
    - 實體檔案易於維護
    - 資料備份恢復支援
    - 提供良好的系統維護性
25. **參考檔案整合**：
    - 使用REF(RERF)參考檔案
    - 統一的欄位定義標準
    - 確保資料一致性
26. **報廢監控功能**：
    - 現在狀態（IE06）監控
    - 支援報廢作業狀態追蹤
    - 提供報廢異常監控
27. **資料完整性保證**：
    - UNIQUE屬性確保唯一性
    - 主鍵約束確保資料完整性
    - 參考檔案確保欄位一致性
28. **報廢作業效率**：
    - 單一主鍵提升查詢效率
    - 合理的欄位設計提升處理效率
    - 支援快速的報廢作業處理
29. **系統擴展性**：
    - 良好的檔案結構設計
    - 支援未來功能擴展
    - 提供系統成長空間
30. **業務流程支援**：
    - 完整的報廢作業流程支援
    - 從申請到確認的全程管理
    - 提供完整的業務流程基礎 