# PA#ALF2 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | PA#ALF2 |
| 檔案描述 | 客戶集團代碼檔 (邏輯檔) |
| 檔案類型 | LF (Logical File) |
| 記錄格式 | #A0 |
| 主鍵 | #A01 (代碼) |
| 實體檔案 | PA#APF |
| 檔案屬性 | 邏輯檢視，條件：#A02 = 'GROUP' |

## 2. 檔案功能說明

PA#ALF2 為 PA#APF 規則代碼檔的客戶集團專用邏輯檔案，提供：
- 客戶集團代碼的專門檢視
- 集團管理與維護
- 客戶集團歸屬查詢
- 集團分析支援

## 3. 系統檔案清單

| 檔案代號 | 檔案名稱 | 說明 |
|----------|----------|------|
| PA#ALF2 | 客戶集團代碼邏輯檔 | 主檔 |
| PA#APF | 規則代碼實體檔 | 實體檔案 |
| RERF | 參考檔案 | 欄位定義參考 |

## 4. 紀錄格式

### 記錄格式：#A0 (繼承自 PA#APF，條件篩選)

## 5. 欄位規格

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| #A01 | 集團代碼 | 1-10 | 10 | A | R | 主鍵，集團識別碼 |
| #A02 | 代碼類型 | 11-20 | 10 | A | R | 固定值：'GROUP' |
| #A03 | 集團名稱 | 21-60 | 40 | A | R | 集團中文名稱 |
| #A04 | 英文名稱 | 61-100 | 40 | A | R | 集團英文名稱 |
| #A05 | 集團說明 | 101-200 | 100 | A | R | 集團詳細說明 |
| #A06 | 使用狀態 | 201 | 1 | A | R | 'A'-有效，'I'-停用 |
| #A07 | 排序序號 | 202-204 | 3 | N | R | 顯示排序 |
| #A08 | 集團等級 | 205 | 1 | A | R | 'A'-大型，'B'-中型，'C'-小型 |
| #A09 | 總部地區 | 206-210 | 5 | A | R | 總部所在地區 |
| #A10 | 母公司 | 211-218 | 8 | A | R | 母公司代號 |
| #AXX | 建立日期 | 219-226 | 8 | N | R | 格式：YYYYMMDD |
| #AYY | 建立時間 | 227-232 | 6 | N | R | 格式：HHMMSS |
| #AZZ | 建立者 | 233-242 | 10 | A | R | 操作人員 |

## 6. 主鍵欄位

| 鍵值序號 | 欄位代號 | 欄位名稱 | 排序 |
|----------|----------|----------|------|
| 1 | #A01 | 集團代碼 | 升序 |

## 7. 索引資料

### 主要索引
- **索引名稱**：主鍵索引
- **索引欄位**：#A01
- **索引類型**：PRIMARY
- **說明**：集團代碼升序排序

### 輔助索引
1. **狀態索引**：#A06 (使用狀態)
2. **排序索引**：#A07 (排序序號)
3. **等級索引**：#A08 (集團等級)
4. **地區索引**：#A09 (總部地區)
5. **母公司索引**：#A10 (母公司)

### 邏輯檢視特性
- **基底檔案**：PA#APF
- **檢視條件**：#A02 = 'GROUP'
- **檢視類型**：條件篩選檢視
- **排序方式**：#A01 升序

## 8. 備註

### 設計考量
1. 此檔案為 PA#APF 的條件邏輯檢視檔案
2. 專門處理客戶集團相關代碼資料
3. 提供集團分級管理功能

### 集團分級說明
- **A級 (大型集團)**：跨國企業，多個子公司
- **B級 (中型集團)**：區域性企業，數個分公司
- **C級 (小型集團)**：本地企業，少數關聯公司

### 參考關聯
- **實體檔案**：PA#APF (#A02 = 'GROUP')
- **客戶檔案**：MTMDPF (客戶集團歸屬)
- **母公司檔案**：MTMDPF (#A10 = MD01)
- **地區檔案**：PA#DPF (#A09 = #D01)

### 業務規則
1. 集團代碼必須唯一
2. 母公司需對應有效客戶代號
3. 總部地區需對應有效地區代碼
4. 停用集團不影響既有客戶歸屬

### 資料完整性
1. 資料內容完全依賴 PA#APF 實體檔案
2. 僅顯示 #A02 = 'GROUP' 的記錄
3. #A10 需對應 MTMDPF 中的有效客戶
4. #A09 需對應有效的地區代碼

### 使用注意事項
1. 此為邏輯檔案，不可直接寫入資料
2. 所有異動需透過 PA#APF 實體檔案進行
3. 新增集團時需設定 #A02 = 'GROUP'
4. 集團等級影響客戶管理策略 