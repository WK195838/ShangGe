# W2BBLF01 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | W2BBLF01 |
| 檔案類型 | 邏輯檔 (LF) |
| 檔案描述 | 後台銷售明細檔邏輯檔01 |
| 基礎實體檔 | W2BBPF |
| 作業系統 | AS/400 |
| 資料庫 | DB2/400 |

## 2. 檔案功能說明

此檔案為後台銷售明細檔的邏輯檔，提供按銷售編號+商品代號排序的邏輯視圖。主要用於：
- 後台銷售明細資料的有序存取
- 支援按銷售編號及商品代號進行查詢
- 提供銷售明細的基本排序檢索功能

## 3. 系統檔案清單

| 項目 | 檔案名稱 | 類型 | 說明 |
|------|----------|------|------|
| 主檔 | W2BBLF01 | LF | 後台銷售明細檔邏輯檔01 |
| 基礎檔 | W2BBPF | PF | 後台銷售明細檔 |

## 4. 紀錄格式

### 記錄格式：BB0
**基礎實體檔：W2BBPF**

| 欄位代號 | 欄位名稱 | 型態 | 長度 | 小數 | 說明 |
|----------|----------|------|------|------|------|
| BB01 | 銷售編號 | A | 12 | 0 | 後台銷售編號 |
| BB02 | 銷售單號 | S | 6 | 0 | 銷售單號 |
| BB03 | 商品代號 | A | 9 | 0 | 商品識別代號 |
| BB04 | 銷售數量 | S | 8 | 0 | 銷售數量 |
| BB05 | 寄出數量 | S | 8 | 0 | 實際寄出數量 |
| BB06 | 確認數量 | S | 8 | 0 | 確認收貨數量 |
| BB07 | 單價 | S | 11 | 2 | 銷售單價 |
| BB08 | FOB單價 | S | 9 | 2 | FOB成本單價 |
| BB08A | FHI單價 | S | 9 | 2 | FHI成本單價 |
| BB08B | DUTY單價 | S | 9 | 2 | 關稅成本單價 |
| BB09 | 狀態 | A | 1 | 0 | 處理狀態代碼 |
| BB10 | 備註 | O | 128 | 0 | 備註說明 |
| BB11 | 指派記號 | A | 1 | 0 | 指派標記 |
| BBXX | 建立日期 | S | 8 | 0 | 記錄建立日期 |
| BBYY | 建立時間 | S | 6 | 0 | 記錄建立時間 |
| BBZZ | 建立人員 | A | 10 | 0 | 記錄建立人員 |

## 5. 主鍵欄位

| 順序 | 欄位代號 | 欄位名稱 | 排序方式 |
|------|----------|----------|----------|
| 1 | BB01 | 銷售編號 | 遞增 |
| 2 | BB03 | 商品代號 | 遞增 |

## 6. 索引資料

### 索引鍵值
- **主索引**：BB01 + BB03
- **排序方式**：遞增排序
- **唯一性**：繼承基礎檔案的UNIQUE約束

### 存取路徑
此邏輯檔提供以下存取路徑：
1. 依銷售編號存取特定銷售記錄
2. 依銷售編號+商品代號精確存取銷售明細
3. 支援範圍查詢功能

## 7. 使用說明

### 查詢功能
- 支援依銷售編號範圍查詢
- 支援依商品代號範圍查詢
- 提供組合鍵值精確查詢

### 作業程序
1. 透過銷售編號定位銷售記錄
2. 進一步透過商品代號定位特定明細
3. 系統自動按索引順序返回結果

### 注意事項
- 此為唯讀邏輯檔，不可直接進行資料維護
- 資料異動需透過基礎檔案W2BBPF進行
- 邏輯檔資料即時反映基礎檔案異動

## 8. 備註

- 邏輯檔建立於W2BBPF基礎檔案之上
- 提供銷售明細資料的有序存取介面
- 支援後台銷售系統的查詢需求
- 排序邏輯：銷售編號為主要排序鍵，商品代號為次要排序鍵 