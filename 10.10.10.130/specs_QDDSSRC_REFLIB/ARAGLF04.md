# ARAGLF04 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | ARAGLF04 |
| 檔案類型 | 邏輯檔案 (Logical File) |
| 檔案用途 | 銷貨折讓明細檔 |
| 基礎實體檔案 | ARAGPF |
| 索引鍵 | AG04+AG03+AG02 |
| 排序方式 | 升序 |

## 2. 檔案功能說明

ARAGLF04是基於ARAGPF銷貨折讓明細檔的邏輯檔案，主要功能為：

1. 提供以「發票單號+產品代號+序號」為排序的存取路徑
2. 支援按發票單號進行銷貨折讓明細資料查詢
3. 用於產品別折讓明細分析與統計
4. 支援序號順序處理的業務需求

## 3. 系統檔案清單

| 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|------|
| ARAGPF | 實體檔案 | 銷貨折讓明細檔（基礎實體檔案） |
| ARAGLF04 | 邏輯檔案 | 銷貨折讓明細檔邏輯檔案 |

## 4. 紀錄格式

| 格式名稱 | 基礎實體檔案 | 說明 |
|----------|--------------|------|
| AG0 | ARAGPF | 銷貨折讓明細紀錄格式 |

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明

此邏輯檔案使用ARAGPF實體檔案的所有欄位，詳細欄位規格請參考ARAGPF檔案規格書。

主要索引欄位：

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|----------|
| AG04 | 發票單號 | - | - | 字元 | 發票單號 |
| AG03 | 產品代號 | - | - | 字元 | 產品代號 |
| AG02 | 序號 | - | - | 數值 | 序號 |

## 6. 主鍵欄位

本邏輯檔案的主要存取鍵值為：
- AG04（發票單號）
- AG03（產品代號） 
- AG02（序號）

## 7. 索引資料

| 索引名稱 | 索引鍵 | 排序 | 用途說明 |
|----------|--------|------|----------|
| 主索引 | AG04+AG03+AG02 | 升序 | 發票單號+產品代號+序號排序 |

### 索引特性：
- **AG04（發票單號）**：第一層排序，用於快速定位特定發票的折讓明細
- **AG03（產品代號）**：第二層排序，在同一發票內按產品代號排序
- **AG02（序號）**：第三層排序，確保同一產品的折讓明細按序號順序處理

## 8. 備註

1. 此邏輯檔案提供以發票單號為主軸的存取路徑
2. 適用於發票別產品折讓明細查詢與處理
3. 支援產品別折讓統計分析
4. 序號排序確保明細資料的處理順序
5. 與其他ARAGLF系列邏輯檔案提供不同維度的資料存取方式