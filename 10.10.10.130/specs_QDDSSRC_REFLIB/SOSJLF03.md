# SOSJLF03 檔案規格書

## 1. 基本資料
- **檔案名稱**: SOSJLF03
- **檔案類型**: LF (邏輯檔案)
- **基底檔案**: SOSJPF (發票明細檔)
- **檔案說明**: 發票明細檔邏輯檔案 - 產品轄區部門時序查詢
- **建立日期**: (依系統記錄)
- **最後異動日期**: (依系統記錄)

## 2. 檔案功能說明
此邏輯檔案提供產品編號、轄區編號、部門編號、發票日期、發票號碼的複合排序，適用於產品在不同組織架構下的銷售時序分析與統計。

### 主要功能
- 產品組織架構銷售查詢
- 產品轄區部門統計分析
- 發票時序排序管理
- 產品銷售績效評估

## 3. 系統檔案清單
| 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|------|
| SOSJPF | PF | 發票明細檔 (基底檔案) |
| SOSJLF03 | LF | 發票明細檔邏輯檔案 |

## 4. 紀錄格式

### 4.1 邏輯檔案設定
```
PFILE(SOSJPF)      // 基底實體檔案
```

### 4.2 關鍵欄位 (Key Fields)
| 順序 | 欄位代號 | 欄位名稱 | 型態 | 長度 | 排序 | 說明 |
|------|----------|----------|------|------|------|------|
| 1 | SJ03 | 產品編號 | A | 15 | ASC | 主要排序鍵 |
| 2 | SJ11 | 轄區編號 | A | 5 | ASC | 次要排序鍵 |
| 3 | SJ12 | 部門編號 | A | 5 | ASC | 第三排序鍵 |
| 4 | SJ16 | 發票日期 | N | 8,0 | ASC | 第四排序鍵 |
| 5 | SJ02 | 發票號碼 | A | 10 | ASC | 第五排序鍵 |

### 4.3 選擇條件 (SELECT/OMIT)
無特殊選擇條件設定

### 4.4 產品導向設計
此檔案以產品為主要分類，支援產品在組織架構中的銷售分析

## 5. 主鍵欄位
- **主要鍵值**: SJ03 + SJ11 + SJ12 + SJ16 + SJ02
- **排序方式**: 產品、轄區、部門、日期、發票號碼升序
- **索引類型**: 複合索引，五層排序

## 6. 索引資料
- **排序方式**: SJ03 + SJ11 + SJ12 + SJ16 + SJ02
- **索引類型**: 復合索引，支援產品組織時序查詢
- **特殊屬性**: 全升序排列，時序統計友善

## 7. 使用說明

### 7.1 檔案用途
- 產品銷售組織分析
- 產品轄區部門統計
- 產品銷售時序追蹤
- 組織績效評估

### 7.2 程式存取方式
```rpg
// 依產品查詢銷售明細
SETLL (產品編號) SOSJLF03;
READ SOSJLF03;
// 依產品轄區查詢銷售
CHAIN (產品編號:轄區編號) SOSJLF03;
// 依產品轄區部門查詢銷售
CHAIN (產品編號:轄區編號:部門編號) SOSJLF03;
```

### 7.3 查詢層級優勢
- **產品層級**: 查詢產品所有轄區部門銷售
- **轄區層級**: 查詢產品在特定轄區的銷售
- **部門層級**: 查詢產品在特定部門的銷售
- **時序層級**: 全升序排列，便於時序統計

### 7.4 組織分析特色
- **產品導向**: 以產品為中心的組織分析
- **階層架構**: 轄區-部門雙層組織架構
- **時序統計**: 支援產品銷售時間趨勢分析

### 7.5 業務應用場景
- **產品分析**: 產品在不同組織的銷售表現
- **轄區比較**: 產品在各轄區的銷售差異
- **部門評估**: 各部門對產品的銷售貢獻
- **時序追蹤**: 產品銷售時間軌跡分析

### 7.6 統計報表支援
- **產品銷售統計**: 按組織架構統計產品銷售
- **績效比較**: 不同轄區部門的產品銷售比較
- **趨勢分析**: 產品銷售時間趨勢分析

## 8. 備註
- 此邏輯檔案專為產品組織架構分析設計
- 提供產品-轄區-部門三層組織分類結構
- 全升序排列，便於時序統計與趨勢分析
- 適用於產品銷售績效評估與組織比較分析 