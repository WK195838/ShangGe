# MTMDLF3 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | MTMDLF3 |
| 檔案描述 | 客戶基本資料檔 (邏輯檔) |
| 檔案類型 | LF (Logical File) |
| 記錄格式 | MD0 |
| 主鍵 | MD01 (客戶代號) |
| 實體檔案 | MTMDPF |
| 檔案屬性 | 邏輯檢視，特殊條件排序 |

## 2. 檔案功能說明

MTMDLF3 為 MTMDPF 客戶基本資料檔的特殊條件邏輯檔案，提供：
- 特殊條件客戶資料檢視
- 客戶分析專用檢視
- 特定業務需求支援
- 客戶統計功能

## 3. 系統檔案清單

| 檔案代號 | 檔案名稱 | 說明 |
|----------|----------|------|
| MTMDLF3 | 客戶基本資料邏輯檔3 | 主檔 |
| MTMDPF | 客戶基本資料實體檔 | 實體檔案 |
| MTMDLF | 客戶基本資料邏輯檔 | 基本邏輯檔 |
| RERF | 參考檔案 | 欄位定義參考 |

## 4. 紀錄格式

### 記錄格式：MD0 (繼承自 MTMDPF)

## 5. 欄位規格

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| MD01 | 客戶代號 | 1-7 | 7 | A | R | 主鍵，客戶識別碼 |
| MD02 | 客戶名稱 | 8-25 | 18 | A | R | 客戶中文名稱 |
| MD03 | 英文名稱 | 26-43 | 18 | A | R | 客戶英文名稱 |
| MD04 | 客戶簡稱 | 44-53 | 10 | A | R | 客戶簡稱 |
| MD05 | 統一編號 | 54-61 | 8 | A | R | 統一編號 |
| MD06 | 客戶分類 | 62-66 | 5 | A | R | 客戶分類代號 |
| MD07 | 地區代號 | 67-71 | 5 | A | R | 所屬地區 |
| MD08 | 區域代號 | 72-76 | 5 | A | R | 所屬區域 |
| MD09 | 業務員 | 77-81 | 5 | A | R | 負責業務員代號 |
| MD10 | 客戶狀態 | 82 | 1 | A | R | 'A'-有效，'I'-停用，'S'-暫停 |
| MD11 | 負責人 | 83-92 | 10 | A | R | 客戶負責人 |
| MD12 | 聯絡電話 | 93-107 | 15 | A | R | 客戶電話 |
| MD13 | 傳真號碼 | 108-122 | 15 | A | R | 傳真號碼 |
| MD14 | 客戶地址 | 123-162 | 40 | A | R | 客戶地址 |
| MD15 | 信用額度 | 163-173 | 11 | N | R | 信用額度 |
| MD16 | 收款條件 | 174-178 | 5 | A | R | 收款條件代號 |
| MD17 | 客戶等級 | 179 | 1 | A | R | 'A'-VIP，'B'-一般，'C'-新客戶 |
| MD18 | 開戶日期 | 180-187 | 8 | N | R | 格式：YYYYMMDD |
| 其他欄位 | 繼承MTMDPF | | | | | 參考MTMDPF規格 |

## 6. 主鍵欄位

| 鍵值序號 | 欄位代號 | 欄位名稱 | 排序 |
|----------|----------|----------|------|
| 1 | MD01 | 客戶代號 | 升序 |

## 7. 索引資料

### 主要索引
- **索引名稱**：特殊條件索引
- **索引欄位**：MD01
- **索引類型**：PRIMARY
- **說明**：客戶代號升序排序

### 輔助索引
1. **等級索引**：MD17 + MD01 (客戶等級 + 客戶代號)
2. **等級狀態索引**：MD17 + MD10 + MD01
3. **等級地區索引**：MD17 + MD07 + MD01
4. **等級業務員索引**：MD17 + MD09 + MD01
5. **開戶日期索引**：MD18 + MD01 (開戶日期 + 客戶代號)
6. **信用等級索引**：MD15 + MD17 + MD01

### 邏輯檢視特性
- **基底檔案**：MTMDPF
- **檢視類型**：特殊條件檢視
- **排序方式**：特殊業務需求排序
- **分組顯示**：依客戶等級分組
- **過濾條件**：可設定特殊條件過濾

## 8. 備註

### 設計考量
1. 此檔案為 MTMDPF 的特殊條件邏輯檢視檔案
2. 提供特殊業務需求的客戶檢視
3. 支援客戶分析和統計需求

### 特殊功能
- **條件篩選**：按特殊條件篩選客戶
- **等級管理**：客戶等級專門管理
- **統計分析**：支援客戶統計分析
- **業績評估**：客戶業績評估支援

### 客戶等級說明
- **A級 (VIP客戶)**：重要客戶，享有特殊服務
- **B級 (一般客戶)**：穩定交易客戶
- **C級 (新客戶)**：新開發客戶

### 參考關聯
- **實體檔案**：MTMDPF (客戶基本資料)
- **分類檔案**：MTMDPF1 (MD06 = MD011)
- **業務員檔案**：MTMCPF (MD09 = MC01)
- **地區檔案**：PA#DPF (MD07 = #D01)
- **區域檔案**：PA#EPF (MD08 = #E01)

### 業務規則
1. 顯示順序：依特殊業務需求排序
2. 等級關係需維持完整性
3. 信用額度按等級管理
4. 特殊條件可動態調整

### 資料完整性
1. 資料內容完全依賴 MTMDPF 實體檔案
2. MD06 需對應 MTMDPF1 中的有效分類
3. MD09 需對應 MTMCPF 中的有效業務員
4. MD17 客戶等級需符合業務規則

### 使用注意事項
1. 此為邏輯檔案，不可直接寫入資料
2. 所有異動需透過 MTMDPF 實體檔案進行
3. 等級調整會影響客戶分組
4. 適用於客戶分析與特殊業務需求 