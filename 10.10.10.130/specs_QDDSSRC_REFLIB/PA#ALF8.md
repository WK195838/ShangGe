# PA#ALF8 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | PA#ALF8 |
| 檔案描述 | 規則代碼檔 FOR #A02=SHOPDEPT |
| 檔案類型 | LF (Logical File) |
| 記錄格式 | #A0 |
| 主鍵 | #A01 (代碼) |
| 實體檔案 | PA#APF |
| 檔案屬性 | 邏輯檢視，條件：#A02 = 'SHOPDEPT' |

## 2. 檔案功能說明

PA#ALF8 為 PA#APF 規則代碼檔的專櫃部門專用邏輯檔案，提供：
- 專櫃部門代碼的專門檢視
- 專櫃管理系統支援
- 部門分類管理
- 專櫃業績分析

## 3. 系統檔案清單

| 檔案代號 | 檔案名稱 | 說明 |
|----------|----------|------|
| PA#ALF8 | 專櫃部門代碼邏輯檔 | 主檔 |
| PA#APF | 規則代碼實體檔 | 實體檔案 |
| RERF | 參考檔案 | 欄位定義參考 |

## 4. 紀錄格式

### 記錄格式：#A0 (繼承自 PA#APF，條件篩選)

## 5. 欄位規格

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| #A01 | 部門代碼 | 1-10 | 10 | A | R | 主鍵，專櫃部門識別碼 |
| #A02 | 代碼類型 | 11-20 | 10 | A | R | 固定值：'SHOPDEPT' |
| #A03 | 部門名稱 | 21-60 | 40 | A | R | 專櫃部門中文名稱 |
| #A04 | 英文名稱 | 61-100 | 40 | A | R | 專櫃部門英文名稱 |
| #A05 | 部門說明 | 101-200 | 100 | A | R | 專櫃部門詳細說明 |
| #A06 | 使用狀態 | 201 | 1 | A | R | 'A'-有效，'I'-停用 |
| #A07 | 排序序號 | 202-204 | 3 | N | R | 顯示排序 |
| #A08 | 部門分類 | 205 | 1 | A | R | 'F'-服飾，'C'-化妝品，'H'-家居 |
| #A09 | 樓層位置 | 206-208 | 3 | A | R | 專櫃所在樓層 |
| #A10 | 主管代號 | 209-213 | 5 | A | R | 部門主管代號 |
| #A11 | 抽成比率 | 214-218 | 5 | N | R | 抽成比率 (3位小數) |
| #A12 | 最低業績 | 219-227 | 9 | N | R | 最低業績要求 |
| #AXX | 建立日期 | 228-235 | 8 | N | R | 格式：YYYYMMDD |
| #AYY | 建立時間 | 236-241 | 6 | N | R | 格式：HHMMSS |
| #AZZ | 建立者 | 242-251 | 10 | A | R | 操作人員 |

## 6. 主鍵欄位

| 鍵值序號 | 欄位代號 | 欄位名稱 | 排序 |
|----------|----------|----------|------|
| 1 | #A01 | 部門代碼 | 升序 |

## 7. 索引資料

### 主要索引
- **索引名稱**：主鍵索引
- **索引欄位**：#A01
- **索引類型**：PRIMARY
- **說明**：部門代碼升序排序

### 輔助索引
1. **分類索引**：#A08 (部門分類)
2. **排序索引**：#A07 (排序序號)
3. **狀態索引**：#A06 (使用狀態)
4. **樓層索引**：#A09 (樓層位置)
5. **主管索引**：#A10 (主管代號)
6. **業績索引**：#A12 (最低業績)

### 邏輯檢視特性
- **基底檔案**：PA#APF
- **檢視條件**：#A02 = 'SHOPDEPT'
- **檢視類型**：條件篩選檢視
- **排序方式**：#A07 + #A01 升序

## 8. 備註

### 設計考量
1. 此檔案為 PA#APF 的條件邏輯檢視檔案
2. 專門處理專櫃部門相關代碼資料
3. 提供專櫃管理功能

### 專櫃部門分類說明
- **F級 (服飾類)**：男裝、女裝、童裝、內衣、鞋包
- **C級 (化妝品類)**：彩妝、保養品、香水、美容工具
- **H級 (家居類)**：家具、家飾、寢具、廚具

### 參考關聯
- **實體檔案**：PA#APF (#A02 = 'SHOPDEPT')
- **主管檔案**：MTMCPF (#A10 = MC01)
- **專櫃PLU檔**：MTMGLF (部門代碼關聯)
- **抽成比率檔**：PA#JPF (部門抽成設定)

### 業務規則
1. 部門代碼必須唯一
2. 主管代號需對應有效員工
3. 抽成比率需在合理範圍內
4. 最低業績需配合實際營運

### 資料完整性
1. 資料內容完全依賴 PA#APF 實體檔案
2. 僅顯示 #A02 = 'SHOPDEPT' 的記錄
3. #A10 需對應 MTMCPF 中的有效主管
4. #A11 抽成比率需符合業務規則

### 使用注意事項
1. 此為邏輯檔案，不可直接寫入資料
2. 所有異動需透過 PA#APF 實體檔案進行
3. 新增專櫃部門時需設定 #A02 = 'SHOPDEPT'
4. 適用於專櫃管理與業績分析 