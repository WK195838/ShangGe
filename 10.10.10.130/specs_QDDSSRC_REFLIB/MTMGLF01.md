# MTMGLF01 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | MTMGLF01 |
| 檔案描述 | 專櫃PLU檔（MG03+MG01） |
| 檔案類型 | LF (Logical File) |
| 記錄格式 | MG0 |
| 主鍵 | MG03 + MG01 (專櫃編號 + PLU代號) |
| 實體檔案 | MTMGPF |
| 檔案屬性 | 邏輯檢視，特殊排序 |

## 2. 檔案功能說明

MTMGLF01 為 MTMGPF 專櫃PLU檔的特殊邏輯檔案，以專櫃編號為主要排序，提供：
- 專櫃別PLU資料檢視
- 專櫃PLU管理與維護
- 專櫃銷售分析支援
- POS系統專櫃檢視

## 3. 系統檔案清單

| 檔案代號 | 檔案名稱 | 說明 |
|----------|----------|------|
| MTMGLF01 | 專櫃PLU檔特殊邏輯檔 | 主檔 |
| MTMGPF | 專櫃PLU實體檔 | 實體檔案 |
| MTMGLF | 專櫃PLU邏輯檔 | 基本邏輯檔 |
| RERF | 參考檔案 | 欄位定義參考 |

## 4. 紀錄格式

### 記錄格式：MG0 (繼承自 MTMGPF)

## 5. 欄位規格

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| MG01 | PLU代號 | 1-13 | 13 | A | R | 次要鍵，PLU識別碼 |
| MG02 | 產品代號 | 14-22 | 9 | A | R | 對應產品代號 |
| MG03 | 專櫃編號 | 23-27 | 5 | A | R | 主要鍵，專櫃編號 |
| MG04 | 建檔日期 | 28-35 | 8 | N | R | 格式：YYYYMMDD |
| MG05 | 使用狀態 | 36 | 1 | A | R | 'A'-有效，'I'-停用 |
| MG06 | 產品說明 | 37-56 | 20 | A | R | 產品說明文字 |
| MG07 | 專櫃價格 | 57-65 | 9 | N | R | 專櫃銷售價格 |
| MG08 | 庫存數量 | 66-70 | 5 | N | R | 專櫃庫存數量 |
| MGXX | 建立日期 | 71-78 | 8 | N | R | 格式：YYYYMMDD |
| MGYY | 建立時間 | 79-84 | 6 | N | R | 格式：HHMMSS |
| MGZZ | 建立者 | 85-94 | 10 | A | R | 操作人員 |

## 6. 主鍵欄位

| 鍵值序號 | 欄位代號 | 欄位名稱 | 排序 |
|----------|----------|----------|------|
| 1 | MG03 | 專櫃編號 | 升序 |
| 2 | MG01 | PLU代號 | 升序 |

## 7. 索引資料

### 主要索引
- **索引名稱**：專櫃PLU複合索引
- **索引欄位**：MG03 + MG01
- **索引類型**：PRIMARY
- **說明**：專櫃編號 + PLU代號複合升序排序

### 輔助索引
1. **產品索引**：MG02 (產品代號)
2. **狀態索引**：MG05 (使用狀態)
3. **建檔日期索引**：MG04 (建檔日期)
4. **專櫃狀態索引**：MG03 + MG05 (專櫃 + 狀態)

### 邏輯檢視特性
- **基底檔案**：MTMGPF
- **檢視類型**：特殊排序檢視
- **排序方式**：MG03 + MG01 升序
- **分組顯示**：依專櫃編號分組

## 8. 備註

### 設計考量
1. 此檔案為 MTMGPF 的特殊排序邏輯檢視檔案
2. 以專櫃為主要分組，便於專櫃管理
3. 支援專櫃別POS系統需求

### 特殊功能
- **專櫃分組**：按專櫃編號分組排序
- **PLU管理**：專櫃內PLU排序管理
- **狀態篩選**：可選擇顯示有效或所有PLU
- **快速查詢**：專櫃內產品快速檢索

### 參考關聯
- **實體檔案**：MTMGPF (專櫃PLU檔)
- **產品檔案**：MTMAPF (MG02 = MA01)
- **專櫃檔案**：PA#FPF (MG03 = #F01)
- **參考檔案**：RERF (欄位定義)

### 業務規則
1. 顯示順序：專櫃編號 + PLU代號
2. 產品代號需對應有效產品
3. 專櫃編號需對應有效專櫃
4. 停用PLU不影響銷售歷史資料

### 資料完整性
1. 資料內容完全依賴 MTMGPF 實體檔案
2. MG02 需對應 MTMAPF 中的有效產品
3. MG03 需對應有效的專櫃編號
4. PLU代號格式需符合POS系統規範

### 使用注意事項
1. 此為邏輯檔案，不可直接寫入資料
2. 所有異動需透過 MTMGPF 實體檔案進行
3. 專櫃異動需同步更新POS系統
4. 適用於專櫃管理與銷售分析 