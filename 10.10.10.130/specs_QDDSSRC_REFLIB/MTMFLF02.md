# MTMFLF02 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | MTMFLF02 |
| 檔案描述 | 禮盒結構資料檔 (邏輯檔) |
| 檔案類型 | LF (Logical File) |
| 記錄格式 | MF0 |
| 主鍵 | MF01 + MF02 (禮盒代號 + 序號) |
| 實體檔案 | MTMFPF |
| 檔案屬性 | 邏輯檢視，特殊排序 |

## 2. 檔案功能說明

MTMFLF02 為 MTMFPF 禮盒結構資料檔的特殊邏輯檔案，提供：
- 禮盒結構特殊排序檢視
- 禮盒管理專用檢視
- 禮盒成本分析
- 禮盒組合統計

## 3. 系統檔案清單

| 檔案代號 | 檔案名稱 | 說明 |
|----------|----------|------|
| MTMFLF02 | 禮盒結構邏輯檔2 | 主檔 |
| MTMFPF | 禮盒結構實體檔 | 實體檔案 |
| MTMFLF | 禮盒結構邏輯檔 | 基本邏輯檔 |
| RERF | 參考檔案 | 欄位定義參考 |

## 4. 紀錄格式

### 記錄格式：MF0 (繼承自 MTMFPF)

## 5. 欄位規格

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| MF01 | 禮盒代號 | 1-9 | 9 | A | R | 主鍵，禮盒識別碼 |
| MF02 | 序號 | 10-12 | 3 | N | R | 主鍵，組合序號 |
| MF03 | 產品代號 | 13-21 | 9 | A | R | 組合產品代號 |
| MF04 | 產品名稱 | 22-41 | 20 | A | R | 組合產品名稱 |
| MF05 | 數量 | 42-47 | 6 | N | R | 組合數量 |
| MF06 | 單位 | 48-50 | 3 | A | R | 數量單位 |
| MF07 | 成本價 | 51-59 | 9 | N | R | 組合產品成本 |
| MF08 | 分攤價 | 60-68 | 9 | N | R | 禮盒內分攤價格 |
| MF09 | 使用狀態 | 69 | 1 | A | R | 'A'-有效，'I'-停用 |
| MF10 | 主要產品 | 70 | 1 | A | R | 'Y'-主要，'N'-配件 |
| MF11 | 產品類型 | 71 | 1 | A | R | 'P'-產品，'M'-贈品，'A'-配件 |
| MF12 | 重量 | 72-77 | 6 | N | R | 產品重量 |
| MF13 | 體積 | 78-83 | 6 | N | R | 產品體積 |
| MF14 | 分類代號 | 84-88 | 5 | A | R | 產品分類 |
| MF15 | 包裝順序 | 89-91 | 3 | N | R | 包裝順序 |
| MFXX | 建立日期 | 92-99 | 8 | N | R | 格式：YYYYMMDD |
| MFYY | 建立時間 | 100-105 | 6 | N | R | 格式：HHMMSS |
| MFZZ | 建立者 | 106-115 | 10 | A | R | 操作人員 |

## 6. 主鍵欄位

| 鍵值序號 | 欄位代號 | 欄位名稱 | 排序 |
|----------|----------|----------|------|
| 1 | MF01 | 禮盒代號 | 升序 |
| 2 | MF02 | 序號 | 升序 |

## 7. 索引資料

### 主要索引
- **索引名稱**：禮盒結構索引
- **索引欄位**：MF01 + MF02
- **索引類型**：PRIMARY
- **說明**：禮盒代號 + 序號複合升序排序

### 輔助索引
1. **產品索引**：MF03 (產品代號)
2. **主要產品索引**：MF10 + MF01 + MF02
3. **產品類型索引**：MF11 + MF01 + MF02
4. **分類索引**：MF14 + MF01 + MF02
5. **包裝順序索引**：MF15 + MF01 + MF02
6. **狀態索引**：MF09 (使用狀態)

### 邏輯檢視特性
- **基底檔案**：MTMFPF
- **檢視類型**：特殊排序檢視
- **排序方式**：禮盒 + 包裝順序排序
- **分組顯示**：依禮盒分組

## 8. 備註

### 設計考量
1. 此檔案為 MTMFPF 的特殊排序邏輯檢視檔案
2. 提供禮盒結構管理功能
3. 支援禮盒成本分析需求

### 特殊功能
- **禮盒分組**：按禮盒代號分組管理
- **包裝順序**：依包裝順序排序
- **成本分析**：禮盒成本結構分析
- **重量計算**：自動重量體積計算

### 產品類型說明
- **P級 (主要產品)**：禮盒主要商品
- **M級 (贈品)**：附贈贈品
- **A級 (配件)**：包裝配件

### 參考關聯
- **實體檔案**：MTMFPF (禮盒結構資料)
- **產品檔案**：MTMAPF (MF03 = MA01)
- **禮盒檔案**：禮盒主檔 (MF01 = 禮盒代號)
- **分類檔案**：PA#分類檔 (MF14 = 分類代號)

### 業務規則
1. 顯示順序：禮盒代號 + 包裝順序
2. 產品關係需維持完整性
3. 主要產品必須至少有一項
4. 成本計算需符合業務邏輯

### 資料完整性
1. 資料內容完全依賴 MTMFPF 實體檔案
2. MF03 需對應 MTMAPF 中的有效產品
3. MF14 需對應有效的分類代號
4. 數量和價格需符合業務規則

### 使用注意事項
1. 此為邏輯檔案，不可直接寫入資料
2. 所有異動需透過 MTMFPF 實體檔案進行
3. 包裝順序調整會影響禮盒組裝
4. 適用於禮盒管理與成本分析 