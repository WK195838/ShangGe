# W2BGPF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | W2BGPF |
| 檔案類型 | 實體檔 (PF) |
| 檔案描述 | 前台驗收主檔 |
| 作業系統 | AS/400 |
| 資料庫 | DB2/400 |

## 2. 檔案功能說明

此檔案為前台驗收系統的核心主檔，負責管理驗收作業的基本資料及狀態。主要功能：
- 記錄驗收作業的基本資訊
- 管理供應商及營業點的驗收關係
- 控制驗收金額及狀態
- 提供採購與驗收的關聯管理
- 支援驗收流程的完整追蹤

## 3. 系統檔案清單

| 項目 | 檔案名稱 | 類型 | 說明 |
|------|----------|------|------|
| 主檔 | W2BGPF | PF | 前台驗收主檔 |
| 邏輯檔01 | W2BGLF01 | LF | 後台驗收主檔邏輯檔01 |
| 邏輯檔02 | W2BGLF02 | LF | 後台驗收主檔邏輯檔02 |
| 邏輯檔03 | W2BGLF03 | LF | 後台驗收主檔邏輯檔03 |

## 4. 紀錄格式

### 記錄格式：BG0
**唯一性約束：UNIQUE**

| 欄位代號 | 欄位名稱 | 型態 | 長度 | 小數 | 說明 |
|----------|----------|------|------|------|------|
| BG01 | 建立日期 | S | 8 | 0 | 記錄建立日期 |
| BG02 | 營業點 | A | 5 | 0 | 營業點代號 |
| BG03 | 驗收編號 | A | 12 | 0 | 驗收編號 |
| BG04 | 供應商 | A | 5 | 0 | 供應商代號 |
| BG05 | 總金額 | S | 11 | 2 | 驗收總金額 |
| BG06 | 採購編號 | A | 12 | 0 | 採購編號 |
| BG07 | 狀態 | A | 1 | 0 | 處理狀態 |
| BGXX | 建立日期 | S | 8 | 0 | 記錄建立日期 |
| BGYY | 建立時間 | S | 6 | 0 | 記錄建立時間 |
| BGZZ | 建立人員 | A | 10 | 0 | 記錄建立人員 |

## 5. 主鍵欄位

| 順序 | 欄位代號 | 欄位名稱 | 排序方式 |
|------|----------|----------|----------|
| 1 | BG01 | 建立日期 | 遞增 |
| 2 | BG02 | 營業點 | 遞增 |
| 3 | BG03 | 驗收編號 | 遞增 |

## 6. 索引資料

### 索引鍵值
- **主索引**：BG01 + BG02 + BG03
- **唯一性約束**：UNIQUE
- **排序方式**：建立日期遞增，營業點遞增，驗收編號遞增

### 存取路徑
此檔案提供以下存取路徑：
1. 依建立日期+營業點+驗收編號的複合檢索
2. 支援日期範圍的驗收記錄查詢
3. 提供營業點分組的驗收管理

## 7. 使用說明

### 查詢功能
- 支援依建立日期範圍查詢
- 提供營業點分組檢索
- 支援驗收編號直接查詢
- 支援供應商及採購編號關聯查詢
- 提供驗收狀態分類檢索

### 作業程序
1. 建立新驗收記錄時記錄基本資訊
2. 關聯對應的採購編號及供應商
3. 記錄驗收總金額及處理狀態
4. 維護建立日期、時間及人員資訊
5. 支援驗收流程的狀態更新

### 維護作業
- **新增**：建立新的驗收記錄
- **查詢**：支援多重條件檢索
- **更新**：更新驗收狀態及金額
- **刪除**：依業務規則處理
- **關聯**：維護與採購系統的關聯

### 注意事項
- 檔案具有UNIQUE約束，確保記錄唯一性
- 驗收編號需與營業點及日期組合成唯一鍵
- 採購編號用於關聯採購系統
- 狀態欄位控制驗收流程

## 8. 備註

- 此檔案為前台驗收系統的核心檔案
- 支援完整的驗收流程管理
- 三重複合主鍵確保資料唯一性
- 提供與採購系統的完整關聯
- 支援多種邏輯檔的不同檢索需求
- 金額欄位支援小數點後兩位精度 