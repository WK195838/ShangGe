# SOSCLF5 檔案規格書

## 1. 基本資料
- 檔名: SOSCLF5
- 類型: LF (Logical File)
- 說明: 訂單資料檔 join
- 主鍵: 無（JOIN檔案）
- 建立日期: (待補)
- 最後修改日期: (待補)
- 參考實體檔: SOSCPF、SOSDPF、MTMAPF
- 索引約束: JOIN檔案（動態選擇）

## 2. 檔案功能說明
此邏輯檔案為三檔案聯結的訂單資料檔進階版，提供以下功能：
- 提供訂單主檔、明細檔與產品主檔的完整聯結檢視
- 支援跨檔案的整合查詢，包含更多產品資訊
- 記錄完整的訂單與產品詳細關聯資料
- 支援訂單明細的全面分析
- 提供動態選擇的彈性檢視
- 支援多檔案關聯的進階資料處理
- 記錄訂單產品的完整詳細資訊
- 支援業務分析的綜合深度查詢
- 提供客戶訂單的全面詳細檢視
- 記錄系統的完整整合資料檔案

## 3. 系統檔案清單
- 主要邏輯檔: SOSCLF5 (訂單資料JOIN檔進階版)
- 基礎實體檔1: SOSCPF (銷售訂單主檔)
- 基礎實體檔2: SOSDPF (銷售訂單明細檔)
- 基礎實體檔3: MTMAPF (產品主檔)
- 特殊功能: DYNSLT (動態選擇)

## 4. 紀錄格式
邏輯檔案記錄格式SC0，透過雙重JOIN關聯三個檔案，提供完整的訂單與產品詳細整合檢視。

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明
| 欄位代號 | 名稱 | 位置 | 長度 | 屬性 | 檢核說明 |
|----------|------|------|------|------|----------|
| SC01 | 程式記號 | 1 | REF | 參考欄位 | 來自SOSCPF，程式記號 |
| SC01A | 程式記號第一碼 | 待計算 | 1 | 衍生欄位 | 程式記號第一碼（篩選條件） |
| SC02 | 程式編號出站 | 待計算 | REF | 參考欄位 | 來自SOSCPF，JOIN關聯鍵 |
| SC03 | 狀態 | 待計算 | REF | 參考欄位 | 來自SOSCPF，狀態記號 |
| SC04 | 客戶代號 | 待計算 | REF | 參考欄位 | 來自SOSCPF，客戶代號 |
| SC35 | 應收記號 | 待計算 | REF | 參考欄位 | 來自SOSCPF，應收記號（篩選條件） |
| SC39 | 確認者 | 待計算 | REF | 參考欄位 | 來自SOSCPF，確認者 |
| SD02 | 程式編號出站 | 待計算 | REF | 參考欄位 | 來自SOSDPF，JOIN關聯鍵 |
| SD03 | 產品編號 | 待計算 | REF | 參考欄位 | 來自SOSDPF，JOIN關聯鍵 |
| SD04 | 數量 | 待計算 | REF | 參考欄位 | 來自SOSDPF，數量 |
| SD05 | 單價 | 待計算 | REF | 參考欄位 | 來自SOSDPF，單價 |
| MA01 | 產品編號 | 待計算 | REF | 參考欄位 | 來自MTMAPF，JOIN關聯鍵 |
| MA07 | 產品名稱 | 待計算 | REF | 參考欄位 | 來自MTMAPF，產品名稱 |
| MA08 | 產品分類 | 待計算 | REF | 參考欄位 | 來自MTMAPF，產品分類 |
| MA09 | 產品子分類 | 待計算 | REF | 參考欄位 | 來自MTMAPF，產品子分類 |
| MA10 | 產品群組 | 待計算 | REF | 參考欄位 | 來自MTMAPF，產品群組 |
| MA11 | 規格 | 待計算 | REF | 參考欄位 | 來自MTMAPF，規格 |
| MA15 | 單位 | 待計算 | REF | 參考欄位 | 來自MTMAPF，單位 |
| MA54 | 成本 | 待計算 | REF | 參考欄位 | 來自MTMAPF，成本 |

## 6. 主鍵欄位
- 主鍵: 無（JOIN檔案使用關聯鍵）
- JOIN關聯:
  - SOSCPF ↔ SOSDPF: SC02 = SD02
  - SOSDPF ↔ MTMAPF: SD03 = MA01
- 約束類型: 雙重JOIN關聯

## 7. 索引資料
- 主要索引: 無（動態選擇檔案）
- 索引類型: JOIN檔案索引
- JOIN結構:
  - 第一層JOIN: SOSCPF與SOSDPF透過SC02=SD02關聯
  - 第二層JOIN: SOSDPF與MTMAPF透過SD03=MA01關聯
- 過濾條件:
  - SELECT: SC35 ≠ 'T' (排除應收記號T)
  - SELECT: SC01A ≠ 'K' (排除程式記號第一碼K)
- 動態選擇: DYNSLT啟用

## 8. 備註
- 此邏輯檔案為SOSCLF4的進階版本
- 記錄SC0為邏輯檔案記錄格式名稱
- 檔案註解中顯示為訂單資料檔(REWF88)
- 使用DYNSLT提供動態選擇功能
- 雙重JOIN結構：訂單主檔→明細檔→產品主檔
- 使用衍生欄位SC01A = SST(SC01 1 1)提取程式記號第一碼
- 比SOSCLF4增加更多產品主檔欄位：MA08、MA09、MA10
- 提供更完整的產品分類資訊（分類、子分類、群組）
- JOIN關聯鍵：SC02=SD02, SD03=MA01
- 提供完整的訂單、明細、產品詳細整合檢視
- 支援跨檔案的深度複合查詢
- 用於業務分析的完整資料來源
- 支援訂單明細的全面分析
- 記錄客戶訂單的詳細資訊
- 提供產品銷售的深度關聯分析
- 支援營運決策的完整資料整合
- 用於進階報表分析的基礎檔案
- 提供客戶服務的詳細檢視
- 支援庫存管理的完整關聯查詢
- 記錄銷售流程的詳細軌跡
- 用於績效分析的完整整合平台
- 提供財務分析的詳細基礎資料
- 支援策略決策的完整資料支援
- 記錄業務營運的詳細資訊
- 用於系統整合的標準完整檔案 