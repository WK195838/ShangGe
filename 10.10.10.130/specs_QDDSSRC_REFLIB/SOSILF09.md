# SOSILF09 檔案規格書

## 1. 基本資料
- **檔案名稱**: SOSILF09
- **檔案類型**: LF (邏輯檔案)
- **基底檔案**: SOSIPF (發票主檔)
- **檔案說明**: 發票主檔邏輯檔案 - 銷貨收入明細表專用
- **建立日期**: (依系統記錄)
- **最後異動日期**: (依系統記錄)

## 2. 檔案功能說明
此邏輯檔案專為銷貨收入明細表設計，提供確認日期、部門、客戶類型的複合排序，包含計算欄位SI101 (部門代號)，支援銷貨收入分析需求。

### 主要功能
- 銷貨收入明細表資料查詢
- 確認日期時序管理
- 部門別收入分析
- 客戶類型分類統計

## 3. 系統檔案清單
| 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|------|
| SOSIPF | PF | 發票主檔 (基底檔案) |
| SOSILF09 | LF | 發票主檔邏輯檔案 |

## 4. 紀錄格式

### 4.1 邏輯檔案設定
```
PFILE(SOSIPF)      // 基底實體檔案
```

### 4.2 關鍵欄位 (Key Fields)
| 順序 | 欄位代號 | 欄位名稱 | 型態 | 長度 | 排序 | 說明 |
|------|----------|----------|------|------|------|------|
| 1 | SI35 | 確認日期 | N | 8,0 | ASC | 主要排序鍵 |
| 2 | SI101 | 部門代號 | A | 2 | ASC | 次要排序鍵 (計算欄位) |
| 3 | SI10 | 客戶類型 | A | 5 | ASC | 第三排序鍵 |

### 4.3 計算欄位
| 欄位代號 | 計算公式 | 說明 |
|----------|----------|------|
| SI101 | SST(SI10 3 2) | 從客戶類型第3位開始取2位作為部門代號 |

### 4.4 選擇條件 (SELECT/OMIT)
無特殊選擇條件設定

### 4.5 主要欄位說明
| 欄位代號 | 欄位名稱 | 型態 | 長度 | 說明 |
|----------|----------|------|------|------|
| SI01 | 客戶編號 | A | 10 | 客戶識別碼 |
| SI02 | 發票號碼 | A | 10 | 發票識別號碼 |
| SI03 | 數量 | N | 9,2 | 銷貨數量 |
| SI04 | 單價 | N | 9,2 | 單價 |
| SI21 | 發票日期 | N | 8,0 | 發票開立日期 |
| SI25 | 發票金額 | N | 11,2 | 發票總金額 |

## 5. 主鍵欄位
- **主要鍵值**: SI35 + SI101 + SI10
- **排序方式**: 確認日期、部門代號、客戶類型升序
- **索引類型**: 複合索引，三層排序

## 6. 索引資料
- **排序方式**: SI35 + SI101 + SI10
- **索引類型**: 復合索引，支援銷貨收入分析
- **特殊屬性**: 包含計算欄位，專為報表設計

## 7. 使用說明

### 7.1 檔案用途
- 銷貨收入明細表產生
- 確認日期銷貨分析
- 部門別收入統計
- 客戶類型銷貨趨勢

### 7.2 程式存取方式
```rpg
// 依確認日期查詢銷貨收入
SETLL (確認日期) SOSILF09;
READ SOSILF09;
// 依確認日期和部門查詢
CHAIN (確認日期:部門代號) SOSILF09;
```

### 7.3 計算欄位應用
- **SI101**: 部門代號自動計算，用於部門分類
- **應用場景**: 銷貨收入按部門統計

## 8. 備註
- 此邏輯檔案專為銷貨收入明細表設計
- 包含計算欄位SI101，提供部門分類功能
- 適用於銷貨收入分析與報表產生
- 支援確認日期時序的收入統計 