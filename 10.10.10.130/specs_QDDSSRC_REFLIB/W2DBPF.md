# W2DBPF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | W2DBPF |
| 檔案類型 | 實體檔 (PF) |
| 檔案描述 | 試飲訂單確認報表 |
| 作業系統 | AS/400 |
| 資料庫 | DB2/400 |

## 2. 檔案功能說明

此檔案為試飲訂單確認報表的資料檔，負責儲存試飲訂單的確認及統計資料。主要功能：
- 記錄試飲訂單的確認資料
- 管理營業點及試飲訂單的統計資訊
- 提供產品試飲的確認記錄
- 支援試飲數量及單價的統計
- 提供試飲活動的報表資料來源

## 3. 系統檔案清單

| 項目 | 檔案名稱 | 類型 | 說明 |
|------|----------|------|------|
| 主檔 | W2DBPF | PF | 試飲訂單確認報表 |
| 關聯檔 | W2DAPF | PF | 一般銷售訂單確認報表 |

## 4. 紀錄格式

### 記錄格式：DB0

| 欄位代號 | 欄位名稱 | 型態 | 長度 | 小數 | 說明 |
|----------|----------|------|------|------|------|
| DB01 | 訂貨日期 | S | 8 | 0 | 訂貨日期 |
| DB02 | 訂單編號 | A | 12 | 0 | 訂單編號 |
| DB03 | 營業點 | A | 5 | 0 | 營業點代號 |
| DB04 | 營業點名稱 | O | 22 | 0 | 營業點名稱 |
| DB05 | 產品代號 | A | 9 | 0 | 產品代號 |
| DB06 | 產品名稱 | O | 18 | 0 | 產品名稱 |
| DB07 | 試飲數量 | S | 8 | 0 | 試飲數量 |
| DB08 | 單價 | S | 11 | 2 | 試飲單價 |
| DB09 | 試飲代號 | A | 2 | 0 | 試飲代號 |
| DB10 | 試飲說明 | O | 12 | 0 | 試飲說明 |

## 5. 主鍵欄位

| 順序 | 欄位代號 | 欄位名稱 | 排序方式 |
|------|----------|----------|----------|
| 1 | DB03 | 營業點 | 遞增 |
| 2 | DB01 | 訂貨日期 | 遞增 |
| 3 | DB02 | 訂單編號 | 遞增 |

## 6. 索引資料

### 索引鍵值
- **主索引**：DB03 + DB01 + DB02
- **排序方式**：營業點遞增，訂貨日期遞增，訂單編號遞增

### 存取路徑
此檔案提供以下存取路徑：
1. 依營業點分組檢索試飲訂單資料
2. 依訂貨日期範圍查詢
3. 依訂單編號直接檢索
4. 支援營業點的試飲統計分析

## 7. 使用說明

### 查詢功能
- 支援依營業點查詢試飲訂單確認資料
- 提供訂貨日期範圍檢索
- 支援訂單編號直接查詢
- 支援產品代號的試飲統計
- 支援試飲代號分類分析
- 提供試飲數量及單價統計

### 作業程序
1. 記錄試飲訂單的基本資訊
2. 統計試飲數量及單價
3. 記錄試飲代號及說明
4. 提供試飲確認報表的資料來源
5. 支援營業點的試飲活動分析

### 維護作業
- **新增**：建立新的試飲訂單確認記錄
- **查詢**：支援多重條件檢索
- **更新**：更新試飲數量及單價
- **統計**：產生各種試飲統計報表
- **分析**：提供試飲活動分析

### 注意事項
- 試飲單價支援小數點後兩位精度
- 試飲說明欄位提供活動描述功能
- 支援試飲代號的分類管理
- 營業點優先的排序邏輯

## 8. 備註

- 此檔案為試飲訂單確認的報表檔案
- 三重複合主鍵確保試飲訂單記錄唯一性
- 支援完整的試飲訂單管理
- 提供試飲活動的統計分析功能
- 營業點及產品名稱採用開放長度格式
- 支援試飲代號及說明的詳細記錄 