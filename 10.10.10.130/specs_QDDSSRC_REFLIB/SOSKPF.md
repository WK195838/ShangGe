# SOSKPF 檔案規格書

## 1. 基本資料
- **檔案名稱**: SOSKPF
- **檔案類型**: PF (實體檔案)
- **檔案說明**: 銷貨目標達成率資料檔
- **建立日期**: (依系統記錄)
- **最後異動日期**: (依系統記錄)

## 2. 檔案功能說明
此實體檔案用於儲存銷貨目標達成率相關資料，包含客戶編號、年月、月份、轄區編號、產品編號等基本資訊，以及各月份的銷貨目標數量與金額資料，支援銷貨目標管理與達成率統計分析。

### 主要功能
- 銷貨目標資料管理
- 月別目標數量記錄
- 月別目標金額記錄
- 目標達成率計算基礎

## 3. 系統檔案清單
| 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|------|
| SOSKPF | PF | 銷貨目標達成率資料檔 (主檔案) |
| SOSKLF01 | LF | 銷貨目標達成率資料檔邏輯檔案 |
| SOSKLF02 | LF | 銷貨目標達成率資料檔邏輯檔案 |

## 4. 紀錄格式

### 4.1 檔案設定
```
REF(RERF)          // 參考檔案
UNIQUE             // 唯一性約束
```

### 4.2 欄位定義
| 欄位代號 | 欄位名稱 | 型態 | 長度 | 小數 | 說明 |
|----------|----------|------|------|------|------|
| SK01 | 客戶編號 | A | - | - | 客戶編號 |
| SK02 | 年月 | N | 4 | 0 | 年月 (格式: YYMM) |
| SK03 | 月份 | A | 2 | - | 月份 |
| SK04 | 狀態 | A | - | - | 狀態代碼 |
| SK05 | 轄區編號 | A | 5 | - | 轄區編號 |
| SK06 | 產品編號 | A | 15 | - | 產品編號 |
| SK07 | 單位 | A | 3 | - | 單位代碼 |
| SK08 | 銷貨數量年度 | N | - | - | 銷貨數量年度目標 |
| SK09 | 銷貨金額年度 | N | - | - | 銷貨金額年度目標 |
| SK10 | 銷貨數量四月 | N | - | - | 四月銷貨數量目標 |
| SK11 | 銷貨數量五月 | N | - | - | 五月銷貨數量目標 |
| SK12 | 銷貨數量六月 | N | - | - | 六月銷貨數量目標 |
| SK13 | 銷貨數量七月 | N | - | - | 七月銷貨數量目標 |
| SK14 | 銷貨數量八月 | N | - | - | 八月銷貨數量目標 |
| SK15 | 銷貨數量九月 | N | - | - | 九月銷貨數量目標 |
| SK16 | 銷貨數量十月 | N | - | - | 十月銷貨數量目標 |
| SK17 | 銷貨數量十一月 | N | - | - | 十一月銷貨數量目標 |
| SK18 | 銷貨數量十二月 | N | - | - | 十二月銷貨數量目標 |
| SK19 | 銷貨數量一月 | N | - | - | 一月銷貨數量目標 |
| SK20 | 銷貨數量二月 | N | - | - | 二月銷貨數量目標 |
| SK21 | 銷貨數量三月 | N | - | - | 三月銷貨數量目標 |
| SK22 | 銷貨金額四月 | N | - | - | 四月銷貨金額目標 |
| SK23 | 銷貨金額五月 | N | - | - | 五月銷貨金額目標 |
| SK24 | 銷貨金額六月 | N | - | - | 六月銷貨金額目標 |
| SK25 | 銷貨金額七月 | N | - | - | 七月銷貨金額目標 |
| SK26 | 銷貨金額八月 | N | - | - | 八月銷貨金額目標 |
| SK27 | 銷貨金額九月 | N | - | - | 九月銷貨金額目標 |
| SK28 | 銷貨金額十月 | N | - | - | 十月銷貨金額目標 |
| SK29 | 銷貨金額十一月 | N | - | - | 十一月銷貨金額目標 |
| SK30 | 銷貨金額十二月 | N | - | - | 十二月銷貨金額目標 |
| SK31 | 銷貨金額一月 | N | - | - | 一月銷貨金額目標 |
| SK32 | 銷貨金額二月 | N | - | - | 二月銷貨金額目標 |
| SK33 | 銷貨金額三月 | N | - | - | 三月銷貨金額目標 |
| SK34 | 產品類型 | A | 3 | - | 產品類型 (參考MA11) |
| SKXX | 異動日期 | N | 8 | 0 | 異動日期 |
| SKYY | 異動時間 | A | - | - | 異動時間 |
| SKZZ | 異動者 | A | - | - | 異動者代號 |

### 4.3 月別目標設計
#### 數量目標欄位群組 (SK10-SK21)
- 涵蓋全年12個月的銷貨數量目標
- 按年度月份順序排列 (4月起始)

#### 金額目標欄位群組 (SK22-SK33)
- 涵蓋全年12個月的銷貨金額目標
- 對應數量目標的金額版本

## 5. 主鍵欄位
- **主要鍵值**: SK01 + SK02 + SK07 + SK03 + SK04 + SK05 + SK34 + SK06
- **排序方式**: 客戶編號、年月、單位、月份、狀態、轄區編號、產品類型、產品編號升序
- **索引類型**: 復合索引，八層完整分類
- **唯一性**: UNIQUE約束，確保組合鍵唯一

## 6. 索引資料
- **排序方式**: SK01 + SK02 + SK07 + SK03 + SK04 + SK05 + SK34 + SK06
- **索引類型**: 復合索引，支援多維度目標查詢
- **特殊屬性**: REF(RERF)參考、UNIQUE約束

## 7. 使用說明

### 7.1 檔案用途
- 銷貨目標資料儲存
- 月別目標數量管理
- 月別目標金額管理
- 目標達成率計算基礎

### 7.2 程式存取方式
```rpg
// 讀取特定客戶年月目標資料
CHAIN (客戶編號:年月:單位:月份:狀態:轄區:產品類型:產品編號) SOSKPF;
// 更新目標資料
UPDATE SK0;
// 新增目標資料
WRITE SK0;
```

### 7.3 目標管理特色
- **完整月別**: 涵蓋全年12個月目標設定
- **雙重目標**: 數量與金額雙重目標管理
- **多維分類**: 客戶-轄區-產品多維度分類
- **時序管理**: 年月雙重時間維度

### 7.4 業務應用場景
- **目標設定**: 年度與月別銷貨目標設定
- **達成追蹤**: 實際銷貨與目標達成追蹤
- **績效評估**: 轄區與產品績效評估
- **預算規劃**: 銷貨預算規劃與管理

### 7.5 資料完整性
- **UNIQUE約束**: 確保每個組合鍵唯一性
- **REF(RERF)**: 參考檔案確保資料一致性
- **異動記錄**: SKXX/SKYY/SKZZ完整異動追蹤

### 7.6 報表統計支援
- **月別統計**: 各月目標數量與金額統計
- **轄區比較**: 不同轄區目標設定比較
- **產品分析**: 產品類型目標分析
- **達成率計算**: 目標達成率計算基礎

## 8. 備註
- 此實體檔案為銷貨目標管理的核心檔案
- 提供完整的月別目標數量與金額管理
- 支援多維度的目標分類與統計分析
- 透過UNIQUE約束與REF參考確保資料完整性與一致性 