# PA#HLF02 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | PA#HLF02 |
| 檔案描述 | 規則代碼檔 |
| 檔案類型 | LF (Logical File) |
| 記錄格式 | #H0 |
| 主鍵 | #H01 (代碼) |
| 實體檔案 | PA#HPF |
| 檔案屬性 | 邏輯檢視，特殊排序數字規則代碼 |

## 2. 檔案功能說明

PA#HLF02 為 PA#HPF 規則代碼檔的特殊排序專用邏輯檔案，提供：
- 特殊排序規則代碼檢視
- 優先順序管理
- 分組別管理
- 特殊用途控制

## 3. 系統檔案清單

| 檔案代號 | 檔案名稱 | 說明 |
|----------|----------|------|
| PA#HLF02 | 規則代碼邏輯檔2 | 主檔 |
| PA#HPF | 規則代碼數字實體檔 | 實體檔案 |
| PA#HLF | 規則代碼邏輯檔 | 基本邏輯檔 |
| RERF | 參考檔案 | 欄位定義參考 |

## 4. 紀錄格式

### 記錄格式：#H0 (繼承自 PA#HPF，特殊排序)

## 5. 欄位規格

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| #H01 | 規則代碼 | 1-10 | 10 | A | R | 主鍵，規則識別碼 |
| #H02 | 代碼類型 | 11-20 | 10 | A | R | 規則代碼類型 |
| #H03 | 規則名稱 | 21-60 | 40 | A | R | 規則中文名稱 |
| #H04 | 英文名稱 | 61-100 | 40 | A | R | 規則英文名稱 |
| #H05 | 規則說明 | 101-200 | 100 | A | R | 規則詳細說明 |
| #H06 | 使用狀態 | 201 | 1 | A | R | 'A'-有效，'I'-停用 |
| #H07 | 數值1 | 202-216 | 15 | N | R | 主要數值 (5位小數) |
| #H08 | 數值2 | 217-231 | 15 | N | R | 次要數值 (5位小數) |
| #H09 | 數值3 | 232-246 | 15 | N | R | 第三數值 (5位小數) |
| #H10 | 最小值 | 247-261 | 15 | N | R | 允許最小值 |
| #H11 | 最大值 | 262-276 | 15 | N | R | 允許最大值 |
| #H12 | 預設值 | 277-291 | 15 | N | R | 預設數值 |
| #H13 | 計算公式 | 292-341 | 50 | A | R | 計算公式說明 |
| #H14 | 單位 | 342-346 | 5 | A | R | 數值單位 |
| #H15 | 精確度 | 347 | 1 | N | R | 小數位數 |
| #H16 | 群組代號 | 348-352 | 5 | A | R | 規則群組 |
| #H17 | 排序序號 | 353-355 | 3 | N | R | 顯示排序 |
| #H18 | 有效日期 | 356-363 | 8 | N | R | 規則生效日期 |
| #H19 | 失效日期 | 364-371 | 8 | N | R | 規則失效日期 |
| #H20 | 優先級別 | 372 | 1 | N | R | 特殊優先級別 |
| #H21 | 特殊用途 | 373-377 | 5 | A | R | 特殊用途代號 |
| #HXX | 建立日期 | 378-385 | 8 | N | R | 格式：YYYYMMDD |
| #HYY | 建立時間 | 386-391 | 6 | N | R | 格式：HHMMSS |
| #HZZ | 建立者 | 392-401 | 10 | A | R | 操作人員 |

## 6. 主鍵欄位

| 鍵值序號 | 欄位代號 | 欄位名稱 | 排序 |
|----------|----------|----------|------|
| 1 | #H01 | 規則代碼 | 升序 |

## 7. 索引資料

### 主要索引
- **索引名稱**：特殊排序索引
- **索引欄位**：#H01
- **索引類型**：PRIMARY
- **說明**：規則代碼升序排序

### 輔助索引
1. **優先級別索引**：#H20 + #H17 + #H01 (優先級別 + 排序 + 代碼)
2. **特殊用途索引**：#H21 + #H20 + #H01
3. **群組優先索引**：#H16 + #H20 + #H17 + #H01
4. **數值範圍索引**：#H07 + #H20 + #H01
5. **狀態優先索引**：#H06 + #H20 + #H01
6. **有效期優先索引**：#H18 + #H20 + #H01
7. **類型優先索引**：#H02 + #H20 + #H01

### 邏輯檢視特性
- **基底檔案**：PA#HPF
- **檢視類型**：特殊排序檢視
- **排序方式**：優先級別 + 排序序號 + 規則代碼
- **分組顯示**：依優先級別和特殊用途分組

## 8. 備註

### 設計考量
1. 此檔案為 PA#HPF 的特殊排序邏輯檢視檔案
2. 提供以優先級別為主的特殊排序功能
3. 支援特殊用途的規則代碼管理

### 特殊功能
- **優先排序**：按優先級別進行特殊排序
- **用途分類**：按特殊用途分類管理
- **級別控制**：多層級優先順序控制
- **特殊檢視**：特殊業務需求檢視

### 優先級別說明
- **1級**：最高優先級，系統核心參數
- **2級**：高優先級，重要業務參數
- **3級**：中優先級，一般業務參數
- **4級**：低優先級，輔助參數
- **5級**：最低優先級，測試參數

### 特殊用途代碼
- **SYS01**：系統啟動參數
- **CALC1**：計算核心參數
- **LIMIT**：限制類參數
- **RATE1**：重要比率參數
- **EMERG**：緊急處理參數

### 排序邏輯
1. **第一排序**：優先級別 (#H20) 升序
2. **第二排序**：排序序號 (#H17) 升序
3. **第三排序**：規則代碼 (#H01) 升序

### 參考關聯
- **實體檔案**：PA#HPF (規則代碼數字檔)
- **基本邏輯檔**：PA#HLF (基本檢視)
- **群組檔案**：PA#群組檔 (#H16 = 群組代號)
- **用途檔案**：PA#用途檔 (#H21 = 用途代號)

### 業務規則
1. 顯示順序：優先級別 + 排序序號 + 規則代碼
2. 優先級別需在 1-5 範圍內
3. 特殊用途需有明確定義
4. 高優先級規則需特別審核

### 資料完整性
1. 資料內容完全依賴 PA#HPF 實體檔案
2. #H20 優先級別需在 1-5 範圍內
3. #H21 特殊用途需對應有效代碼
4. 高優先級規則的數值範圍需更嚴格

### 使用注意事項
1. 此為邏輯檔案，不可直接寫入資料
2. 所有異動需透過 PA#HPF 實體檔案進行
3. 優先級別異動需經系統管理員核准
4. 適用於需要特殊排序的規則代碼管理 