# MTMELF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | MTMELF |
| 檔案描述 | 客戶分店資料檔 (邏輯檔) |
| 檔案類型 | LF (Logical File) |
| 記錄格式 | ME0 |
| 主鍵 | ME01 + ME02 (客戶代號 + 分店代號) |
| 實體檔案 | MTMEPF |
| 檔案屬性 | 邏輯檢視 |

## 2. 檔案功能說明

MTMELF 為 MTMEPF 客戶分店資料檔的邏輯檔案，提供：
- 客戶分店資料的標準檢視
- 分店與客戶對應關係查詢
- 地區業務管理檢視
- 分店配送管理介面

## 3. 系統檔案清單

| 檔案代號 | 檔案名稱 | 說明 |
|----------|----------|------|
| MTMELF | 客戶分店資料邏輯檔 | 主檔 |
| MTMEPF | 客戶分店資料實體檔 | 實體檔案 |
| MTMDPF | 客戶基本資料檔 | 關聯檔案 |
| RERF | 參考檔案 | 欄位定義參考 |

## 4. 紀錄格式

### 記錄格式：ME0 (繼承自 MTMEPF)

## 5. 欄位規格

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| ME01 | 客戶代號 | 1-7 | 7 | A | R | 主鍵，客戶識別碼 |
| ME02 | 分店代號 | 8-12 | 5 | A | R | 主鍵，分店識別碼 |
| ME03 | 分店名稱 | 13-30 | 18 | A | R | 分店中文名稱 |
| ME04 | 英文名稱 | 31-48 | 18 | A | R | 分店英文名稱 |
| ME05 | 分店地址 | 49-88 | 40 | A | R | 分店地址 |
| ME06 | 電話號碼 | 89-103 | 15 | A | R | 分店電話 |
| ME07 | 負責人 | 104-113 | 10 | A | R | 分店負責人 |
| ME08 | 業務員 | 114-118 | 5 | A | R | 負責業務員代號 |
| ME09 | 地區代號 | 119-123 | 5 | A | R | 所屬地區 |
| ME10 | 區域代號 | 124-128 | 5 | A | R | 所屬區域 |
| ME11 | 分店狀態 | 129 | 1 | A | R | 'A'-有效，'I'-停用 |
| ME12 | 配送方式 | 130-134 | 5 | A | R | 配送方式代號 |
| 其他欄位 | 繼承MTMEPF | | | | | 參考MTMEPF規格 |

## 6. 主鍵欄位

| 鍵值序號 | 欄位代號 | 欄位名稱 | 排序 |
|----------|----------|----------|------|
| 1 | ME01 | 客戶代號 | 升序 |
| 2 | ME02 | 分店代號 | 升序 |

## 7. 索引資料

### 主要索引
- **索引名稱**：複合主鍵索引
- **索引欄位**：ME01 + ME02
- **索引類型**：PRIMARY
- **說明**：客戶代號與分店代號升序排序

### 輔助索引
1. **客戶索引**：ME01 (客戶代號)
2. **業務員索引**：ME08 (業務員代號)
3. **地區索引**：ME09 (地區代號)
4. **區域索引**：ME10 (區域代號)
5. **狀態索引**：ME11 (分店狀態)

### 邏輯檢視特性
- **基底檔案**：MTMEPF
- **檢視類型**：完整記錄檢視
- **排序方式**：ME01 + ME02 升序

## 8. 備註

### 設計考量
1. 此檔案為 MTMEPF 的邏輯檢視檔案
2. 支援一客戶多分店的業務模式
3. 提供地區化業務管理功能

### 業務模式
- **一對多關係**：一個客戶可有多個分店
- **地區管理**：分店按地區區域劃分
- **業務分工**：每個分店指派專責業務員
- **配送管理**：分店獨立配送設定

### 參考關聯
- **實體檔案**：MTMEPF (客戶分店資料)
- **客戶檔案**：MTMDPF (ME01 = MD01)
- **業務員檔案**：MTMCPF (ME08 = MC01)
- **地區檔案**：PA#DPF (ME09 = #D01)
- **區域檔案**：PA#EPF (ME10 = #E01)

### 資料完整性
1. 資料內容完全依賴 MTMEPF 實體檔案
2. ME01 需對應 MTMDPF 中的有效客戶
3. ME08 需對應 MTMCPF 中的有效業務員
4. 地區區域代號需對應有效參數

### 使用注意事項
1. 此為邏輯檔案，不可直接寫入資料
2. 所有異動需透過 MTMEPF 實體檔案進行
3. 分店狀態影響訂單配送流程
4. 業務員異動需考慮客戶服務連續性 