# IMICPF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | IMICPF |
| 檔案類型 | 實體檔案 (Physical File) |
| 檔案用途 | 良壞品轉換主檔 |
| 紀錄格式 | IC0 |
| 參考檔案 | RERF |
| 主鍵欄位 | IC02 |
| 檔案屬性 | UNIQUE |
| 特殊用途 | 良壞品轉換主檔，支援多種邏輯檔案存取 |

## 2. 檔案功能說明

IMICPF是良壞品轉換主檔的實體檔案，為系統中所有良壞品轉換邏輯檔案的基礎：

1. **主要功能**：儲存良壞品轉換的完整資料
2. **檔案特性**：具有UNIQUE屬性，確保記錄唯一性
3. **系統用途**：作為所有IMICLF系列邏輯檔案的基礎實體檔案
4. **參考檔案**：使用REF(RERF)定義欄位屬性
5. **資料內容**：包含轉換單號、客戶代號、產品代號、轉換類型、轉換日期等完整資訊
6. **支援功能**：為良壞品轉換作業提供完整的資料基礎

## 3. 系統檔案清單

| 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|------|
| IMICPF | 實體檔案 | 良壞品轉換主檔實體檔案（本檔案） |
| IMICLF01 | 邏輯檔案 | 良壞品轉換主檔邏輯檔案（IC01+IC05排序） |
| IMICLF02 | 邏輯檔案 | 良壞品轉換主檔邏輯檔案（IC05+IC01排序） |
| IMICLF1 | 邏輯檔案 | 良壞品轉換主檔邏輯檔案（IC05降序+IC02排序） |
| IMIDPF | 實體檔案 | 良壞品轉換明細檔實體檔案 |
| RERF | 參考檔案 | 欄位定義參考檔案 |

## 4. 紀錄格式

| 格式名稱 | 說明 |
|----------|------|
| IC0 | 良壞品轉換主記錄格式 |

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明

本實體檔案使用REF(RERF)參考檔案定義欄位屬性：

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 說明 |
|----------|----------|------|------|------|------|------|
| IC01 | 轉換單號 | 1 | - | - | - | 良壞品轉換單號 |
| IC02 | 客戶代號 | 2 | - | - | 主鍵 | 客戶代號 |
| IC03 | 產品代號 | 3 | - | - | - | 產品代號 |
| IC04 | 轉換類型 | 4 | - | - | - | 轉換類型（1-良品轉壞品，2-壞品轉良品） |
| IC05 | 轉換日期 | 5 | 8 | 數值 | - | 轉換日期（YYYYMMDD） |
| IC06 | 轉換標記 | 6 | - | - | - | 轉換標記 |
| ICXX | 異動日期 | 7 | 8 | 數值 | - | 異動日期（YYYYMMDD） |
| ICYY | 異動時間 | 8 | - | - | - | 異動時間 |
| ICZZ | 異動人員 | 9 | - | - | - | 異動人員代碼 |

*註：詳細欄位長度和型態定義請參考參考檔案RERF*

## 6. 主鍵欄位

本實體檔案的主鍵欄位為：
- IC02（客戶代號）

### 主鍵特性：
- **IC02（客戶代號）**：唯一主鍵，客戶代號
- **UNIQUE屬性**：確保每個客戶代號只能有一筆記錄
- **簡潔設計**：單一欄位主鍵，便於快速查詢

## 7. 索引資料

| 索引名稱 | 索引鍵 | 排序 | 用途說明 |
|----------|--------|------|----------|
| 主索引 | IC02 | 升序 | 客戶代號主要存取路徑 |

### 索引特性：
- **單一索引**：客戶代號的單一主鍵
- **UNIQUE屬性**：確保記錄唯一性
- **高效查詢**：提供快速的客戶查詢

## 8. 備註

1. **實體檔案特性**：
   - 具有UNIQUE屬性，確保記錄唯一性
   - 使用REF(RERF)參考檔案定義欄位屬性
   - 作為所有IMICLF系列邏輯檔案的基礎
2. **良壞品轉換功能**：
   - 記錄良品轉壞品的轉換作業
   - 記錄壞品轉良品的轉換作業
   - 支援轉換類型的管理功能
3. **資料結構設計**：
   - 單一主鍵設計確保客戶唯一性
   - 包含9個欄位，涵蓋完整的轉換資訊
   - 支援轉換作業的完整記錄
4. **轉換類型管理**：
   - IC04欄位記錄轉換類型
   - 1：良品轉壞品
   - 2：壞品轉良品
   - 支援雙向轉換作業
5. **客戶導向設計**：
   - 以客戶代號為主鍵
   - 每個客戶一筆轉換記錄
   - 適合客戶別轉換管理
6. **異動追蹤功能**：
   - ICXX：異動日期記錄
   - ICYY：異動時間記錄
   - ICZZ：異動人員代碼
7. **邏輯檔案支援**：
   - IMICLF01：轉換單號+轉換日期排序存取
   - IMICLF02：轉換日期+轉換單號排序存取
   - IMICLF1：轉換日期降序+客戶代號排序存取
8. **資料完整性**：
   - UNIQUE屬性確保記錄不重複
   - 單一主鍵提供完整的客戶識別
   - 參考檔案確保欄位定義一致性
9. **業務應用**：
   - 良壞品轉換作業管理
   - 客戶轉換記錄追蹤
   - 轉換類型統計分析
   - 品質管理支援
10. **系統整合**：
    - 與庫存管理系統（IMI系列）整合
    - 支援IMIDPF明細檔案
    - 提供完整的轉換資料基礎
11. **檔案維護**：
    - 作為實體檔案，需要定期維護
    - 資料變更會影響所有相關邏輯檔案
    - 需要考慮備份和復原策略
12. **效能考量**：
    - 單一主鍵提供高效的資料存取
    - UNIQUE索引確保查詢效能
    - 支援多種邏輯檔案的不同存取模式
13. **品質管理功能**：
    - 支援良壞品狀態的管理
    - 提供轉換作業的追蹤
    - 支援品質改善的分析
14. **轉換作業支援**：
    - 轉換單號記錄（IC01）
    - 轉換日期記錄（IC05）
    - 轉換標記功能（IC06）
    - 完整的轉換流程支援
15. **客戶管理整合**：
    - 以客戶為中心的轉換管理
    - 支援客戶轉換歷史查詢
    - 提供客戶轉換統計分析
16. **產品管理整合**：
    - IC03記錄產品代號
    - 支援產品別轉換分析
    - 提供產品品質追蹤
17. **時間維度管理**：
    - 轉換日期（IC05）：業務日期
    - 異動日期（ICXX）：系統處理日期
    - 異動時間（ICYY）：精確時間戳記
18. **資料保留機制**：
    - 完整的轉換記錄保留
    - 支援歷史資料查詢
    - 確保轉換追蹤的完整性
19. **系統價值**：
    - 作為良壞品轉換系統的核心檔案
    - 提供完整的轉換資料基礎
    - 支援多維度的轉換分析需求
20. **特殊設計**：
    - 客戶代號單一主鍵設計
    - UNIQUE屬性確保客戶唯一性
    - 簡潔而高效的檔案結構
21. **轉換流程支援**：
    - 轉換申請記錄
    - 轉換執行記錄
    - 轉換確認記錄
    - 轉換完成記錄
22. **庫存影響管理**：
    - 與庫存系統緊密整合
    - 支援庫存狀態的變更
    - 提供庫存調整的依據
23. **成本影響管理**：
    - 支援轉換成本的記錄
    - 提供成本調整的基礎
    - 支援成本分析的需求
24. **決策支援**：
    - 提供轉換決策的資料基礎
    - 支援轉換政策的制定
    - 提供轉換效果的評估
25. **合規管理**：
    - 支援轉換作業的合規要求
    - 提供轉換記錄的審計追蹤
    - 確保轉換作業的透明度