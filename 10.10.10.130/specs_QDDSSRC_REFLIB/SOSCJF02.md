# SOSCJF02 檔案規格書

## 1. 基本資料
- 檔名: SOSCJF02
- 類型: LF (Logical File)
- 說明: 訂單資料檔 join for 試飲 A&P
- 主鍵: SC10 (設計上，註解掉)
- 建立日期: (待補)
- 最後修改日期: (待補)
- 參考實體檔: SOSCPF, SOSDPF, MTMAPF
- 索引約束: JOIN邏輯檔案（三檔案連結）
- 使用程式: NPR048

## 2. 檔案功能說明
此JOIN邏輯檔案專為試飲A&P處理設計，提供以下功能：
- 連接SOSCPF、SOSDPF、MTMAPF三個檔案的資料
- 提供試飲訂單的完整資料檢視
- 支援試飲A&P分析處理
- 記錄訂單與產品資料的關聯資訊
- 支援產品分析的資料整合
- 提供試飲管理的JOIN檢視
- 支援NPR048程式的資料需求
- 記錄訂單明細與產品主檔的聯合資訊
- 支援動態選擇的資料查詢
- 提供試飲分析的基礎資料

## 3. 系統檔案清單
- 主要JOIN檔: SOSCJF02 (試飲A&P JOIN檔)
- 基礎實體檔1: SOSCPF (銷售訂單主檔)
- 基礎實體檔2: SOSDPF (銷售訂單明細檔)
- 基礎實體檔3: MTMAPF (產品主檔)
- JOIN條件1: SC02 = SD02 (SOSCPF與SOSDPF連接)
- JOIN條件2: SD03 = MA01 (SOSDPF與MTMAPF連接)

## 4. 紀錄格式
三重JOIN邏輯檔案記錄格式SC0，使用DYNSLT動態選擇，整合SOSCPF、SOSDPF、MTMAPF的欄位資訊。

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明
| 欄位代號 | 名稱 | 位置 | 長度 | 屬性 | 檢核說明 |
|----------|------|------|------|------|----------|
| SC01 | 程式記號 | 1 | REF | 參考欄位 | 程式記號（完整） |
| SC01A | 程式記號首位 | 待計算 | REF | 參考欄位 | SC01首位字符(SST(SC01 1 1)) |
| SC02 | 程式編號出站 | 待計算 | REF | 參考欄位 | 訂單編號（JOIN欄位1） |
| SC03 | 狀態 | 待計算 | REF | 參考欄位 | 狀態記號 |
| SC04 | 客戶代號 | 待計算 | REF | 參考欄位 | 客戶代號 |
| SC10 | 試飲金額註記 | 待計算 | REF | 參考欄位 | 試飲金額註記（設計主鍵，註解掉） |
| SC13 | 程式狀態 | 待計算 | REF | 參考欄位 | 程式狀態 |
| SC35 | 應收記號 | 待計算 | REF | 參考欄位 | 應收記號 |
| SC39 | 確認者 | 待計算 | REF | 參考欄位 | 確認者 |
| SD02 | 訂單編號 | 待計算 | REF | 參考欄位 | 明細訂單編號（JOIN欄位1） |
| SD03 | 產品代號 | 待計算 | REF | 參考欄位 | 產品代號（JOIN欄位2） |
| SD04 | 產品包裝 | 待計算 | REF | 參考欄位 | 產品包裝記號 |
| SD05 | 訂購數量 | 待計算 | REF | 參考欄位 | 訂購數量 |
| SD10 | 單價 | 待計算 | REF | 參考欄位 | 單價 |
| SD11 | 金額 | 待計算 | REF | 參考欄位 | 金額 |
| SD12 | 稅額 | 待計算 | REF | 參考欄位 | 稅額 |
| MA01 | 產品代號 | 待計算 | REF | 參考欄位 | 產品主檔代號（JOIN欄位2） |
| MA07 | 產品名稱 | 待計算 | REF | 參考欄位 | 產品名稱 |
| MA08 | 英文名稱 | 待計算 | REF | 參考欄位 | 產品英文名稱 |
| MA09 | 產品分類 | 待計算 | REF | 參考欄位 | 產品分類 |
| MA10 | 產品子分類 | 待計算 | REF | 參考欄位 | 產品子分類 |
| MA11 | 品牌 | 待計算 | REF | 參考欄位 | 品牌代號 |
| MA15 | 成本 | 待計算 | REF | 參考欄位 | 產品成本 |
| MA54 | 產品屬性 | 待計算 | REF | 參考欄位 | 產品屬性 |

## 6. 主鍵欄位
- 設計主鍵: SC10 (試飲金額註記，註解掉)
- 實際主鍵: 無明確主鍵定義
- 約束類型: 無主鍵約束

## 7. 索引資料
- 主要索引: 無明確索引定義（註解掉）
- 索引類型: JOIN邏輯檔案索引
- JOIN條件1: SC02 = SD02 (SOSCPF.SC02 = SOSDPF.SD02)
- JOIN條件2: SD03 = MA01 (SOSDPF.SD03 = MTMAPF.MA01)
- 選擇條件:
  - SC35 ≠ 'T' (應收記號不等於T)
  - SC01A ≠ 'K' (程式記號首位不等於K)
  - SC03 = 'S4' (狀態等於S4)
  - SC13 = 'V' (程式狀態等於V)

## 8. 備註
- 此JOIN邏輯檔案專用於試飲A&P分析處理
- 記錄SC0為三重JOIN邏輯檔案記錄格式名稱
- 使用DYNSLT動態選擇功能
- JOIN三個檔案：SOSCPF、SOSDPF、MTMAPF
- 專為NPR048程式設計使用
- SC01A為SC01的首位字符提取(SST函數)
- 包含複雜的選擇條件過濾
- 支援試飲訂單的完整資料分析
- 記錄完整的產品與訂單關聯資訊
- 用於試飲管理的三維度檢視
- 支援A&P分析的資料整合
- 記錄試飲流程的完整軌跡
- 提供試飲管理的整合資料檢視
- 支援試飲政策的分析實施
- 用於試飲管理的查詢與分析
- 提供試飲分析的基礎資料
- 支援試飲管理的標準作業
- 記錄試飲流程的完整資訊
- 用於試飲決策的支援作業
- 提供試飲管理的資料平台
- 支援試飲策略的執行與分析
- 記錄試飲流程的標準設定
- 用於試飲管理的統一作業
- 提供試飲維護的標準化作業
- 支援企業級的試飲A&P管理
- 記錄試飲分析流程的完整軌跡 