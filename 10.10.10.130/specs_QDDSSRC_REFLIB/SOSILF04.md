# SOSILF04 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | SOSILF04 |
| 檔案類型 | LF (邏輯檔案) |
| 檔案說明 | 發票主檔 |
| 參考檔案 | SOSIPF |
| 排序鍵值 | SI01+SI12+SI13+SI21+SI02 |
| 記錄長度 | 依據 SOSIPF |
| 記錄格式 | SI0 |

## 2. 檔案功能說明

本檔案為發票主檔的邏輯檔案，透過客戶、地址、日期等複合索引鍵進行排序存取，並包含統一發票相關的選擇條件。

## 3. 系統檔案清單

| 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|------|
| SOSILF04 | LF | 發票主檔邏輯檔 |
| SOSIPF | PF | 發票主檔物理檔 |

## 4. 記錄格式

### 記錄格式：SI0

本邏輯檔案參考 SOSIPF 物理檔案的 SI0 記錄格式。

## 5. 欄位說明

| 欄位代號 | 名稱 | 位置 | 長度 | 屬性 | 檢核說明 |
|----------|------|------|------|------|----------|
| SI01 | 客戶編號 | 1 | - | R | 第一排序鍵 |
| SI12 | 發票地址郵遞區號 | 2 | - | R | 第二排序鍵 |
| SI13 | 發票地址縣市別 | 3 | - | R | 第三排序鍵 |
| SI21 | 發票日期 | 4 | - | R | 第四排序鍵 |
| SI02 | 發票編號 | 5 | - | R | 第五排序鍵 |

*其他欄位詳細定義請參考 SOSIPF 檔案規格書*

## 6. 主鍵欄位

### 排序鍵值
- 主要鍵：SI01（客戶編號）
- 次要鍵：SI12（發票地址郵遞區號）
- 第三鍵：SI13（發票地址縣市別）
- 第四鍵：SI21（發票日期）
- 第五鍵：SI02（發票編號）

## 7. 索引資料

| 索引名稱 | 索引欄位 | 排序方式 | 說明 |
|----------|----------|----------|------|
| 主索引 | SI01+SI12+SI13+SI21+SI02 | 遞增 | 按客戶、地址、日期、發票編號排序 |

## 8. 備註

1. 此檔案為 SOSIPF 的邏輯檔案
2. 包含選擇條件：
   - SI19（統一發票編號）≠ 'V'（篩選條件）
   - SI18（櫃台）= '*' 或 ' '（已統一發票已開立或未確認）
3. 主要用於統一發票相關的查詢和處理
4. 適合按客戶地址進行發票統計和報表 