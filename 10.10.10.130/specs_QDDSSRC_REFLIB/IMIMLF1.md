# IMIMLF1 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案代號 | IMIMLF1 |
| 檔案名稱 | 禮盒組拆主檔 |
| 檔案類型 | LF (邏輯檔案) |
| 資料庫 | REFLIB |
| 記錄格式 | IM0 |
| 基礎實體檔案 | IMIMPF |

## 2. 檔案功能說明

此邏輯檔案基於 IMIMPF（禮盒組拆主檔實體檔案），提供以組拆日期（遞減）加產品代號的組合排序存取路徑。主要用於禮盒組拆作業的最新日期優先查詢，按照組拆日期的遞減順序排列，方便查詢最新的組拆資料。適用於需要按照時間倒序查看禮盒組拆記錄的業務場景。

## 3. 系統檔案清單

| 檔案代號 | 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|----------|------|
| IMIMLF1 | 禮盒組拆主檔 | LF | 邏輯檔案 |
| IMIMPF | 禮盒組拆主檔 | PF | 基礎實體檔案 |

## 4. 紀錄格式

### 記錄格式：IM0
- **基於實體檔案**：IMIMPF
- **存取方式**：直接邏輯存取
- **排序方式**：複合排序（組拆日期遞減 + 產品代號）

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|----------|----------|
| IM01 | 單據編號 | - | - | - | R | 參照 RERF，單據編號 |
| IM02 | 產品代號 | - | - | - | R | 參照 RERF，產品代號，索引欄位2 |
| IM03 | 產品項次代號 | - | - | - | R | 參照 RERF，產品項次代號 |
| IM04 | 組拆類型 | - | - | - | R | 參照 RERF，組拆類型（0:組合, 1:拆解） |
| IM05 | 禮盒項次代號 | - | - | - | R | 參照 RERF，禮盒項次代號 |
| IM06 | 數量 | - | - | - | R | 參照 RERF，數量 |
| IM07 | 待確認標記 | - | - | - | R | 參照 RERF，待確認標記（' ':已確認, '*':待確認） |
| IM08 | 確認日期 | - | - | - | R | 參照 RERF，確認日期 |
| IM09 | 現存標記 | - | - | - | R | 參照 RERF，現存標記（'V':已現存） |
| IM10 | 組拆日期 | - | - | - | R | 參照 RERF，組拆日期，索引欄位1（遞減） |

## 6. 主鍵欄位

| 主鍵順序 | 欄位代號 | 欄位名稱 | 排序 |
|----------|----------|----------|------|
| 1 | IM10 | 組拆日期 | DESC |
| 2 | IM02 | 產品代號 | ASC |

## 7. 索引資料

### 主要索引
- **索引鍵值**：IM10 + IM02 (組拆日期 + 產品代號)
- **索引類型**：複合索引
- **排序方式**：
  - IM10 (組拆日期)：遞減排序 (DESCEND)
  - IM02 (產品代號)：遞增排序
- **用途**：支援按照組拆日期遞減順序的最新優先查詢

## 8. 備註

1. 此檔案為邏輯檔案，基於 IMIMPF 實體檔案
2. 採用複合索引鍵值排序
3. 組拆日期採用遞減排序，便於查詢最新組拆資料
4. 所有欄位定義均繼承自基礎實體檔案 IMIMPF
5. 主要用於禮盒組拆作業的最新日期優先查詢
6. 支援按照時間倒序的組拆資料存取
7. 適用於需要查看最新組拆記錄的業務場景
8. 提供最新組拆日期優先的資料排序功能 