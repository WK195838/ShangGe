# W2BDLF01 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | W2BDLF01 |
| 檔案類型 | 邏輯檔 (LF) |
| 檔案描述 | 後台訂貨明細檔邏輯檔01 |
| 基礎實體檔 | W2BDPF |
| 作業系統 | AS/400 |
| 資料庫 | DB2/400 |

## 2. 檔案功能說明

此檔案為後台訂貨明細檔的邏輯檔，提供三重索引(訂貨編號+批準號碼+商品代號)的完整排序檢索。主要功能：
- 提供訂貨明細的三重索引組合檢索
- 支援完整的明細層級精確查詢
- 確保訂貨明細的有序存取

## 3. 系統檔案清單

| 項目 | 檔案名稱 | 類型 | 說明 |
|------|----------|------|------|
| 主檔 | W2BDLF01 | LF | 後台訂貨明細檔邏輯檔01 |
| 基礎檔 | W2BDPF | PF | 後台訂貨明細檔 |

## 4. 紀錄格式

### 記錄格式：BD0
**基礎實體檔：W2BDPF**

| 欄位代號 | 欄位名稱 | 型態 | 長度 | 小數 | 說明 |
|----------|----------|------|------|------|------|
| BD01 | 訂貨編號 | A | 12 | 0 | 訂貨編號 |
| BD02 | 商品代號 | A | 9 | 0 | 商品識別代號 |
| BD03 | 批準號碼 | A | 5 | 0 | 批準號碼 |
| BD04 | 訂貨數量 | S | 8 | 0 | 訂貨數量 |
| BD05 | 確認數量 | S | 8 | 0 | 確認數量 |
| BD06 | 狀態 | A | 1 | 0 | 處理狀態 |
| BD07 | 建立編號 | A | 12 | 0 | 建立編號 |
| BD08 | 備註 | O | 16 | 0 | 備註說明 |
| BDXX | 建立日期 | S | 8 | 0 | 記錄建立日期 |
| BDYY | 建立時間 | S | 6 | 0 | 記錄建立時間 |
| BDZZ | 建立人員 | A | 10 | 0 | 記錄建立人員 |

## 5. 主鍵欄位

| 順序 | 欄位代號 | 欄位名稱 | 排序方式 |
|------|----------|----------|----------|
| 1 | BD01 | 訂貨編號 | 遞增 |
| 2 | BD03 | 批準號碼 | 遞增 |
| 3 | BD02 | 商品代號 | 遞增 |

## 6. 索引資料

### 索引鍵值
- **主索引**：BD01 + BD03 + BD02
- **排序方式**：遞增排序
- **唯一性**：繼承基礎檔案的UNIQUE約束

### 存取路徑
此邏輯檔提供以下存取路徑：
1. 依訂貨編號存取訂貨記錄群組
2. 依訂貨編號+批準號碼存取批準群組
3. 依完整三重鍵值精確存取單一明細記錄
4. 支援各層級的範圍查詢功能

## 7. 使用說明

### 查詢功能
- 支援三層級的階層式查詢
- 提供精確的明細層級定位
- 支援複合條件範圍查詢

### 作業程序
1. 透過訂貨編號定位訂貨群組
2. 進一步透過批準號碼定位批準群組
3. 最終透過商品代號定位特定明細
4. 系統按三重索引順序返回結果

### 檢索邏輯
- **第一層**：訂貨編號分組
- **第二層**：批準號碼排序
- **第三層**：商品代號排序
- **結果**：完整階層式檢索

### 注意事項
- 此為唯讀邏輯檔，不可直接進行資料維護
- 提供完整的訂貨明細索引結構
- 適用於需要精確定位的訂貨明細查詢

## 8. 備註

- 邏輯檔建立於W2BDPF基礎檔案之上
- 提供三重複合索引的完整檢索能力
- 支援後台訂貨系統的詳細明細查詢
- 排序邏輯：訂貨編號→批準號碼→商品代號
- 適用於訂貨明細的精確定位需求 