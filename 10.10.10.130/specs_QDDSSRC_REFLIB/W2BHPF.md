# W2BHPF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | W2BHPF |
| 檔案類型 | 實體檔 (PF) |
| 檔案描述 | 前台驗收明細檔 |
| 作業系統 | AS/400 |
| 資料庫 | DB2/400 |

## 2. 檔案功能說明

此檔案為前台驗收系統的明細檔，負責記錄驗收作業的詳細產品資訊。主要功能：
- 記錄驗收產品的詳細明細資訊
- 管理產品驗收的數量及單價
- 控制驗收明細的金額計算
- 提供驗收與產品的關聯管理
- 支援驗收明細的完整追蹤

## 3. 系統檔案清單

| 項目 | 檔案名稱 | 類型 | 說明 |
|------|----------|------|------|
| 主檔 | W2BHPF | PF | 前台驗收明細檔 |
| 關聯主檔 | W2BGPF | PF | 前台驗收主檔 |

## 4. 紀錄格式

### 記錄格式：BH0
**唯一性約束：UNIQUE**

| 欄位代號 | 欄位名稱 | 型態 | 長度 | 小數 | 說明 |
|----------|----------|------|------|------|------|
| BH01 | 驗收編號 | A | 12 | 0 | 驗收編號 |
| BH02 | 產品代號 | A | 9 | 0 | 產品代號 |
| BH03 | 數量 | S | 8 | 0 | 驗收數量 |
| BH04 | 驗收單價 | S | 9 | 2 | 驗收單價 |
| BH05 | 金額 | S | 11 | 2 | 驗收金額 |
| BH06 | 驗收日期 | S | 8 | 0 | 驗收日期 |
| BHXX | 建立日期 | S | 8 | 0 | 記錄建立日期 |
| BHYY | 建立時間 | S | 6 | 0 | 記錄建立時間 |
| BHZZ | 建立人員 | A | 10 | 0 | 記錄建立人員 |

## 5. 主鍵欄位

| 順序 | 欄位代號 | 欄位名稱 | 排序方式 |
|------|----------|----------|----------|
| 1 | BH01 | 驗收編號 | 遞增 |
| 2 | BH02 | 產品代號 | 遞增 |

## 6. 索引資料

### 索引鍵值
- **主索引**：BH01 + BH02
- **唯一性約束**：UNIQUE
- **排序方式**：驗收編號遞增，產品代號遞增

### 存取路徑
此檔案提供以下存取路徑：
1. 依驗收編號檢索所有明細
2. 依產品代號檢索驗收記錄
3. 支援驗收明細的完整管理

### 關聯設計
- **與W2BGPF關聯**：透過BH01(驗收編號)關聯主檔
- **一對多關係**：一個驗收單對應多個產品明細
- **完整性控制**：確保明細對應的主檔記錄存在

## 7. 使用說明

### 查詢功能
- 支援依驗收編號查詢所有明細
- 提供產品代號的驗收歷史檢索
- 支援驗收日期範圍查詢
- 支援金額及數量統計分析

### 作業程序
1. 建立驗收明細時記錄產品資訊
2. 計算並記錄數量、單價及金額
3. 記錄實際驗收日期
4. 維護建立日期、時間及人員資訊
5. 與主檔保持資料一致性

### 維護作業
- **新增**：建立新的驗收明細記錄
- **查詢**：支援多重條件檢索
- **更新**：更新數量、單價及金額
- **刪除**：依業務規則處理
- **統計**：提供驗收數量及金額統計

### 注意事項
- 檔案具有UNIQUE約束，確保明細唯一性
- 金額應等於數量乘以單價
- 驗收編號需對應W2BGPF主檔記錄
- 支援小數點後兩位的金額精度

## 8. 備註

- 此檔案為前台驗收系統的明細檔案
- 雙重複合主鍵確保明細記錄唯一性
- 支援完整的產品驗收明細管理
- 提供與驗收主檔的完整關聯
- 金額欄位支援小數點後兩位精度
- 支援驗收作業的詳細追蹤功能 