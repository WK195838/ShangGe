# ARAGLF02 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | ARAGLF02 |
| 檔案描述 | 銷貨折讓明細檔邏輯檔案02 |
| 檔案類型 | 邏輯檔案 (Logical File) |
| 基礎實體檔 | ARAGPF |
| 參照存取路徑 | ARAGLF01 |
| 作業系統 | IBM i (AS/400) |
| 程式語言 | DDS |

## 2. 檔案功能說明

ARAGLF02是基於銷貨折讓明細實體檔ARAGPF的邏輯檔案，具有以下特殊設計：
- 使用REFACCPTH(ARAGLF01)關鍵字，直接參照ARAGLF01的存取路徑
- 繼承ARAGLF01的索引結構：AG03+AG09+AG10+AG01+AG11(降序)
- 提供與ARAGLF01相同的存取路徑，但可能用於不同的應用程式或處理需求
- 適用於需要相同排序但不同處理邏輯的業務場景

## 3. 系統檔案清單

| 序號 | 檔案名稱 | 檔案類型 | 說明 |
|------|----------|----------|------|
| 1 | ARAGPF | 實體檔案 | 銷貨折讓明細主檔 |
| 2 | ARAGLF01 | 邏輯檔案 | 銷貨折讓明細檔邏輯檔案01（參照來源） |
| 3 | ARAGLF02 | 邏輯檔案 | 銷貨折讓明細檔邏輯檔案02 |

## 4. 紀錄格式

| 紀錄格式名稱 | 說明 | 基礎檔案 |
|--------------|------|----------|
| AG0 | 銷貨折讓明細紀錄格式 | ARAGPF |

## 5. 欄位規格

ARAGLF02使用與基礎實體檔ARAGPF相同的欄位結構，主要欄位包括：

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|----------|
| AG03 | 業務員 | 9-11 | 3 | 文字 | 必填欄位 |
| AG09 | 產品代號 | 33-47 | 15 | 文字 | 必填欄位 |
| AG10 | 客戶代號 | 48-53 | 6 | 文字 | 必填欄位 |
| AG01 | 公司別 | 1-2 | 2 | 文字 | 必填欄位 |
| AG11 | 序號 | 54-56 | 3 | 數值 | 降序排列 |
| AG02 | 原客戶代號 | 3-8 | 6 | 文字 | 必填欄位 |
| AG04 | 發票日期 | 12-19 | 8 | 數值 | 日期格式YYYYMMDD |
| AG05 | 發票別 | 20-21 | 2 | 文字 | 必填欄位 |
| ... | ... | ... | ... | ... | (其他欄位同ARAGPF) |

## 6. 主鍵欄位

ARAGLF02本身為邏輯檔案，無獨立主鍵定義，其資料完整性由基礎實體檔ARAGPF維護。

## 7. 索引資料

| 索引名稱 | 索引欄位 | 排序 | 說明 |
|----------|----------|------|------|
| 參照索引 | AG03 + AG09 + AG10 + AG01 + AG11 | 混合排序 | 參照ARAGLF01的存取路徑 |

### 索引鍵值組成（參照ARAGLF01）：
1. AG03 (業務員) - 升序排列
2. AG09 (產品代號) - 升序排列  
3. AG10 (客戶代號) - 升序排列
4. AG01 (公司別) - 升序排列
5. AG11 (序號) - **降序排列** (DESCEND)

## 8. 備註

### 設計考量：
- 使用REFACCPTH關鍵字，避免重複定義相同的索引結構
- 繼承ARAGLF01的完整存取路徑和排序邏輯
- 提供相同的資料存取方式，但可能用於不同的應用需求
- 節省系統資源，共享相同的索引結構

### 使用時機：
- 需要與ARAGLF01相同排序但不同處理邏輯的程式
- 備用存取路徑，提供系統彈性
- 特定報表或查詢程式的專用存取路徑
- 系統維護或測試環境的替代檔案

### 技術特色：
- **REFACCPTH關鍵字**: 直接參照其他邏輯檔案的存取路徑
- **資源共享**: 與ARAGLF01共享相同的索引結構
- **維護簡化**: 索引結構變更時只需修改ARAGLF01
- **彈性設計**: 提供多個相同存取路徑的選擇

### 與其他邏輯檔案的關係：
- **ARAGLF01**: 主要的業務員產品客戶存取路徑
- **ARAGLF02**: 參照ARAGLF01，提供相同存取路徑的替代選擇
- **共同特色**: 相同的五欄位複雜索引結構

### 注意事項：
- 本邏輯檔案依賴ARAGPF實體檔案和ARAGLF01邏輯檔案
- 存取路徑完全參照ARAGLF01，任何索引變更都會同步影響
- 適用於需要相同資料排序但不同應用邏輯的場景
- REFACCPTH的使用展現了AS/400系統設計的靈活性和資源效率 