# W1AFLF02 檔案規格書

## 1. 基本資料
- **檔案名稱**: W1AFLF02
- **檔案描述**: 前台調撥主檔邏輯檔02
- **檔案類型**: 邏輯檔案 (LF)
- **實體檔案**: W1AFPF
- **記錄格式**: AF0
- **索引**: AF04 + AF01(DESCEND) + AF02
- **用途**: 提供前台調撥主檔按收貨地+編號倒序+發貨號排序的邏輯視圖
- **相關系統**: 前台調撥管理系統

## 2. 檔案功能說明
W1AFLF02邏輯檔案主要用於：
- 提供前台調撥資料的發貨地點視圖
- 支援按發貨營業點+調撥編號倒序的查詢
- 優化最新調撥單查詢效能
- 提供發貨點調撥歷史查詢功能

## 3. 系統檔案清單
### 邏輯檔案
- W1AFLF02: 前台調撥主檔邏輯檔02

### 實體檔案
- W1AFPF: 前台調撥主檔 (基底檔案)

### 相關邏輯檔案
- W1AFLF01: 前台調撥主檔邏輯檔01
- W1AFLF03: 前台調撥主檔邏輯檔03
- W1AFLF04: 前台調撥主檔邏輯檔04

## 4. 紀錄格式

### 記錄: AF0 (承襲自W1AFPF)
| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| AF01 | 調撥編號 | 1-8 | 8 | S 0 | 索引鍵2(倒序) | 調撥單編號 |
| AF02 | 調撥發貨號 | 9-20 | 12 | A | 索引鍵3 | 發貨單號 |
| AF03 | 收貨營業點 | 21-25 | 5 | A | - | 收貨地點代碼 |
| AF04 | 發貨營業點 | 26-30 | 5 | A | 索引鍵1 | 發貨地點代碼 |
| AF05 | 狀態 | 31 | 1 | A | - | 調撥狀態 |
| AF06 | 數量 | 32-95 | 64 | O | - | 包裝數量 |
| AFXX | 異動日期 | 96-103 | 8 | S 0 | - | 異動日期 |
| AFYY | 異動時間 | 104-109 | 6 | S 0 | - | 異動時間 |
| AFZZ | 異動人員 | 110-119 | 10 | A | - | 異動人員 |

## 5. 主鍵欄位
- **邏輯鍵組合**: AF04 + AF01(DESCEND) + AF02
- **排序**: 發貨營業點 + 調撥編號(倒序) + 調撥發貨號

## 6. 索引資料
### 主要索引
- **索引1**: AF04 (發貨營業點)
- **索引2**: AF01 DESCEND (調撥編號，倒序)
- **索引3**: AF02 (調撥發貨號)

### 索引結構
```
KEY: AF04 (發貨營業點) + AF01 DESCEND (調撥編號) + AF02 (調撥發貨號)
排序: 升序 + 倒序 + 升序
```

## 7. 使用說明
### 查詢作業
1. 主要用於按發貨營業點查詢
2. 調撥編號採倒序排列，最新資料在前
3. 支援發貨號精確定位

### 排序特性
1. 優先按發貨營業點排序
2. 其次按調撥編號倒序排序(最新在前)
3. 最後按調撥發貨號排序

### 應用場景
1. 發貨點最新調撥查詢
2. 營業點調撥歷史瀏覽
3. 調撥趨勢分析
4. 發貨績效統計

## 8. 備註
- 此邏輯檔案承襲W1AFPF的所有欄位定義
- 調撥編號採用DESCEND倒序排列，便於查詢最新調撥記錄
- 適用於按發貨營業點查詢調撥歷史的作業
- 提供與其他邏輯檔案不同的時序視圖 