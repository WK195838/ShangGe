# ARAGLF01 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | ARAGLF01 |
| 檔案描述 | 銷貨折讓明細檔邏輯檔案01 |
| 檔案類型 | 邏輯檔案 (Logical File) |
| 基礎實體檔 | ARAGPF |
| 作業系統 | IBM i (AS/400) |
| 程式語言 | DDS |

## 2. 檔案功能說明

ARAGLF01是基於銷貨折讓明細實體檔ARAGPF的邏輯檔案，提供以下功能：
- 以業務員(AG03)、產品代號(AG09)、客戶代號(AG10)、公司別(AG01)、序號(AG11降序)的組合作為存取路徑
- 支援按序號降序排列的銷貨折讓明細資料查詢
- 適用於業務員產品銷售分析，優先顯示最新序號的交易資料
- 便於進行產品別客戶別的銷貨折讓績效分析

## 3. 系統檔案清單

| 序號 | 檔案名稱 | 檔案類型 | 說明 |
|------|----------|----------|------|
| 1 | ARAGPF | 實體檔案 | 銷貨折讓明細主檔 |
| 2 | ARAGLF01 | 邏輯檔案 | 銷貨折讓明細檔邏輯檔案01 |

## 4. 紀錄格式

| 紀錄格式名稱 | 說明 | 基礎檔案 |
|--------------|------|----------|
| AG0 | 銷貨折讓明細紀錄格式 | ARAGPF |

## 5. 欄位規格

ARAGLF01使用與基礎實體檔ARAGPF相同的欄位結構，主要欄位包括：

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|----------|
| AG03 | 業務員 | 9-11 | 3 | 文字 | 必填欄位 |
| AG09 | 產品代號 | 33-47 | 15 | 文字 | 必填欄位 |
| AG10 | 客戶代號 | 48-53 | 6 | 文字 | 必填欄位 |
| AG01 | 公司別 | 1-2 | 2 | 文字 | 必填欄位 |
| AG11 | 序號 | 54-56 | 3 | 數值 | 降序排列 |
| AG02 | 原客戶代號 | 3-8 | 6 | 文字 | 必填欄位 |
| AG04 | 發票日期 | 12-19 | 8 | 數值 | 日期格式YYYYMMDD |
| AG05 | 發票別 | 20-21 | 2 | 文字 | 必填欄位 |
| ... | ... | ... | ... | ... | (其他欄位同ARAGPF) |

## 6. 主鍵欄位

ARAGLF01本身為邏輯檔案，無獨立主鍵定義，其資料完整性由基礎實體檔ARAGPF維護。

## 7. 索引資料

| 索引名稱 | 索引欄位 | 排序 | 說明 |
|----------|----------|------|------|
| 主要索引 | AG03 + AG09 + AG10 + AG01 + AG11 | 混合排序 | 業務員+產品代號+客戶代號+公司別+序號(降序) |

### 索引鍵值組成：
1. AG03 (業務員) - 升序排列
2. AG09 (產品代號) - 升序排列  
3. AG10 (客戶代號) - 升序排列
4. AG01 (公司別) - 升序排列
5. AG11 (序號) - **降序排列** (DESCEND)

## 8. 備註

### 設計考量：
- 以業務員為第一排序鍵，支援業務員別查詢和績效分析
- 以產品代號為第二排序鍵，便於產品銷售分析
- 以客戶代號為第三排序鍵，支援客戶別產品分析
- 以公司別為第四排序鍵，支援多公司環境
- 以序號降序為第五排序鍵，優先顯示最新的交易序號

### 使用時機：
- 業務員產品銷售績效分析
- 產品別客戶別銷貨折讓統計
- 最新交易序號追蹤查詢
- 業務員客戶產品組合分析
- 銷貨折讓明細報表產生

### 業務應用場景：
- **業務管理**: 分析業務員在特定產品和客戶的折讓處理績效
- **產品分析**: 了解產品在不同客戶的折讓狀況
- **客戶分析**: 檢視客戶對特定產品的折讓需求模式
- **序號追蹤**: 優先處理最新序號的折讓交易

### 與其他邏輯檔案的差異：
- **ARAGLF**: AG02+AG03+AG04(降序) - 客戶業務員時間導向
- **ARAGLF01**: AG03+AG09+AG10+AG01+AG11(降序) - 業務員產品客戶導向

### 注意事項：
- 本邏輯檔案依賴ARAGPF實體檔案的資料完整性
- AG11序號採降序排列，便於優先處理最新交易
- 索引結構複雜，適合多維度分析需求
- 特別適合業務員績效考核和產品銷售分析 