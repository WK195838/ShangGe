# IMIJJL01 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案代號 | IMIJJL01 |
| 檔案名稱 | 存貨調撥明細檔 |
| 檔案類型 | LF (邏輯檔案) |
| 資料庫 | REFLIB |
| 記錄格式 | IJ0 |
| 基礎實體檔案 | IMIJPF, IMIIPF |
| 檔案屬性 | DYNSLT, JDFTVAL |

## 2. 檔案功能說明

此邏輯檔案為存貨調撥明細檔的聯結邏輯檔案，透過 JOIN 操作結合 IMIJPF（存貨調撥明細檔）和 IMIIPF（存貨調撥主檔）兩個實體檔案。以產品代號作為聯結欄位，提供完整的調撥明細與主檔資訊。主要用於查詢和顯示需要同時包含明細和主檔資訊的調撥作業，包含完整的成本資訊（FOB、FHI、關稅總額）。具有選擇條件限制只顯示尚未入庫的調撥記錄（入庫日期為0）。具有動態選擇（DYNSLT）和聯結預設值（JDFTVAL）屬性。

## 3. 系統檔案清單

| 檔案代號 | 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|----------|------|
| IMIJJL01 | 存貨調撥明細檔 | LF | 邏輯檔案（聯結檔案） |
| IMIJPF | 存貨調撥明細檔 | PF | 基礎實體檔案1 |
| IMIIPF | 存貨調撥主檔 | PF | 基礎實體檔案2 |

## 4. 紀錄格式

### 記錄格式：IJ0
- **聯結檔案**：IMIJPF JOIN IMIIPF
- **聯結條件**：IJ02 = II02 (產品代號)
- **檔案屬性**：DYNSLT (動態選擇), JDFTVAL (聯結預設值)
- **存取方式**：聯結邏輯存取
- **選擇條件**：II06 EQ 0 (入庫日期等於0)

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| IJ01 | 單據編號或出貨 | - | - | - | R | 參照 RERF，來自 IMIJPF，單據編號或出貨編號 |
| IJ02 | 產品代號 | - | - | - | R | 參照 RERF，來自 IMIJPF，聯結欄位 |
| IJ03 | 產品項次代號 | - | - | - | R | 參照 RERF，來自 IMIJPF，產品項次代號 |
| IJ04 | 調撥數量 | - | - | - | R | 參照 RERF，來自 IMIJPF，調撥數量 |
| IJ05 | 確認數量 | - | - | - | R | 參照 RERF，來自 IMIJPF，確認數量 |
| IJ06 | 調撥日期 | - | - | - | R | 參照 RERF，來自 IMIJPF，調撥日期 |
| IJ07 | 出貨產品項次代號 | - | - | - | R | 參照 RERF，來自 IMIJPF，出貨產品項次代號 |
| IJ08 | 入貨產品項次代號 | - | - | - | R | 參照 RERF，來自 IMIJPF，入貨產品項次代號 |
| IJ09 | FOB總額 | - | - | - | R | 參照 RERF，來自 IMIJPF，FOB成本總額 |
| IJ10 | FHI總額 | - | - | - | R | 參照 RERF，來自 IMIJPF，FHI成本總額 |
| IJ11 | 關稅總額 | - | - | - | R | 參照 RERF，來自 IMIJPF，關稅成本總額 |
| IJ12 | 單據編號或收貨 | - | - | - | R | 參照 RERF，來自 IMIJPF，單據編號或收貨編號 |
| IJXX | 建立日期 | - | - | - | R | 參照 RERF，來自 IMIJPF，建立日期 |
| IJYY | 建立時間 | - | - | - | R | 參照 RERF，來自 IMIJPF，建立時間 |
| IJZZ | 建立人員 | - | - | - | R | 參照 RERF，來自 IMIJPF，建立人員 |
| II02 | 產品代號 | - | - | - | R | 參照 RERF，來自 IMIIPF，產品代號 |
| II06 | 產品入庫日期 | - | - | - | R | 參照 RERF，來自 IMIIPF，產品入庫日期 |
| II07 | 確認狀態 | - | - | - | R | 參照 RERF，來自 IMIIPF，確認狀態 |

## 6. 主鍵欄位

| 主鍵順序 | 欄位代號 | 欄位名稱 | 排序 |
|----------|----------|----------|------|
| 1 | IJ03 | 產品項次代號 | ASC |
| 2 | IJ07 | 出貨產品項次代號 | ASC |

## 7. 索引資料

### 主要索引
- **索引鍵值**：IJ03+IJ07 (產品項次代號+出貨產品項次代號)
- **索引類型**：複合索引
- **排序方式**：遞增排序
- **用途**：支援按照產品項次和出貨項次的分類查詢

### 聯結資訊
- **聯結類型**：INNER JOIN
- **聯結條件**：IMIJPF.IJ02 = IMIIPF.II02
- **聯結欄位**：產品代號

### 選擇條件
- **選擇欄位**：II06 (產品入庫日期)
- **選擇條件**：EQ 0
- **說明**：只選擇尚未入庫的調撥記錄

### 檔案屬性
- **DYNSLT**：動態選擇，支援執行時期的條件篩選
- **JDFTVAL**：聯結預設值，處理聯結時的預設值設定

## 8. 備註

1. 此檔案為聯結邏輯檔案，結合調撥明細檔和調撥主檔
2. 透過產品代號進行聯結，提供完整的調撥資訊視圖
3. 包含完整的成本資訊：FOB、FHI、關稅總額
4. 具有動態選擇功能，支援彈性的查詢條件
5. 選擇條件限制只顯示尚未入庫的調撥記錄（入庫日期為0）
6. 主鍵設計支援按照產品項次和出貨項次的分類查詢
7. 聯結預設值功能確保聯結操作的資料完整性
8. 主要用於調撥作業中需要同時顯示明細和主檔資訊的場景
9. 適用於追蹤待入庫的調撥明細記錄，包含成本分析
10. 支援按照出貨產品項次進行分組查詢
11. 包含建立相關欄位，用於追蹤資料建立的時間和人員
12. 與 IMIJJF01 相比，此檔案提供更完整的成本資訊和更詳細的欄位
13. 此檔案提供調撥明細檔案的完整聯結存取路徑 