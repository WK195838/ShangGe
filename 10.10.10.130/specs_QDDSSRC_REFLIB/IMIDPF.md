# IMIDPF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | IMIDPF |
| 檔案類型 | 實體檔案 (Physical File) |
| 檔案用途 | 良壞品轉換明細檔 |
| 紀錄格式 | ID0 |
| 參考檔案 | RERF |
| 主鍵欄位 | ID02+ID03 |
| 檔案屬性 | UNIQUE |
| 特殊用途 | 良壞品轉換明細檔，記錄轉換的詳細資訊 |

## 2. 檔案功能說明

IMIDPF是良壞品轉換明細檔的實體檔案，與IMICPF主檔配合使用：

1. **主要功能**：儲存良壞品轉換的明細資料
2. **檔案特性**：具有UNIQUE屬性，確保記錄唯一性
3. **系統用途**：配合IMICPF主檔，提供完整的轉換明細記錄
4. **參考檔案**：使用REF(RERF)定義欄位屬性
5. **資料內容**：包含轉換單號、客戶代號、產品代號、轉換數量等明細資訊
6. **支援功能**：為良壞品轉換作業提供詳細的明細資料基礎

## 3. 系統檔案清單

| 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|------|
| IMIDPF | 實體檔案 | 良壞品轉換明細檔實體檔案（本檔案） |
| IMICPF | 實體檔案 | 良壞品轉換主檔實體檔案 |
| IMICLF01 | 邏輯檔案 | 良壞品轉換主檔邏輯檔案（IC01+IC05排序） |
| IMICLF02 | 邏輯檔案 | 良壞品轉換主檔邏輯檔案（IC05+IC01排序） |
| IMICLF1 | 邏輯檔案 | 良壞品轉換主檔邏輯檔案（IC05降序+IC02排序） |
| RERF | 參考檔案 | 欄位定義參考檔案 |

## 4. 紀錄格式

| 格式名稱 | 說明 |
|----------|------|
| ID0 | 良壞品轉換明細記錄格式 |

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明

本實體檔案使用REF(RERF)參考檔案定義欄位屬性：

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 說明 |
|----------|----------|------|------|------|------|------|
| ID01 | 轉換單號 | 1 | - | - | - | 良壞品轉換單號 |
| ID02 | 客戶代號 | 2 | - | - | 主鍵 | 客戶代號 |
| ID03 | 產品代號 | 3 | - | - | 主鍵 | 產品代號 |
| ID04 | 轉換數量 | 4 | - | - | - | 轉換數量 |
| IDXX | 異動日期 | 5 | 8 | 數值 | - | 異動日期（YYYYMMDD） |
| IDYY | 異動時間 | 6 | - | - | - | 異動時間 |
| IDZZ | 異動人員 | 7 | - | - | - | 異動人員代碼 |

*註：詳細欄位長度和型態定義請參考參考檔案RERF*

## 6. 主鍵欄位

本實體檔案的主鍵欄位為：
- ID02（客戶代號）
- ID03（產品代號）

### 主鍵特性：
- **ID02（客戶代號）**：主鍵第一層，客戶代號
- **ID03（產品代號）**：主鍵第二層，產品代號
- **UNIQUE屬性**：確保每個客戶的每個產品只能有一筆轉換記錄
- **複合主鍵**：客戶代號+產品代號的組合鍵，支援客戶產品別管理

## 7. 索引資料

| 索引名稱 | 索引鍵 | 排序 | 用途說明 |
|----------|--------|------|----------|
| 主索引 | ID02+ID03 | 升序 | 客戶代號+產品代號主要存取路徑 |

### 索引特性：
- **複合索引**：客戶代號+產品代號的複合主鍵
- **UNIQUE屬性**：確保記錄唯一性
- **高效查詢**：提供快速的客戶產品查詢

## 8. 備註

1. **實體檔案特性**：
   - 具有UNIQUE屬性，確保記錄唯一性
   - 使用REF(RERF)參考檔案定義欄位屬性
   - 作為良壞品轉換明細的核心儲存檔案
2. **良壞品轉換明細功能**：
   - 記錄良品轉壞品的明細資料
   - 記錄壞品轉良品的明細資料
   - 支援轉換數量的精確記錄
3. **資料結構設計**：
   - 複合主鍵設計確保客戶產品唯一性
   - 包含7個欄位，涵蓋完整的轉換明細資訊
   - 支援轉換作業的詳細記錄
4. **與主檔關聯**：
   - 配合IMICPF主檔使用
   - ID01與IC01關聯（轉換單號）
   - ID02與IC02關聯（客戶代號）
   - 提供主檔明細的完整架構
5. **客戶產品導向設計**：
   - 以客戶代號+產品代號為主鍵
   - 每個客戶的每個產品一筆轉換記錄
   - 適合客戶產品別轉換管理
6. **異動追蹤功能**：
   - IDXX：異動日期記錄
   - IDYY：異動時間記錄
   - IDZZ：異動人員代碼
7. **數量管理功能**：
   - ID04記錄轉換數量
   - 支援精確的數量控制
   - 提供庫存調整的依據
8. **資料完整性**：
   - UNIQUE屬性確保記錄不重複
   - 複合主鍵提供完整的客戶產品識別
   - 參考檔案確保欄位定義一致性
9. **業務應用**：
   - 良壞品轉換明細管理
   - 客戶產品轉換記錄追蹤
   - 轉換數量統計分析
   - 品質管理支援
10. **系統整合**：
    - 與庫存管理系統（IMI系列）整合
    - 支援IMICPF主檔案
    - 提供完整的轉換明細資料基礎
11. **主明細架構**：
    - 與IMICPF主檔形成完整的主明細架構
    - 主檔記錄轉換概要，明細檔記錄轉換詳情
    - 提供完整的轉換資料管理
12. **數量控制功能**：
    - ID04欄位提供精確的數量控制
    - 支援轉換數量的驗證
    - 提供庫存數量調整的依據
13. **轉換單號關聯**：
    - ID01與主檔IC01關聯
    - 確保主明細檔案的一致性
    - 支援轉換單據的完整性
14. **客戶產品管理**：
    - 複合主鍵支援客戶產品別管理
    - 每個客戶的每個產品獨立記錄
    - 提供精細的轉換管理
15. **系統擴展性**：
    - 檔案結構支援未來功能擴展
    - 異動追蹤欄位支援審計需求
    - 提供良好的系統維護性