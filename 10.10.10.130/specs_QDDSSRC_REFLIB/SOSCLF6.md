# SOSCLF6 檔案規格書

## 1. 基本資料
- 檔名: SOSCLF6
- 類型: LF (Logical File)
- 說明: 訂單資料檔 join for POR065
- 主鍵: 無（JOIN檔案）
- 建立日期: (待補)
- 最後修改日期: (待補)
- 參考實體檔: SOSCPF、SOSDPF、MTMAPF
- 索引約束: JOIN檔案（動態選擇）

## 2. 檔案功能說明
此邏輯檔案為POR065程式專用的三檔案聯結訂單資料檔，提供以下功能：
- 提供訂單主檔、明細檔與產品主檔的POR065專用聯結檢視
- 支援POR065報表程式的跨檔案整合查詢
- 記錄POR065需要的完整訂單與產品關聯資料
- 支援POR065程式的訂單明細複合分析
- 提供動態選擇的彈性檢視，特定狀態過濾
- 支援多檔案關聯的POR065專用資料處理
- 記錄POR065報表需要的訂單產品資訊
- 支援POR065業務分析的綜合查詢
- 提供POR065客戶訂單的全面檢視
- 記錄POR065系統的整合資料檔案

## 3. 系統檔案清單
- 主要邏輯檔: SOSCLF6 (POR065專用訂單資料JOIN檔)
- 基礎實體檔1: SOSCPF (銷售訂單主檔)
- 基礎實體檔2: SOSDPF (銷售訂單明細檔)
- 基礎實體檔3: MTMAPF (產品主檔)
- 專用程式: POR065
- 特殊功能: DYNSLT (動態選擇)

## 4. 紀錄格式
邏輯檔案記錄格式SC0，透過雙重JOIN關聯三個檔案，提供POR065專用的訂單與產品整合檢視。

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明
| 欄位代號 | 名稱 | 位置 | 長度 | 屬性 | 檢核說明 |
|----------|------|------|------|------|----------|
| SC01 | 程式記號 | 1 | REF | 參考欄位 | 來自SOSCPF，程式記號 |
| SC01A | 程式記號第一碼 | 待計算 | 1 | 衍生欄位 | 程式記號第一碼（篩選條件） |
| SC02 | 程式編號出站 | 待計算 | REF | 參考欄位 | 來自SOSCPF，JOIN關聯鍵 |
| SC03 | 狀態 | 待計算 | REF | 參考欄位 | 來自SOSCPF，狀態記號（篩選條件） |
| SC04 | 客戶代號 | 待計算 | REF | 參考欄位 | 來自SOSCPF，客戶代號 |
| SC08 | 已排定送貨日期 | 待計算 | REF | 參考欄位 | 來自SOSCPF，已排定送貨日期 |
| SC29 | 送貨箱數 | 待計算 | REF | 參考欄位 | 來自SOSCPF，送貨箱數（篩選條件） |
| SC35 | 應收記號 | 待計算 | REF | 參考欄位 | 來自SOSCPF，應收記號（篩選條件） |
| SC39 | 確認者 | 待計算 | REF | 參考欄位 | 來自SOSCPF，確認者 |
| SD02 | 程式編號出站 | 待計算 | REF | 參考欄位 | 來自SOSDPF，JOIN關聯鍵 |
| SD03 | 產品編號 | 待計算 | REF | 參考欄位 | 來自SOSDPF，JOIN關聯鍵 |
| SD04 | 數量 | 待計算 | REF | 參考欄位 | 來自SOSDPF，數量 |
| SD05 | 單價 | 待計算 | REF | 參考欄位 | 來自SOSDPF，單價 |
| MA01 | 產品編號 | 待計算 | REF | 參考欄位 | 來自MTMAPF，JOIN關聯鍵 |
| MA07 | 產品名稱 | 待計算 | REF | 參考欄位 | 來自MTMAPF，產品名稱 |
| MA08 | 產品分類 | 待計算 | REF | 參考欄位 | 來自MTMAPF，產品分類 |
| MA09 | 產品子分類 | 待計算 | REF | 參考欄位 | 來自MTMAPF，產品子分類 |
| MA10 | 產品群組 | 待計算 | REF | 參考欄位 | 來自MTMAPF，產品群組 |
| MA11 | 規格 | 待計算 | REF | 參考欄位 | 來自MTMAPF，規格 |
| MA15 | 單位 | 待計算 | REF | 參考欄位 | 來自MTMAPF，單位 |
| MA54 | 成本 | 待計算 | REF | 參考欄位 | 來自MTMAPF，成本 |

## 6. 主鍵欄位
- 主鍵: 無（JOIN檔案使用關聯鍵）
- JOIN關聯:
  - SOSCPF ↔ SOSDPF: SC02 = SD02
  - SOSDPF ↔ MTMAPF: SD03 = MA01
- 約束類型: 雙重JOIN關聯

## 7. 索引資料
- 主要索引: 無（動態選擇檔案）
- 索引類型: JOIN檔案索引
- JOIN結構:
  - 第一層JOIN: SOSCPF與SOSDPF透過SC02=SD02關聯
  - 第二層JOIN: SOSDPF與MTMAPF透過SD03=MA01關聯
- 過濾條件:
  - SELECT: SC35 = ' ' (選擇應收記號為空值)
  - SELECT: SC29 = ' ' (選擇送貨箱數為空值)
  - SELECT: SC03 ≠ 'S2' (排除狀態S2)
  - SELECT: SC03 ≠ 'S3' (排除狀態S3)
  - SELECT: SC01A ≠ 'K' (排除程式記號第一碼K)
- 動態選擇: DYNSLT啟用

## 8. 備註
- 此邏輯檔案專為POR065程式設計
- 記錄SC0為邏輯檔案記錄格式名稱
- 檔案註解中顯示為訂單資料檔(REWFC7)
- 使用DYNSLT提供動態選擇功能
- 雙重JOIN結構：訂單主檔→明細檔→產品主檔
- 使用衍生欄位SC01A = SST(SC01 1 1)提取程式記號第一碼
- 比SOSCLF5增加兩個訂單主檔欄位：SC08、SC29
- 具有更複雜的五重過濾條件
- 特別排除狀態S2和S3（可能為特定業務狀態）
- 選擇應收記號和送貨箱數為空值的記錄
- JOIN關聯鍵：SC02=SD02, SD03=MA01
- 專為POR065報表程式提供資料來源
- 支援POR065的特定業務邏輯查詢
- 用於POR065的專門業務分析
- 支援POR065的訂單明細分析
- 記錄POR065需要的客戶訂單資訊
- 提供POR065的產品銷售關聯分析
- 支援POR065的營運決策資料
- 用於POR065的報表分析基礎檔案
- 提供POR065的客戶服務檢視
- 支援POR065的庫存管理查詢
- 記錄POR065的銷售流程軌跡
- 用於POR065的績效分析平台
- 提供POR065的財務分析資料
- 支援POR065的策略決策
- 記錄POR065的業務營運資訊
- 用於POR065系統整合的專用檔案 