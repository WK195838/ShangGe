# IMIQLF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案代號 | IMIQLF |
| 檔案名稱 | 進貨查詢邏輯檔 |
| 檔案類型 | LF (邏輯檔案) |
| 資料庫 | REFLIB |
| 記錄格式 | PG0, SO0, IJ0 |
| 基礎實體檔案 | POPGPF, SOSOPF, IMIJPF |

## 2. 檔案功能說明

此聯結邏輯檔案整合三個實體檔案（POPGPF、SOSOPF、IMIJPF），提供以單據號碼加產品代號的排序存取路徑。主要用於進貨查詢作業，將進貨、銷退、調撥等相關單據資料按照單據號碼和產品代號統一呈現。提供統一的產品進貨資訊查詢介面，包含數量、金額等完整的進貨資訊。

## 3. 系統檔案清單

| 檔案代號 | 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|----------|------|
| IMIQLF | 進貨查詢邏輯檔 | LF | 邏輯檔案 |
| POPGPF | 進貨訂購主檔 | PF | 基礎實體檔案1 |
| SOSOPF | 銷退訂購主檔 | PF | 基礎實體檔案2 |
| IMIJPF | 調撥訂購主檔 | PF | 基礎實體檔案3 |

## 4. 紀錄格式

### 記錄格式：PG0 (基於POPGPF)
- **基於實體檔案**：POPGPF
- **存取方式**：聯結邏輯存取
- **排序方式**：複合排序（單據號碼 + 產品代號）

### 記錄格式：SO0 (基於SOSOPF)
- **基於實體檔案**：SOSOPF
- **存取方式**：聯結邏輯存取
- **排序方式**：複合排序（單據號碼 + 產品代號）

### 記錄格式：IJ0 (基於IMIJPF)
- **基於實體檔案**：IMIJPF
- **存取方式**：聯結邏輯存取
- **排序方式**：複合排序（單據號碼 + 產品代號）

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明

### 共通欄位 (所有記錄格式)
| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|----------|----------|
| IQ01 | 單據編號 | - | - | - | R | 對應各檔案的單據編號欄位 |
| IQ02 | 單據號碼 | - | - | - | R,K | 對應各檔案的單據號碼欄位，索引欄位1 |
| IQ03 | 產品代號 | - | - | - | R,K | 對應各檔案的產品代號欄位，索引欄位2 |
| IQ04 | 數量 | - | - | - | R | 對應各檔案的數量欄位 |
| IQ05 | 確認數量 | - | - | - | R | 對應各檔案的確認數量欄位 |
| IQ08 | 產品類別 | - | 1 | A | I | 單據編號第1碼，產品類別識別 |
| IQ09 | FOB總計 | - | - | - | R | 對應各檔案的FOB總額 |
| IQ10 | FHI總計 | - | - | - | R | 對應各檔案的FHI總額 |
| IQ11 | DUTY總計 | - | - | - | R | 對應各檔案的DUTY總額 |

### PG0記錄格式特有欄位
| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|----------|----------|
| IQ01 | 單據編號 | - | - | - | R | RENAME(PG01) |
| IQ02 | 單據號碼 | - | - | - | R | RENAME(PG02) |
| IQ03 | 產品代號 | - | - | - | R | RENAME(PG03) |
| IQ04 | 訂購數量 | - | - | - | R | RENAME(PG05) |
| IQ05 | 確認數量 | - | - | - | R | RENAME(PG07) |
| IQ09 | FOB總計 | - | - | - | R | RENAME(PG12) |
| IQ10 | FHI總計 | - | - | - | R | RENAME(PG13) |

### SO0記錄格式特有欄位
| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|----------|----------|
| IQ06 | 單價 | - | - | - | R | RENAME(SO12) |
| IQ07 | 退貨數量單價 | - | - | - | R | RENAME(SO06) |
| SO16 | 其他欄位1 | - | - | - | - | 額外欄位 |
| SO17 | 其他欄位2 | - | - | - | - | 額外欄位 |
| SO18 | 其他欄位3 | - | - | - | - | 額外欄位 |

## 6. 主鍵欄位

| 主鍵順序 | 欄位代號 | 欄位名稱 | 排序 |
|----------|----------|----------|------|
| 1 | IQ02 | 單據號碼 | ASC |
| 2 | IQ03 | 產品代號 | ASC |

## 7. 索引資料

### 主要索引
- **索引鍵值**：IQ02 + IQ03
- **索引類型**：複合索引
- **排序方式**：遞增排序
- **用途**：支援按照單據號碼和產品代號的查詢

## 8. 備註

1. 此檔案為聯結邏輯檔案，整合三個實體檔案
2. 提供統一的進貨查詢介面
3. 包含完整的進貨、銷退、調撥資訊
4. 支援按照單據號碼和產品代號的複合查詢
5. 提供FOB、FHI、DUTY等成本資訊
6. 適用於進貨業務的綜合查詢
7. 便於跨檔案的進貨資料整合分析
8. 支援產品別的進貨統計和管理 