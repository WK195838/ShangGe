# W1AFLF04 檔案規格書

## 1. 基本資料
- **檔案名稱**: W1AFLF04
- **檔案描述**: 前台調撥主檔邏輯檔04
- **檔案類型**: 邏輯檔案 (LF)
- **實體檔案**: W1AFPF
- **記錄格式**: AF0
- **索引**: AF01(DESCEND) + AF04 + AF03
- **用途**: 提供前台調撥主檔按編號倒序+發貨地+收貨地排序的邏輯視圖
- **相關系統**: 前台調撥管理系統

## 2. 檔案功能說明
W1AFLF04邏輯檔案主要用於：
- 提供前台調撥資料的營業點對應視圖
- 支援按調撥編號倒序+營業點的組合查詢
- 優化調撥路徑分析查詢效能
- 提供發收貨點對應管理功能

## 3. 系統檔案清單
### 邏輯檔案
- W1AFLF04: 前台調撥主檔邏輯檔04

### 實體檔案
- W1AFPF: 前台調撥主檔 (基底檔案)

### 相關邏輯檔案
- W1AFLF01: 前台調撥主檔邏輯檔01
- W1AFLF02: 前台調撥主檔邏輯檔02
- W1AFLF03: 前台調撥主檔邏輯檔03

## 4. 紀錄格式

### 記錄: AF0 (承襲自W1AFPF)
| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| AF01 | 調撥編號 | 1-8 | 8 | S 0 | 索引鍵1(倒序) | 調撥單編號 |
| AF02 | 調撥發貨號 | 9-20 | 12 | A | - | 發貨單號 |
| AF03 | 收貨營業點 | 21-25 | 5 | A | 索引鍵3 | 收貨地點代碼 |
| AF04 | 發貨營業點 | 26-30 | 5 | A | 索引鍵2 | 發貨地點代碼 |
| AF05 | 狀態 | 31 | 1 | A | - | 調撥狀態 |
| AF06 | 數量 | 32-95 | 64 | O | - | 包裝數量 |
| AFXX | 異動日期 | 96-103 | 8 | S 0 | - | 異動日期 |
| AFYY | 異動時間 | 104-109 | 6 | S 0 | - | 異動時間 |
| AFZZ | 異動人員 | 110-119 | 10 | A | - | 異動人員 |

## 5. 主鍵欄位
- **邏輯鍵組合**: AF01(DESCEND) + AF04 + AF03
- **排序**: 調撥編號(倒序) + 發貨營業點 + 收貨營業點

## 6. 索引資料
### 主要索引
- **索引1**: AF01 DESCEND (調撥編號，倒序)
- **索引2**: AF04 (發貨營業點)
- **索引3**: AF03 (收貨營業點)

### 索引結構
```
KEY: AF01 DESCEND (調撥編號) + AF04 (發貨營業點) + AF03 (收貨營業點)
排序: 倒序 + 升序 + 升序
```

## 7. 使用說明
### 查詢作業
1. 主要用於調撥路徑分析
2. 最新調撥編號記錄優先顯示
3. 支援發貨與收貨營業點組合查詢

### 排序特性
1. 優先按調撥編號倒序排序(最新在前)
2. 其次按發貨營業點排序
3. 最後按收貨營業點排序

### 應用場景
1. 調撥路徑追蹤
2. 營業點間調撥分析
3. 發收貨配對統計
4. 調撥效率評估

## 8. 備註
- 此邏輯檔案承襲W1AFPF的所有欄位定義
- 提供完整的營業點對應視圖，適用於路徑分析
- 調撥編號倒序排列，確保最新資料優先
- 支援發貨與收貨營業點的雙重分類查詢 