# IMIILF01 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案代號 | IMIILF01 |
| 檔案名稱 | 存貨調撥主檔 |
| 檔案類型 | LF (邏輯檔案) |
| 資料庫 | REFLIB |
| 記錄格式 | II0 |
| 基礎實體檔案 | IMIIPF |

## 2. 檔案功能說明

此邏輯檔案基於 IMIIPF（存貨調撥主檔實體檔案），提供以單據編號、產品入庫日期、產品代號為主鍵的排序存取路徑。主要用於存貨調撥作業中需要按照單據編號和入庫日期順序處理的業務場景，支援時間序列的調撥單據查詢和處理。

## 3. 系統檔案清單

| 檔案代號 | 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|----------|------|
| IMIILF01 | 存貨調撥主檔 | LF | 邏輯檔案 |
| IMIIPF | 存貨調撥主檔 | PF | 基礎實體檔案 |

## 4. 紀錄格式

### 記錄格式：II0
- **基於實體檔案**：IMIIPF
- **存取方式**：直接邏輯存取

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| II01 | 單據編號或出貨 | - | - | - | R | 參照 RERF，單據編號或出貨編號 |
| II02 | 產品代號 | - | - | - | R | 參照 RERF，產品代號 |
| II03 | 出貨產品項次代號 | - | - | - | R | 參照 RERF，出貨產品項次代號 |
| II04 | 入貨產品項次代號 | - | - | - | R | 參照 RERF，入貨產品項次代號 |
| II05 | 調撥日期 | - | 8 | 數值 | R | 調撥日期 (YYYYMMDD 格式) |
| II06 | 產品入庫日期 | - | 8 | 數值 | R | 產品入庫日期 (YYYYMMDD 格式) |
| II07 | 確認狀態 | - | - | - | R | 參照 RERF，確認狀態 |
| II08 | 庫存狀態 | - | - | - | R | 參照 RERF，庫存狀態 |
| II09 | 單據編號或收貨 | - | - | - | R | 參照 RERF，單據編號或收貨編號 |
| IIXX | 建立日期 | - | 8 | 數值 | R | 建立日期 (YYYYMMDD 格式) |
| IIYY | 建立時間 | - | - | - | R | 參照 RERF，建立時間 |
| IIZZ | 建立人員 | - | - | - | R | 參照 RERF，建立人員 |

## 6. 主鍵欄位

| 主鍵順序 | 欄位代號 | 欄位名稱 | 排序 |
|----------|----------|----------|------|
| 1 | II01 | 單據編號或出貨 | ASC |
| 2 | II06 | 產品入庫日期 | ASC |
| 3 | II02 | 產品代號 | ASC |

## 7. 索引資料

### 主要索引
- **索引鍵值**：II01+II06+II02 (單據編號+產品入庫日期+產品代號)
- **索引類型**：複合索引
- **排序方式**：遞增排序
- **用途**：支援按單據編號和入庫日期的時間序列查詢

## 8. 備註

1. 此檔案為邏輯檔案，基於 IMIIPF 實體檔案
2. 提供三層主鍵排序：單據編號→產品入庫日期→產品代號
3. 所有欄位定義均繼承自基礎實體檔案 IMIIPF
4. 主要用於需要按照單據和入庫時間順序處理的調撥作業
5. 適用於入庫日期相關的調撥單據查詢和報表
6. 支援時間序列分析和入庫進度追蹤
7. 日期欄位採用 YYYYMMDD 格式儲存
8. 此檔案提供存貨調撥主檔的時間序列存取路徑 