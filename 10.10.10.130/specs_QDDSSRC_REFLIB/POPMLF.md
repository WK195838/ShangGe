# POPMLF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | POPMLF |
| 檔案類型 | 邏輯檔 (LF) |
| 檔案說明 | 國內外驗收完稅主檔邏輯檔 |
| 主索引鍵 | PM04+PM02 (降序+升序) |
| 實體檔案 | POPDPF, POPFPF, POPHPF |
| 建立日期 | (依實際建立日期填入) |
| 維護人員 | (依實際維護人員填入) |

## 2. 檔案功能說明

此邏輯檔案統合國外採購驗收、國外採購完稅及國內採購驗收三個主檔，提供統一的檢視介面，以日期降序排列。

### 主要功能
- 統合國內外驗收完稅資料的檢視
- 提供統一的日期降序存取方式
- 支援跨檔案的驗收資料查詢

## 3. 系統檔案清單

| 檔案名稱 | 檔案類型 | 說明 | 關聯 |
|----------|----------|------|------|
| POPMLF | LF | 國內外驗收完稅主檔邏輯檔 | 主檔案 |
| POPDPF | PF | 國外採購驗收主檔實體檔 | 實體檔案參照 |
| POPFPF | PF | 國外採購完稅主檔實體檔 | 實體檔案參照 |
| POPHPF | PF | 國內採購驗收主檔實體檔 | 實體檔案參照 |

## 4. 記錄格式

### 記錄格式名稱：PD0, PF0, PH0

| 格式名稱 | 格式說明 | 參照檔案 | 重新命名 |
|----------|----------|----------|----------|
| PD0 | 國外採購驗收格式 | POPDPF | PD01→PM01, PD02→PM02, PD03→PM03, PD04→PM04 |
| PF0 | 國外採購完稅格式 | POPFPF | PF01→PM01, PF02→PM02, PF03→PM03, PF04→PM04 |
| PH0 | 國內採購驗收格式 | POPHPF | PH01→PM01, PH02→PM02, PH03→PM03, PH04→PM04 |

## 5. 欄位規格

### 統一欄位定義

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| PM01 | 廠商編號 | 1 | R | 文字 | RENAME | 重新命名自各檔案的廠商編號 |
| PM02 | 檢索編號 | - | R | 文字 | KEY | 主鍵欄位 |
| PM03 | 備註 | - | R | 文字 | RENAME | 重新命名自各檔案的備註 |
| PM04 | 供貨日期 | - | R | 日期 | KEY, DESCEND | 主鍵欄位，降序排列 |

## 6. 主鍵欄位

| 順序 | 欄位代號 | 欄位名稱 | 排序 |
|------|----------|----------|------|
| 1 | PM04 | 供貨日期 | 降序 (DESCEND) |
| 2 | PM02 | 檢索編號 | 升序 |

## 7. 索引資料

### 主要索引
- **索引名稱**：主鍵索引
- **索引欄位**：PM04+PM02
- **索引類型**：複合索引，PM04降序+PM02升序
- **唯一性**：依實體檔案設定

### 索引用途
- 依供貨日期降序優先顯示最新的驗收完稅資料
- 依檢索編號細分同日期資料
- 適用於需要最新資料優先顯示的統合查詢

## 8. 備註

### 特殊說明
- 此邏輯檔案統合三個不同的實體檔案
- 使用 RENAME 功能將各檔案欄位統一命名
- 使用降序排列 (DESCEND) 供貨日期，適用於最新資料優先檢視
- 提供跨國內外驗收完稅資料的統一檢視介面

### 檔案統合關係
- **POPDPF 記錄格式 PD0**：國外採購驗收主檔
- **POPFPF 記錄格式 PF0**：國外採購完稅主檔  
- **POPHPF 記錄格式 PH0**：國內採購驗收主檔

### 相關檔案
- POPDPF（國外採購驗收主檔實體檔）
- POPFPF（國外採購完稅主檔實體檔）
- POPHPF（國內採購驗收主檔實體檔）
- POPMLF1（國內外驗收完稅主檔邏輯檔 - 另一版本）

### 維護注意事項
- 邏輯檔案結構變更需同步更新三個實體檔案
- 欄位重新命名需確保一致性
- 降序索引設計需考慮查詢效能
- 資料異動透過各自的實體檔案進行 