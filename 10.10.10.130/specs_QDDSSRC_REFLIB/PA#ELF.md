# PA#ELF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | PA#ELF |
| 檔案描述 | 銷售地區區域資料檔 (邏輯檔) |
| 檔案類型 | LF (Logical File) |
| 記錄格式 | #E0 |
| 主鍵 | #E01 (區域代號) |
| 實體檔案 | PA#EPF |
| 檔案屬性 | 邏輯檢視 |

## 2. 檔案功能說明

PA#ELF 為 PA#EPF 銷售地區區域資料檔的邏輯檔案，提供：
- 銷售區域資料的標準檢視
- 區域分類與管理
- 業務區域配置檢視
- 區域績效分析支援

## 3. 系統檔案清單

| 檔案代號 | 檔案名稱 | 說明 |
|----------|----------|------|
| PA#ELF | 銷售地區區域資料邏輯檔 | 主檔 |
| PA#EPF | 銷售地區區域資料實體檔 | 實體檔案 |
| PA#DPF | 銷售地區資料實體檔 | 關聯檔案 |
| RERF | 參考檔案 | 欄位定義參考 |

## 4. 紀錄格式

### 記錄格式：#E0 (繼承自 PA#EPF)

## 5. 欄位規格

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| #E01 | 區域代號 | 1-5 | 5 | A | R | 主鍵，區域識別碼 |
| #E02 | 區域名稱 | 6-25 | 20 | A | R | 區域中文名稱 |
| #E03 | 英文名稱 | 26-45 | 20 | A | R | 區域英文名稱 |
| #E04 | 區域說明 | 46-85 | 40 | A | R | 區域詳細說明 |
| #E05 | 所屬地區 | 86-90 | 5 | A | R | 所屬地區代號 |
| #E06 | 區域等級 | 91-92 | 2 | N | R | 區域等級 |
| #E07 | 使用狀態 | 93 | 1 | A | R | 'A'-有效，'I'-停用 |
| #E08 | 排序序號 | 94-96 | 3 | N | R | 顯示排序 |
| #E09 | 區域主管 | 97-101 | 5 | A | R | 區域主管員工代號 |
| #E10 | 配送中心 | 102-106 | 5 | A | R | 配送中心代號 |
| #E11 | 服務範圍 | 107-146 | 40 | A | R | 服務範圍說明 |
| #EXX | 建立日期 | 147-154 | 8 | N | R | 格式：YYYYMMDD |
| #EYY | 建立時間 | 155-160 | 6 | N | R | 格式：HHMMSS |
| #EZZ | 建立者 | 161-170 | 10 | A | R | 操作人員 |

## 6. 主鍵欄位

| 鍵值序號 | 欄位代號 | 欄位名稱 | 排序 |
|----------|----------|----------|------|
| 1 | #E01 | 區域代號 | 升序 |

## 7. 索引資料

### 主要索引
- **索引名稱**：主鍵索引
- **索引欄位**：#E01
- **索引類型**：PRIMARY
- **說明**：區域代號升序排序

### 輔助索引
1. **地區索引**：#E05 + #E01 (所屬地區 + 區域代號)
2. **等級索引**：#E06 (區域等級)
3. **排序索引**：#E08 (排序序號)
4. **狀態索引**：#E07 (使用狀態)
5. **主管索引**：#E09 (區域主管)
6. **配送中心索引**：#E10 (配送中心)

### 邏輯檢視特性
- **基底檔案**：PA#EPF
- **檢視類型**：完整記錄檢視
- **排序方式**：#E01 升序

## 8. 備註

### 設計考量
1. 此檔案為 PA#EPF 的邏輯檢視檔案
2. 提供銷售區域的細緻化管理
3. 支援地區下的區域劃分

### 區域管理架構
- **地區**：由 PA#DPF 管理的大範圍區域
- **區域**：地區下的細分區域，更精確的業務單位
- **關聯方式**：透過 #E05 連結所屬地區
- **配送管理**：每個區域可指定專屬配送中心

### 參考關聯
- **實體檔案**：PA#EPF (銷售地區區域資料)
- **地區檔案**：PA#DPF (#E05 = #D01)
- **區域主管**：MTMCPF (#E09 = MC01)
- **配送中心**：配送中心檔案 (#E10 = 配送中心代號)
- **客戶檔案**：MTMDPF (客戶區域歸屬)

### 業務規則
1. 區域代號必須唯一
2. 所屬地區必須存在於 PA#DPF 中
3. 同一地區下的區域不可重複
4. 停用區域不影響既有客戶資料

### 資料完整性
1. 資料內容完全依賴 PA#EPF 實體檔案
2. #E05 需對應 PA#DPF 中的有效地區代號
3. #E09 需對應 MTMCPF 中的有效員工
4. #E10 需對應有效的配送中心代號

### 使用注意事項
1. 此為邏輯檔案，不可直接寫入資料
2. 所有異動需透過 PA#EPF 實體檔案進行
3. 區域調整需考慮客戶影響
4. 配送中心變更影響物流安排 