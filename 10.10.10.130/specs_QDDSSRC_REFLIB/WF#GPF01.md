# WF#GPF01 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | WF#GPF01 |
| 檔案類型 | 實體檔 (PF) |
| 檔案描述 | 傳票未處理介面暫存檔 |
| 作業系統 | AS/400 |
| 資料庫 | DB2/400 |
| 關聯參考檔 | RERF |

## 2. 檔案功能說明

此檔案為傳票系統的未處理介面暫存檔，負責暫存尚未完成處理的傳票資料。主要功能：
- 暫存未完成處理的傳票記錄
- 提供傳票處理的暫時儲存機制
- 記錄傳票的處理狀態類型
- 支援批次處理前的資料暫存
- 提供傳票作業的緩衝處理

## 3. 系統檔案清單

| 項目 | 檔案名稱 | 類型 | 說明 |
|------|----------|------|------|
| 主檔 | WF#GPF01 | PF | 傳票未處理介面暫存檔 |
| 參考檔 | RERF | PF | 系統參考檔 |
| 關聯檔 | WF#GPF | PF | 傳票介面控制檔 |

## 4. 紀錄格式

### 記錄格式：WF#GR1
**唯一性約束：UNIQUE**

| 欄位代號 | 欄位名稱 | 型態 | 長度 | 小數 | 屬性 | 說明 |
|----------|----------|------|------|------|------|------|
| #G01 | 介面控制編號 | A | 12 | 0 | 主鍵 | 傳票介面控制編號 |
| #G02 | 確認日期 | S | 8 | 0 | REFFLD(#AXX) | 傳票確認日期 |
| #G03 | 狀態類型 | A | 2 | 0 | - | 處理狀態類型 |
| #GXX | 建立日期 | S | 8 | 0 | REFFLD(#AXX) | 記錄建立日期 |
| #GYY | 建立時間 | S | 6 | 0 | REFFLD(#AYY) | 記錄建立時間 |
| #GZZ | 建立人員 | A | 10 | 0 | REFFLD(#AZZ) | 記錄建立人員 |

## 5. 主鍵欄位

| 順序 | 欄位代號 | 欄位名稱 | 排序方式 |
|------|----------|----------|----------|
| 1 | #G01 | 介面控制編號 | 遞增 |

## 6. 索引資料

### 索引鍵值
- **主索引**：#G01
- **唯一性約束**：UNIQUE
- **排序方式**：遞增

### 存取路徑
此檔案提供以下存取路徑：
1. 依介面控制編號直接存取
2. 支援未處理記錄的快速檢索
3. 提供狀態類型的分類存取

### 狀態類型說明
- **#G03欄位**：記錄不同的處理狀態類型
- **暫存機制**：作為正式處理前的緩衝
- **批次處理**：支援大量資料的分批處理

## 7. 使用說明

### 查詢功能
- 支援依介面控制編號查詢
- 提供狀態類型的分類檢索
- 支援確認日期範圍查詢
- 支援建立時間排序檢索

### 作業程序
1. 傳票資料先暫存於此檔案
2. 記錄處理狀態類型
3. 批次處理時從此檔案讀取
4. 處理完成後移轉或刪除記錄

### 維護作業
- **新增**：暫存未處理的傳票資料
- **查詢**：檢索待處理記錄狀態
- **更新**：更新處理狀態及確認日期
- **刪除**：處理完成後清除暫存記錄

### 注意事項
- 此為暫存檔，資料具有時效性
- 檔案具有UNIQUE約束，避免重複暫存
- 狀態類型欄位用於區分不同處理階段
- 定期清理已處理完成的記錄

## 8. 備註

- 此檔案為傳票系統的暫存處理檔案
- 檔名含有特殊字元#，需特別注意系統相容性
- 參考RERF檔案的欄位定義標準
- 與WF#GPF主控制檔搭配使用
- 提供傳票批次處理的緩衝機制
- 支援大量傳票資料的分階段處理
- 唯一性約束確保暫存資料完整性 