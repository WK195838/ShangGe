# SOVRLF04 檔案規格書

## 1. 基本資料

| 欄位 | 內容 |
|------|------|
| 檔案名稱 | SOVRLF04 |
| 檔案描述 | 媒體申報人工輸入檔－銷項綜合 |
| 檔案類型 | 邏輯檔案 (LF) |
| 記錄格式 | VR0 |
| 關鍵字 | VR91+VR92+VR04+VR01+VR16+VR21 |
| 實體檔案 | SOVRPF |
| 作業系統 | AS/400 |
| 資料庫 | DB2/400 |
| 存取方式 | 索引存取 |

## 2. 檔案功能說明

媒體申報人工輸入檔銷項綜合邏輯檔提供完整的銷項資料存取功能，包含期數、類型、年月、格式、發票統一編號、序號等完整排序。透過格式範圍選擇(31-38)篩選銷項相關資料，支援詳細的銷項稅額查詢與處理。

## 3. 系統檔案清單

| 相關檔案 | 檔案名稱 | 說明 |
|----------|----------|------|
| 邏輯檔案 | SOVRLF04 | 媒體申報人工輸入檔銷項綜合邏輯檔 |
| 實體檔案 | SOVRPF | 媒體申報人工輸入檔 |
| 相關檔案 | SOVRLF03 | 媒體申報人工輸入檔進項綜合邏輯檔 |

## 4. 紀錄格式

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| VR91 | 期數編號 | 1-2 | 2 | 文字 | 索引1 | 申報期數識別 |
| VR92 | 類型處理 | 3-3 | 1 | 文字 | 索引2 | 申報類型處理碼 |
| VR04 | 發票年月 | 4-9 | 6,0 | 數值 | 索引3 | 發票年月(YYYYMM) |
| VR01 | 格式 | 10-11 | 2 | 文字 | 索引4,選擇 | 銷項格式(31-38) |
| VR16 | 發票統一編號 | 12-25 | 14 | 文字 | 索引5 | 發票統一編號 |
| VR21 | 序號 | 26-29 | 4,0 | 數值 | 索引6 | 資料序號 |

## 5. 主鍵欄位

- **排序鍵**：VR91+VR92+VR04+VR01+VR16+VR21 (期數編號+類型處理+發票年月+格式+發票統編+序號)
- **索引類型**：複合索引
- **排序方式**：遞增排序
- **選擇條件**：VR01 RANGE('31' '38')

## 6. 索引資料

| 索引名稱 | 索引欄位 | 索引類型 | 說明 |
|----------|----------|----------|------|
| PRIMARY | VR91+VR92+VR04+VR01+VR16+VR21 | LOGICAL | 銷項綜合複合索引 |

## 7. 使用說明

1. **綜合銷項查詢**：提供完整的銷項資料查詢功能
2. **發票明細存取**：按發票統一編號進行明細資料存取
3. **序號排序**：支援按序號排序的明細資料處理
4. **格式篩選**：自動篩選銷項格式範圍(31-38)的資料
5. **詳細報表**：支援詳細的銷項稅額明細報表

## 8. 備註

- 邏輯檔案基於SOVRPF實體檔案建立
- 使用RANGE選擇條件限制格式為銷項範圍(31-38)
- 包含序號欄位，支援同一發票的多筆明細排序
- 最完整的銷項資料存取邏輯檔案
- 與SOVRLF03進項綜合邏輯檔對應，提供完整的綜合查詢功能 