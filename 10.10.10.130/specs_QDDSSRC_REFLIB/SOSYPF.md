# SOSYPF 檔案規格書

## 1. 基本資料

| 欄位 | 內容 |
|------|------|
| 檔案名稱 | SOSYPF |
| 檔案描述 | 發票稅額主檔 |
| 檔案類型 | 實體檔案 (PF) |
| 記錄格式 | SY0 |
| 關鍵字 | SY01+SY02 |
| 作業系統 | AS/400 |
| 資料庫 | DB2/400 |
| 存取方式 | 索引存取 |

## 2. 檔案功能說明

發票稅額主檔是稅務管理系統的核心檔案，記錄每張發票的稅額計算詳細資訊。本檔案管理營業稅與退貨稅額的處理，支援多種稅額計算方式，確保稅務申報的準確性與合規性。

## 3. 系統檔案清單

| 相關檔案 | 檔案名稱 | 說明 |
|----------|----------|------|
| 主檔案 | SOSYPF | 發票稅額主檔 |
| 參考檔案 | RERF | 參考檔案 |
| 相關檔案 | SOSIPF | 發票主檔 |

## 4. 紀錄格式

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| SY01 | 客戶編號 | 1-5 | 5 | 文數字 | 主鍵1 | 參考SI01欄位，客戶編號 |
| SY02 | 發票號碼 | 6-13 | 8 | 文數字 | 主鍵2 | 參考SI02欄位，發票號碼 |
| SY03 | 門市編號 | 14-21 | 8 | 文數字 | - | 參考SI08欄位，門市編號 |
| SY07 | 營業稅額 | 22-32 | 11,2 | 數值 | - | 參考SI27欄位，營業稅額 |
| SY08 | 退貨稅額 | 33-43 | 11,2 | 數值 | - | 參考SI28欄位，退貨稅額 |
| SYXX | 建立日期 | 44-51 | 8,0 | 數值 | - | 參考SIXX欄位，建立日期 |
| SYYY | 建立時間 | 52-57 | 6,0 | 數值 | - | 參考SIYY欄位，建立時間 |
| SYZZ | 建立者 | 58-67 | 10 | 文字 | - | 參考SIZZ欄位，建立者 |

## 5. 主鍵欄位

- **主鍵**：SY01+SY02 (客戶編號+發票號碼)
- **索引類型**：UNIQUE
- **排序方式**：遞增排序

## 6. 索引資料

| 索引名稱 | 索引欄位 | 索引類型 | 說明 |
|----------|----------|----------|------|
| PRIMARY | SY01+SY02 | UNIQUE | 主索引，客戶編號+發票號碼 |

## 7. 使用說明

1. **稅額計算**：系統開立發票時自動計算稅額
2. **資料查詢**：支援按客戶及發票號碼查詢稅額資訊
3. **稅務申報**：提供媒體申報作業資料來源
4. **退貨處理**：記錄退貨相關稅額調整
5. **稽核追蹤**：保留完整的稅額異動軌跡

## 8. 備註

- 複合主鍵確保客戶發票的唯一性
- 營業稅額與退貨稅額分別記錄，支援不同稅務處理需求
- 與發票主檔整合，提供完整的發票稅務資訊
- 所有金額欄位保留兩位小數精度
- 支援媒體申報系統的稅額資料傳輸需求 