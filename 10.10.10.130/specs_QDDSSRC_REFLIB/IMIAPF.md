# IMIAPF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | IMIAPF |
| 檔案類型 | 實體檔案 (Physical File) |
| 檔案用途 | 產品庫存主檔 |
| 紀錄格式 | IA0 |
| 參考檔案 | RERF |
| 主鍵欄位 | IA01+IA02+IA03 |
| 排序方式 | 升序 |
| 特殊屬性 | UNIQUE |

## 2. 檔案功能說明

IMIAPF是產品庫存管理系統的核心實體檔案：

1. **主要功能**：儲存產品庫存主要資料
2. **參考檔案**：使用REF(RERF)定義欄位規格
3. **系統用途**：庫存管理系統的基礎資料檔案
4. **索引設計**：使用IA01+IA02+IA03的複合主鍵
5. **存取特性**：按客戶代號、產品代號、產品名稱的順序排列
6. **資料完整性**：具有UNIQUE屬性確保記錄唯一性

## 3. 系統檔案清單

| 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|------|
| IMIAPF | 實體檔案 | 產品庫存主檔實體檔案（本檔案） |
| IMIALF | 邏輯檔案 | 產品庫存主檔邏輯檔案（標準排序） |
| IMIALF01 | 邏輯檔案 | 產品庫存主檔邏輯檔案（產品名稱優先） |
| IMIALF02 | 邏輯檔案 | 產品庫存主檔邏輯檔案（產品代號優先） |
| IMIALF03 | 邏輯檔案 | 產品庫存主檔邏輯檔案（盤點專用） |
| IMIALF04 | 邏輯檔案 | 產品庫存主檔邏輯檔案（精簡版） |
| RERF | 參考檔案 | 欄位定義參考檔案 |

## 4. 紀錄格式

| 格式名稱 | 說明 |
|----------|------|
| IA0 | 產品庫存主記錄格式 |

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明

本實體檔案使用REF(RERF)參考檔案定義欄位規格：

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 說明 |
|----------|----------|------|------|------|------|------|
| IA01 | 客戶代號 | 1 | R | - | 主鍵 | 客戶代號（第一排序鍵） |
| IA02 | 產品代號 | 2 | R | - | 主鍵 | 產品代號（第二排序鍵） |
| IA03 | 產品名稱 | 3 | R | - | 主鍵 | 產品名稱（第三排序鍵） |
| IA04 | 產品規格 | 4 | R | - | - | 產品規格說明 |
| IA05 | 產品類別 | 5 | R | - | - | 產品類別代碼 |
| IA06 | 安全庫存 | 6 | R | - | - | 安全庫存數量 |
| IA07 | 開帳數量 | 7 | R | - | - | 期初庫存數量 |
| IA08 | 現有數量 | 8 | R | - | - | 目前庫存數量 |
| IA09 | 保留數量 | 9 | R | - | - | 保留庫存數量 |
| IA10 | 可用數量 | 10 | R | - | - | 可用庫存數量 |
| IAXX | 異動日期 | 11 | 8 | 日期 | - | 最後異動日期 |
| IAYY | 異動時間 | 12 | R | - | - | 最後異動時間 |
| IAZZ | 異動人員 | 13 | R | - | - | 最後異動人員 |

*註：R表示參考RERF檔案的欄位定義*

## 6. 主鍵欄位

本實體檔案的主鍵欄位為：
- IA01（客戶代號）
- IA02（產品代號）
- IA03（產品名稱）

### 主鍵特性：
- **IA01（客戶代號）**：第一層分類，按客戶代號排序
- **IA02（產品代號）**：第二層分類，產品代號排序
- **IA03（產品名稱）**：第三層分類，產品名稱排序
- **UNIQUE屬性**：確保每筆記錄的唯一性

## 7. 索引資料

| 索引名稱 | 索引鍵 | 排序 | 用途說明 |
|----------|--------|------|----------|
| 主索引 | IA01+IA02+IA03 | 升序 | 客戶產品庫存查詢 |

### 索引特性：
- **複合索引**：三個欄位組成的複合主鍵
- **階層式排序**：客戶代號→產品代號→產品名稱的三層排序
- **唯一性索引**：具有UNIQUE屬性確保記錄不重複

## 8. 備註

1. **實體檔案特性**：
   - 產品庫存管理系統的核心實體檔案
   - 使用REF(RERF)參考檔案定義欄位規格
   - 具有UNIQUE屬性確保資料完整性
2. **主鍵設計**：
   - 複合主鍵：IA01+IA02+IA03（客戶代號+產品代號+產品名稱）
   - UNIQUE屬性確保每個客戶的每個產品記錄唯一
   - 支援多客戶多產品的庫存管理
3. **參考檔案**：
   - 使用REF(RERF)統一欄位定義
   - 確保與系統其他檔案的欄位一致性
   - 便於維護和標準化管理
4. **庫存管理功能**：
   - IA06：安全庫存（庫存警戒線）
   - IA07：開帳數量（期初庫存）
   - IA08：現有數量（目前庫存）
   - IA09：保留數量（已預留庫存）
   - IA10：可用數量（實際可用庫存）
5. **異動追蹤**：
   - IAXX：異動日期（最後異動日期）
   - IAYY：異動時間（最後異動時間）
   - IAZZ：異動人員（最後異動人員）
6. **邏輯檔案支援**：
   - IMIALF：標準排序（IA01+IA02+IA03）
   - IMIALF01：產品名稱優先（IA03+IA02+IA01）
   - IMIALF02：產品代號優先（IA02+IA03+IA01）
   - IMIALF03：盤點專用（IA02+IA01+IA03）
   - IMIALF04：精簡版（僅選定欄位，IA03排序）
7. **系統整合**：
   - 作為庫存管理系統的基礎檔案
   - 支援多種邏輯檔案的不同存取路徑
   - 與庫存異動、盤點等相關檔案整合
8. **資料完整性**：
   - UNIQUE屬性防止重複記錄
   - 複合主鍵確保客戶產品組合唯一
   - 參考檔案確保欄位定義一致
9. **業務應用**：
   - 庫存查詢和管理
   - 庫存異動記錄
   - 安全庫存監控
   - 盤點作業支援
10. **檔案關係**：
    - 實體檔案：IMIAPF（本檔案）
    - 參考檔案：RERF（欄位定義）
    - 邏輯檔案：IMIALF系列（存取路徑）
11. **存取效能**：
    - 複合主鍵支援高效查詢
    - 多個邏輯檔案提供不同存取路徑
    - UNIQUE索引提高查詢效率
12. **資料安全**：
    - UNIQUE屬性確保資料唯一性
    - 異動追蹤功能提供審計軌跡
    - 參考檔案確保資料標準化
13. **維護特性**：
    - 使用參考檔案便於欄位維護
    - 多個邏輯檔案提供靈活存取
    - 標準化設計便於系統擴展
14. **系統價值**：
    - 作為庫存管理系統的核心檔案
    - 提供完整的產品庫存資訊
    - 支援多維度的庫存分析和管理
15. **特殊功能**：
    - 支援多客戶庫存管理
    - 提供完整的庫存數量追蹤
    - 具備異動歷程記錄功能
16. **庫存控制**：
    - 安全庫存設定（IA06）
    - 保留數量管理（IA09）
    - 可用數量計算（IA10）
    - 支援庫存預警機制
17. **資料結構**：
    - 三層主鍵設計（客戶→產品→名稱）
    - 完整的庫存數量欄位
    - 異動追蹤欄位
    - 參考檔案標準化
18. **應用範圍**：
    - 庫存管理作業
    - 進銷存系統
    - 盤點作業
    - 庫存分析報表
    - 安全庫存監控