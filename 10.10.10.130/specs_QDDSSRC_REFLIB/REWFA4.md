# REWFA4 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | REWFA4 |
| 檔案類型 | 實體檔 (PF) |
| 檔案說明 | 專櫃五日轉檔 |
| 主索引鍵 | ST01+ST03+ST04+STACOD |
| 參照檔案 | RERF |
| 建立日期 | (依實際建立日期填入) |
| 維護人員 | (依實際維護人員填入) |

## 2. 檔案功能說明

此實體檔案用於專櫃五日轉檔作業，管理專櫃產品的庫存數量與銷售數量，支援可用量計算與產品狀態控制。

### 主要功能
- 管理專櫃產品庫存資料
- 計算產品可用數量
- 統計銷售與其他數量
- 控制產品狀態代碼

## 3. 系統檔案清單

| 檔案名稱 | 檔案類型 | 說明 | 關聯 |
|----------|----------|------|------|
| REWFA4 | PF | 專櫃五日轉檔 | 主檔案 |
| RERF | PF | 參照檔案 | REF參照 |

## 4. 記錄格式

### 記錄格式名稱：WFA40

| 格式說明 | 記錄長度 | 參照檔案 |
|----------|----------|----------|
| 專櫃五日轉檔記錄格式 | (依欄位定義計算) | RERF |

## 5. 欄位規格

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| ST01 | 專櫃代碼 | 1 | R | 文字 | KEY | 主鍵欄位，專櫃編號 |
| ST03 | PLU代碼 | 2 | R | 文字 | KEY | 主鍵欄位，PLU編號 |
| ST04 | 產品代碼 | 3 | R | 文字 | KEY | 主鍵欄位，產品編號 |
| PTOT1 | 銷售數量 | 4 | 9 | 數值 | 0 | 銷售數量統計 |
| IA10 | 庫存可用量 | 5 | R | 數值 | | 庫存可用量，參照IA10 |
| PTOT2 | 其他數量 | 6 | 9 | 數值 | 0 | 其他數量統計 |
| STACOD | 產品狀態代碼 | 7 | 1A | 文字 | KEY | 主鍵欄位，狀態控制 |

## 6. 主鍵欄位

| 欄位代號 | 欄位名稱 | 排序 | 說明 |
|----------|----------|------|------|
| ST01 | 專櫃代碼 | 升序 | 專櫃識別 |
| ST03 | PLU代碼 | 升序 | PLU識別 |
| ST04 | 產品代碼 | 升序 | 產品識別 |
| STACOD | 產品狀態代碼 | 升序 | 狀態控制 |

## 7. 索引資料

### 主要索引
- **索引名稱**：主鍵索引
- **索引欄位**：ST01+ST03+ST04+STACOD
- **索引類型**：複合索引
- **唯一性**：是

### 檔案特性
- REF(RERF)：欄位定義參照RERF檔案
- 狀態代碼控制機制

## 8. 備註

### 特殊說明
- 此檔案為專櫃五日轉檔作業檔
- 四重複合主鍵精確控制記錄
- 產品狀態代碼提供狀態管理
- 使用 REF(RERF) 參照外部檔案定義

### 五日轉檔機制
檔案設計支援五日轉檔作業：
- **專櫃管理**：區分不同專櫃
- **PLU管理**：支援PLU編碼系統
- **產品管理**：精確到產品層級
- **狀態控制**：產品狀態分類管理

### 狀態代碼說明
根據註解資訊：
- **'A'**：可用量計算
- **'B'**：銷售數量統計
- 其他狀態代碼需依實際業務定義

### 檔案用途
- 用於專櫃五日轉檔作業
- 支援庫存數量統計
- 提供可用量計算基礎
- 管理產品銷售狀態

### 參照檔案說明
使用 REF(RERF) 參照：
- 欄位定義統一參照RERF檔案
- IA10 欄位參照庫存系統
- 確保欄位規格的一致性

### 維護注意事項
- 四重複合主鍵確保記錄唯一性
- 狀態代碼需維護正確性
- 數量欄位需確保計算準確性
- 定期檢核專櫃轉檔資料

### 系統應用
- 用於專櫃管理系統
- 支援庫存管理作業
- 提供銷售統計基礎
- 配合PLU管理系統

### 相關作業
- 專櫃五日轉檔作業
- 庫存統計作業
- 銷售分析作業
- PLU管理作業

### 技術特性
- 使用外部參照(REF)確保資料一致性
- 四重複合主鍵提供精確控制
- 狀態代碼機制靈活管理
- 數量統計欄位設計合理

### 業務流程整合
- 與專櫃管理流程整合
- 支援庫存控制作業
- 配合銷售統計系統
- 提供轉檔作業基礎

### 專櫃管理特性
- 多專櫃支援
- PLU與產品雙重編碼
- 狀態化管理機制
- 數量統計功能

### 庫存控制功能
- 可用量計算
- 銷售數量統計
- 其他數量管控
- 庫存狀態追蹤

### 轉檔作業支援
- 五日週期轉檔
- 專櫃別資料轉移
- 狀態化資料處理
- 數量彙總計算

### 數量統計機制
- **PTOT1**：銷售數量統計
- **PTOT2**：其他數量統計
- **IA10**：庫存可用量參照
- 支援多種數量類型統計

### PLU管理整合
- 支援PLU編碼系統
- PLU與產品代碼對應
- 專櫃PLU管理
- PLU銷售追蹤

### 狀態管理機制
- 產品狀態分類
- 可用量狀態控制
- 銷售狀態統計
- 狀態驅動的業務邏輯 