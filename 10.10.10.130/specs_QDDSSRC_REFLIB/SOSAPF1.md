# SOSAPF1 檔案規格書

## 1. 基本資料
- 檔名: SOSAPF1
- 類型: PF (Physical File)
- 說明: 通路型態產品報價資料檔
- 主鍵: SA01+SA02+SA03+SA04+SA05
- 建立日期: (待補)
- 最後修改日期: (待補)
- 參考檔: RERF
- 格式: REWF03
- 索引約束: UNIQUE

## 2. 檔案功能說明
此實體檔案為通路型態產品報價資料檔，提供以下功能：
- 記錄通路型態的產品報價資訊（備份版本）
- 提供通路管理的產品定價備份資料
- 支援通路策略的報價設定備份
- 記錄不同通路的配送價格與轉換率
- 支援通路型態的報價管理備份
- 提供產品報價的通路分析備份
- 支援通路管理的價格政策備份
- 記錄通路報價的確認狀態備份
- 支援產品管理的通路定價備份
- 提供通路型態報價的備份實體檔案

## 3. 系統檔案清單
- 主要實體檔: SOSAPF1 (通路型態產品報價資料檔)
- 主版實體檔: SOSAPF (通路型態產品報價資料檔)
- 相關邏輯檔: SOSALF、SOSALF09
- 參考檔: RERF

## 4. 紀錄格式
實體檔案記錄格式SA0，依SA01+SA02+SA03+SA04+SA05五層複合主鍵排序，記錄通路型態產品報價的完整資訊。

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明
| 欄位代號 | 名稱 | 位置 | 長度 | 屬性 | 檢核說明 |
|----------|------|------|------|------|----------|
| SA01 | 產品代號 | 1 | REF | 參考欄位 | 主鍵1，產品代號 |
| SA02 | 通路 | 待計算 | REF | 參考欄位 | 主鍵2，通路代號 |
| SA03 | 型態 | 待計算 | REF | 參考欄位 | 主鍵3，型態代號 |
| SA04 | 包裝記號 | 待計算 | REF | 參考欄位 | 主鍵4，包裝類型(N-一般包裝/S-特殊包裝/A-配送) |
| SA05 | 生效日期 | 待計算 | REF | 參考欄位 | 主鍵5，生效日期(修改歷史:B2CHKA) |
| SA06 | 包裝率 | 待計算 | REF | 參考欄位 | 包裝轉換率，計算公式: 量單位÷重量×100 |
| SA07 | 配送價格－配送金額 | 待計算 | REF | 參考欄位 | 配送價格金額1 |
| SA08 | 配送價格－回轉換率 | 待計算 | REF | 參考欄位 | 配送價格轉換率1 |
| SA09 | 配送價格－配送金額 | 待計算 | REF | 參考欄位 | 配送價格金額2 |
| SA10 | 配送價格－回轉換率 | 待計算 | REF | 參考欄位 | 配送價格轉換率2 |
| SA11 | 配送價格－配送金額 | 待計算 | REF | 參考欄位 | 配送價格金額3 |
| SA12 | 配送價格－回轉換率 | 待計算 | REF | 參考欄位 | 配送價格轉換率3 |
| SA13 | 異動日期 | 待計算 | REF | 參考欄位 | 異動日期(修改歷史:B2CHKA) |
| SA14 | 待確認記號 | 待計算 | REF | 參考欄位 | 確認狀態('*'-待確認/'P'-已列印/' '-已確認) |
| SAXX | 異動日期 | 待計算 | REF | 參考欄位 | 異動日期(修改歷史:B2CHKA) |
| SAYY | 異動時間 | 待計算 | REF | 參考欄位 | 異動時間 |
| SAZZ | 異動者 | 待計算 | REF | 參考欄位 | 異動人員 |

## 6. 主鍵欄位
- 主鍵: SA01+SA02+SA03+SA04+SA05
  - SA01: 產品代號
  - SA02: 通路代號
  - SA03: 型態代號
  - SA04: 包裝記號
  - SA05: 生效日期
- 約束類型: 五層複合主鍵，UNIQUE約束

## 7. 索引資料
- 主要索引: SA01+SA02+SA03+SA04+SA05 (依產品+通路+型態+包裝+生效日期)
- 索引類型: 實體檔案索引
- 排序特性: 
  - 第一層: 產品代號 (SA01)
  - 第二層: 通路代號 (SA02)
  - 第三層: 型態代號 (SA03)
  - 第四層: 包裝記號 (SA04)
  - 第五層: 生效日期 (SA05)

## 8. 備註
- 此實體檔案用於通路型態產品報價管理（備份版本）
- 記錄SA0為實體檔案記錄格式名稱
- 格式標識: REWF03
- 與SOSAPF完全相同的結構，可能為備份或測試版本
- 使用UNIQUE約束確保主鍵唯一性
- 包含B2CHKA修改歷史標記的欄位
- SA04包裝記號定義：N-一般包裝、S-特殊包裝、A-配送
- SA06包裝率計算公式：量單位÷重量×100
- SA14確認狀態定義：'*'-待確認、'P'-已列印、' '-已確認
- 支援三組配送價格設定（SA07-SA12）
- 記錄完整的異動追蹤資訊（SAXX、SAYY、SAZZ）
- 用於通路管理的報價設定備份作業
- 支援通路策略的價格管理備份
- 記錄通路型態的定價軌跡備份
- 提供通路管理的備份資料檢視
- 支援通路政策的報價實施備份
- 用於通路報價的維護與更新備份
- 提供通路分析的備份基礎資料
- 支援通路管理的備份標準作業
- 記錄通路報價的完整備份資訊
- 用於通路決策的備份支援作業
- 提供通路報價管理的備份資料平台
- 支援通路策略的備份執行與分析
- 記錄通路報價的備份標準設定
- 用於通路報價的備份統一管理
- 提供通路維護的備份標準化作業
- 支援企業級的通路報價備份管理
- 記錄通路型態產品報價的完整備份軌跡 