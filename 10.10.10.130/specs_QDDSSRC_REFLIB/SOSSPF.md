# SOSSPF - 人工發票重開控制檔規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | SOSSPF |
| 檔案類型 | PF (實體檔) |
| 檔案說明 | 人工發票重開控制檔 |
| 主鍵 | SS01+SS02 |
| 參考檔案 | RERF |
| 唯一性 | UNIQUE |
| 修改記錄 | M004 (000417) - DUTY增修處理 |

## 2. 檔案功能說明

SOSSPF檔案用於管理人工發票重開控制作業，記錄原始發票與重開發票的對應關係。主要功能包括：

- 發票重開控制管理
- 原始發票與重開發票對應
- 發票重開流程控制
- 商品相關發票處理
- 完整的發票重開審計追蹤

## 3. 系統檔案清單

- **SOSSPF**：人工發票重開控制檔（主檔）
- **RERF**：參考檔案

## 4. 紀錄格式

### SS0記錄格式

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| SS01 | 原發票序列記號 | | R | | | 參考RERF檔案 |
| SS02 | 原發票號碼 | | R | | | 參考RERF檔案 |
| SS03 | 人工發票序列記號 | | R | | | 參考RERF檔案 |
| SS04 | 人工發票號碼 | | R | | | 參考RERF檔案 |
| SS06 | 送貨日期 | | R | 8,0 | | 格式YYYYMMDD |
| SS08 | 商品代號 | | R | | | 參考RERF檔案 |
| SS09 | 部門代號 | | R | | | 參考RERF檔案 |
| SS10 | 商品渠道號 | | R | | | 參考RERF檔案 |
| SS11 | 多重渠道 | | R | | | 多重銷售渠道控制 |
| SS16 | 傳送代號 | | R | | | S或R模式，用於傳送控制 |
| SS20 | 供應商記號 | | R | | | 'V'-已供應 |
| SS21 | 原發票日期 | | R | 8,0 | | 格式YYYYMMDD |
| SS22 | 人工發票日期 | | R | 8,0 | | 格式YYYYMMDD |
| SS25 | 人工發票門市稅 | | R | | | 參考RERF檔案 |
| SS29 | 人工發票系統稅 | | | 7,0 | | 系統計算稅額 |
| SS31 | 人工同步稅 | | R | | | 參考SI23欄位 |
| SS26 | 人工營業稅稅 | | R | | | 參考RERF檔案 |
| SS27 | 原發票門市稅 | | R | | | 參考RERF檔案 |
| SS30 | 原發票系統稅 | | | 7,0 | | 系統計算稅額 |
| SS32 | 原同步稅 | | R | | | 參考SI23欄位 |
| SS28 | 原營業稅稅 | | R | | | 參考RERF檔案 |
| SS35 | 確認確認 | | R | 8,0 | | 確認狀態控制 |
| SS36 | 稅後標註 | | | 1 | | 'V'=稅後 |
| SSXX | 建立日期 | | R | 8,0 | | 格式YYYYMMDD |
| SSYY | 建立時間 | | R | | | 參考RERF檔案 |
| SSZZ | 建立者 | | R | | | 參考RERF檔案 |

## 5. 主鍵欄位

- **SS01** (原發票序列記號)
- **SS02** (原發票號碼)

## 6. 索引資料

主要索引：SS01+SS02，支援以下查詢：
- 按原發票序列記號查詢
- 按原發票號碼查詢
- 關聯人工發票對應

## 7. 使用說明

1. 檔案用於人工發票重開控制
2. 記錄原始發票與重開發票對應關係
3. 支援多種稅額計算處理
4. 提供發票重開流程控制
5. 包含完整的審計追蹤功能

## 8. 備註

- M004修改：增加DUTY稅額處理功能
- 包含多種稅額計算欄位
- 支援供應商狀態控制
- 檔案支援UNIQUE屬性確保資料唯一性
- 傳送代號用於系統間資料同步 