# PA#CPF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | PA#CPF |
| 檔案類型 | 實體檔案 (Physical File) |
| 檔案用途 | 通路業務類型檔案 |
| 紀錄格式 | #C0 |
| 主鍵欄位 | #C01 + #C02 |
| 排序方式 | 升序 |
| 參照檔案 | RERF |
| 特殊屬性 | UNIQUE |

## 2. 檔案功能說明

PA#CPF是通路業務類型的管理檔案：

1. **主要功能**：儲存通路和業務類型的對應關係
2. **資料內容**：包含通路代號、業務代號、業務說明等
3. **系統用途**：作為通路業務分類管理的基礎檔案
4. **索引設計**：以通路代號和業務代號組成複合主鍵
5. **業務管理**：支援多通路多業務類型的管理需求

## 3. 系統檔案清單

| 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|------|
| PA#CPF | 實體檔案 | 通路業務類型檔（主檔案） |
| RERF | 參考檔案 | 參考欄位定義檔 |

## 4. 紀錄格式

| 格式名稱 | 說明 |
|----------|------|
| #C0 | 通路業務類型主記錄格式 |

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 說明 |
|----------|----------|------|------|------|------|------|
| #C01 | 通路代號 | 1 | - | 字元 | 參考#C01/主鍵 | 通路代號 |
| #C02 | 業務代號 | 2 | - | 字元 | 參考#C02/主鍵 | 業務代號 |
| #C03 | 業務說明 | 3 | - | 字元 | 參考#C03 | 業務說明 |
| #CXX | 異動日期 | 4 | 8 | 數值 | B2CHKA/參考#AXX | 異動日期 |
| #CYY | 異動時間 | 5 | - | 字元 | 參考#AYY | 異動時間 |
| #CZZ | 異動操作者 | 6 | - | 字元 | 參考#AZZ | 異動操作者 |

## 6. 主鍵欄位

本實體檔案的主鍵欄位為：
- #C01（通路代號） + #C02（業務代號）

### 主鍵特性：
- **複合主鍵**：由通路代號和業務代號組成
- **UNIQUE屬性**：確保通路業務組合的唯一性
- **階層結構**：支援通路下多種業務類型的管理

## 7. 索引資料

| 索引名稱 | 索引鍵 | 排序 | 用途說明 |
|----------|--------|------|----------|
| 主索引 | #C01 + #C02 | 升序 | 通路業務代號查詢 |

### 索引特性：
- **複合索引**：以通路代號和業務代號作為存取路徑
- **唯一性**：確保通路業務組合的唯一性
- **分類查詢**：支援按通路查詢業務類型

## 8. 備註

1. **通路業務管理**：管理不同通路下的業務類型分類
2. **階層結構設計**：
   - #C01：通路代號（上層分類）
   - #C02：業務代號（下層分類）
   - #C03：業務說明（詳細說明）
3. **複合主鍵設計**：
   - 通路代號 + 業務代號形成唯一識別
   - 支援一個通路下多種業務類型
   - 防止重複的業務定義
4. **異動追蹤**：
   - #CXX：異動日期（8位數值，B2CHKA檢核）
   - #CYY：異動時間
   - #CZZ：異動操作者
   - 完整記錄通路業務的異動歷史
5. **參考欄位設計**：
   - 使用REF(RERF)參考檔案定義
   - #CXX參考#AXX欄位（REFFLD(#AXX)）
   - #CYY參考#AYY欄位（REFFLD(#AYY)）
   - #CZZ參考#AZZ欄位（REFFLD(#AZZ)）
   - 與PA#APF檔案的異動欄位保持一致性
6. **UNIQUE約束**：
   - 複合主鍵確保通路業務組合的唯一性
   - 防止重複的通路業務定義
7. **業務應用**：
   - 通路管理
   - 業務分類
   - 銷售統計
   - 績效分析
   - 組織架構管理
8. **系統整合**：
   - 與通路檔案的關聯
   - 與業務檔案的關聯
   - 支援多維度業務分析
9. **資料完整性**：
   - 複合主鍵約束
   - 參考完整性檢核
   - 日期格式檢核（B2CHKA）
10. **查詢效率**：
    - 複合索引提供高效查詢
    - 支援按通路或業務的快速查詢
    - 適合業務統計和分析需求
11. **維護特性**：
    - 支援通路業務的新增、修改、刪除
    - 完整的異動記錄
    - 階層式管理便於維護
12. **業務分析支援**：
    - 通路業績分析
    - 業務類型統計
    - 跨通路比較分析
    - 業務發展趨勢分析
13. **組織管理**：
    - 支援多通路架構
    - 業務類型標準化
    - 組織績效管理
14. **擴展性設計**：
    - 複合主鍵支援未來擴展
    - 彈性的業務分類架構
    - 適應業務發展需求 