# MTMFLF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | MTMFLF |
| 檔案描述 | 禮盒結構資料檔 (邏輯檔) |
| 檔案類型 | LF (Logical File) |
| 記錄格式 | MF0 |
| 主鍵 | MF01 + MF02 (禮盒代號 + 產品代號) |
| 實體檔案 | MTMFPF |
| 檔案屬性 | 邏輯檢視 |

## 2. 檔案功能說明

MTMFLF 為 MTMFPF 禮盒結構資料檔的邏輯檔案，提供：
- 禮盒組成結構的標準檢視
- 禮盒與產品對應關係查詢
- 成本計算支援檢視
- 禮盒管理應用程式存取介面

## 3. 系統檔案清單

| 檔案代號 | 檔案名稱 | 說明 |
|----------|----------|------|
| MTMFLF | 禮盒結構資料邏輯檔 | 主檔 |
| MTMFPF | 禮盒結構資料實體檔 | 實體檔案 |
| RERF | 參考檔案 | 欄位定義參考 |

## 4. 紀錄格式

### 記錄格式：MF0 (繼承自 MTMFPF)

## 5. 欄位規格

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| MF01 | 禮盒代號 | 1-9 | 9 | A | R | 主鍵，禮盒識別碼 |
| MF02 | 產品代號 | 10-18 | 9 | A | R | 主鍵，組成產品代號 |
| MF03 | 單價 | 19-29 | 11 | N | R | 產品單價，2位小數 |
| MF04 | 數量 | 30-40 | 11 | N | R | 組成數量，2位小數 |
| MF05 | 合計 | 41-51 | 11 | N | R | 小計金額，2位小數 |
| MF06 | FOB成本 | 52-62 | 11 | N | R | FOB單位成本 |
| MF07 | 必需品 | 63 | 1 | A | R | 'Y'-必需品 |
| MF08 | FHI成本 | 64-74 | 11 | N | R | FHI單位成本 |
| MF09 | DUTY成本 | 75-85 | 11 | N | R | DUTY單位成本 |
| MF10 | 確認標記 | 86 | 1 | A | R | 'V'-已確認 |

## 6. 主鍵欄位

| 鍵值序號 | 欄位代號 | 欄位名稱 | 排序 |
|----------|----------|----------|------|
| 1 | MF01 | 禮盒代號 | 升序 |
| 2 | MF02 | 產品代號 | 升序 |

## 7. 索引資料

### 主要索引
- **索引名稱**：複合主鍵索引
- **索引欄位**：MF01 + MF02
- **索引類型**：PRIMARY
- **說明**：禮盒代號與產品代號升序排序

### 輔助索引
1. **禮盒索引**：MF01 (禮盒代號)
2. **產品索引**：MF02 (產品代號)
3. **確認索引**：MF10 (確認標記)

### 邏輯檢視特性
- **基底檔案**：MTMFPF
- **檢視類型**：完整記錄檢視
- **排序方式**：MF01 + MF02 升序

## 8. 備註

### 設計考量
1. 此檔案為 MTMFPF 的邏輯檢視檔案
2. 提供禮盒組成結構的標準查詢介面
3. 支援禮盒成本計算與管理

### 參考關聯
- **實體檔案**：MTMFPF (禮盒結構資料檔)
- **產品檔案**：MTMAPF (產品基本資料檔)
- **參考檔案**：RERF (欄位定義)

### 業務邏輯
1. 每個禮盒可包含多個產品
2. 必需品標記影響禮盒組裝規則
3. 成本計算包含 FOB、FHI、DUTY 三個層次
4. 確認標記控制資料異動權限

### 資料完整性
1. 資料內容完全依賴 MTMFPF 實體檔案
2. 禮盒代號與產品代號組合必須唯一
3. 產品代號需對應 MTMAPF 中的有效產品
4. 索引與實體檔案保持同步

### 使用注意事項
1. 此為邏輯檔案，不可直接寫入資料
2. 所有異動需透過 MTMFPF 實體檔案進行
3. 禮盒結構異動需重新計算成本
4. 確認後的資料異動需特殊權限 