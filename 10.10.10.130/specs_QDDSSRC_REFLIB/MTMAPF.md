# MTMAPF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | MTMAPF |
| 檔案類型 | 實體檔案 (Physical File) |
| 檔案用途 | 產品基本資料檔 |
| 紀錄格式 | MA0 |
| 主鍵欄位 | MA01 |
| 排序方式 | 升序 |
| 參照檔案 | RERF |
| 特殊屬性 | UNIQUE |

## 2. 檔案功能說明

MTMAPF是產品基本資料的主檔案：

1. **主要功能**：儲存產品完整的基本資料和成本資訊
2. **資料內容**：包含產品代號、名稱、規格、成本、庫存控制等完整資訊
3. **系統用途**：作為所有產品相關作業的主要參考檔案
4. **索引設計**：以產品代號為唯一主鍵
5. **成本管理**：支援FOB、FHI、DUTY三種成本類型

## 3. 系統檔案清單

| 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|------|
| MTMAPF | 實體檔案 | 產品基本資料檔（主檔案） |
| RERF | 參考檔案 | 參考欄位定義檔 |

## 4. 紀錄格式

| 格式名稱 | 說明 |
|----------|------|
| MA0 | 產品基本資料主記錄格式 |

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 說明 |
|----------|----------|------|------|------|------|------|
| MA01 | 產品代號 | 1 | - | 字元 | 參考MA01/主鍵 | 產品代號 |
| MA02 | 條碼資料 | 2 | - | 字元 | 參考MA02 | 條碼資料 |
| MA03 | 產品名稱 | 3 | - | 字元 | 參考MA03 | 產品名稱 |
| MA04 | 包裝單位數量 | 4 | - | 數值 | 參考MA04 | 包裝單位數量 |
| MA05 | 包裝單位數量 | 5 | - | 數值 | 參考MA05 | 包裝單位數量 |
| MA06 | 包裝名稱 | 6 | - | 字元 | 參考MA06 | 包裝名稱 |
| MA07 | 產品性質 | 7 | - | 字元 | 參考MA07 | 產品性質 |
| MA08 | 產品項次 | 8 | - | 字元 | 參考MA08 | 產品項次 |
| MA09 | 產品容量 | 9 | - | 字元 | 參考MA09 | 產品容量 |
| MA10 | 產品品牌 | 10 | - | 字元 | 參考MA10 | 產品品牌 |
| MA11 | 產品種類 | 11 | - | 字元 | 參考MA11 | 產品種類 |
| MA12 | 主要供應商 | 12 | - | 字元 | 參考MA12 | 主要供應商 |
| MA13 | 保存期 | 13 | - | 字元 | 參考MA13 | 保存期 |
| MA14 | 重量單位 | 14 | - | 字元 | 參考MA14 | 重量單位 |
| MA15 | 容量代號 | 15 | - | 字元 | 參考MA15 | 容量代號 |
| MA16 | 產品線別 | 16 | - | 字元 | 參考MA16 | 產品線別 |
| MA17 | 包裝類型 | 17 | - | 字元 | 參考MA17 | 包裝類型 |
| MA18 | 出貨日期 | 18 | - | 字元 | 參考MA18 | 出貨日期 |
| MA19 | 負責人員 | 19 | - | 字元 | 參考MA19 | 負責人員 |
| MA20 | 製造地 | 20 | - | 字元 | 參考MA20 | 製造地 |
| MA21 | 應收帳款會計科目 | 21 | - | 字元 | 參考MA21 | 應收帳款會計科目 |
| MA22 | 應收帳款會計科目 | 22 | - | 字元 | 參考MA22 | 應收帳款會計科目 |
| MA23 | 數量欄一 | 23 | - | 數值 | 參考MA23 | 數量欄一 |
| MA24 | 數量欄二 | 24 | - | 數值 | 參考MA24 | 數量欄二 |
| MA25 | 最低安全庫存量 | 25 | - | 數值 | 參考MA25 | 最低安全庫存量 |
| MA26 | F.O.B.-TOTAL | 26 | - | 數值 | 參考MA26 | FOB總成本 |
| MA27 | FHI-TOTAL | 27 | - | 數值 | 參考MA27 | FHI總成本 |
| MA28 | DUTY-TOTAL | 28 | - | 數值 | 參考MA28 | DUTY總成本 |
| MA29 | 保固保存數量 | 29 | - | 數值 | 參考MA29 | 保固保存數量 |
| MA30 | 緊急保存數量 | 30 | - | 數值 | 參考MA30 | 緊急保存數量 |
| MA31 | F.O.B.-UNIT | 31 | - | 數值 | 參考MA31 | FOB單位成本 |
| MA32 | FHI-UNIT | 32 | - | 數值 | 參考MA32 | FHI單位成本 |
| MA33 | DUTY-UNIT | 33 | - | 數值 | 參考MA33 | DUTY單位成本 |
| MA34 | 最新成本 | 34 | - | 數值 | 參考MA34 | 最新成本 |
| MA35 | 最小訂購數量 | 35 | - | 數值 | 參考MA35 | 最小訂購數量 |
| MA36 | 最大訂購數量 | 36 | - | 數值 | 參考MA36 | 最大訂購數量 |
| MA37 | 保固變更安全數量 | 37 | - | 數值 | 參考MA37 | 保固變更安全數量 |
| MA38 | 緊急變更安全數量 | 38 | - | 數值 | 參考MA38 | 緊急變更安全數量 |
| MA39 | 盤點最後日期 | 39 | 8 | 數值 | B2CHKA | 盤點最後日期 |
| MA40 | 歷史進貨平均單價出 | 40 | - | 數值 | 參考MA40 | 歷史進貨平均單價出 |
| MA41 | 新進進貨平均單價出 | 41 | - | 數值 | 參考MA41 | 新進進貨平均單價出 |
| MA42 | 促銷進貨平均單價出 | 42 | - | 數值 | 參考MA42 | 促銷進貨平均單價出 |
| MA43 | 贈品進貨平均單價出 | 43 | - | 數值 | 參考MA43 | 贈品進貨平均單價出 |
| MA44 | 試飲進貨平均單價出 | 44 | - | 數值 | 參考MA44 | 試飲進貨平均單價出 |
| MA45 | 歷史進貨平均單價入 | 45 | - | 數值 | 參考MA45 | 歷史進貨平均單價入 |
| MA46 | 新進進貨平均單價入 | 46 | - | 數值 | 參考MA46 | 新進進貨平均單價入 |
| MA47 | 促銷進貨平均單價入 | 47 | - | 數值 | 參考MA47 | 促銷進貨平均單價入 |
| MA48 | 贈品進貨平均單價入 | 48 | - | 數值 | 參考MA48 | 贈品進貨平均單價入 |
| MA49 | 試飲進貨平均單價入 | 49 | - | 數值 | 參考MA49 | 試飲進貨平均單價入 |
| MA53 | 建檔日期 | 53 | 8 | 數值 | B2CHKA | 建檔日期 |
| MA54 | 冷凍櫃 | 54 | - | 字元 | 參考MA54 | 冷凍櫃（Y-冷凍，空白-非冷凍） |
| MA55 | 可否退貨 | 55 | - | 字元 | 參考MA55 | 可否退貨（Y-可退貨，空白-不可退貨） |
| MA56 | 可否退貨 | 56 | - | 字元 | 參考MA56 | 可否退貨（Y-可退貨，空白-不可退貨） |
| MA57 | 自動訂貨 | 57 | - | 字元 | 參考MA57 | 自動訂貨（Y-自動訂貨，空白-非自動訂貨） |
| MA58 | 使用狀況 | 58 | - | 字元 | 參考MA58 | 使用狀況（A-ACTIVE，I-INACTIVE） |
| MA59 | 營業部 | 59 | 1 | 字元 | - | 營業部（D-直營，B-促銷，Z-新營） |
| MAXX | 異動日期 | 60 | 8 | 數值 | B2CHKA | 異動日期 |
| MAYY | 異動時間 | 61 | - | 字元 | 參考MAYY | 異動時間 |
| MAZZ | 異動操作者 | 62 | - | 字元 | 參考MAZZ | 異動操作者 |

## 6. 主鍵欄位

本實體檔案的主鍵欄位為：
- MA01（產品代號）

### 主鍵特性：
- **MA01（產品代號）**：唯一識別每個產品
- **UNIQUE屬性**：確保產品代號的唯一性

## 7. 索引資料

| 索引名稱 | 索引鍵 | 排序 | 用途說明 |
|----------|--------|------|----------|
| 主索引 | MA01 | 升序 | 產品代號查詢 |

### 索引特性：
- **唯一索引**：確保產品代號的唯一性
- **主要存取路徑**：所有產品查詢的基礎
- **系統整合**：與其他檔案的關聯基礎

## 8. 備註

1. **主檔案性質**：產品管理系統的核心檔案，所有產品相關作業的基礎
2. **成本管理體系**：
   - FOB成本：MA26（總成本）、MA31（單位成本）
   - FHI成本：MA27（總成本）、MA32（單位成本）
   - DUTY成本：MA28（總成本）、MA33（單位成本）
   - 最新成本：MA34
3. **庫存控制**：
   - MA25：最低安全庫存量
   - MA29：保固保存數量
   - MA30：緊急保存數量
   - MA35：最小訂購數量
   - MA36：最大訂購數量
   - MA37：保固變更安全數量
   - MA38：緊急變更安全數量
4. **產品分類**：
   - MA10：產品品牌
   - MA11：產品種類
   - MA08：產品項次
   - MA09：產品容量
   - MA15：容量代號
   - MA16：產品線別
5. **包裝資訊**：
   - MA04、MA05：包裝單位數量
   - MA06：包裝名稱
   - MA17：包裝類型
6. **供應商管理**：
   - MA12：主要供應商
   - MA20：製造地
7. **品質控制**：
   - MA13：保存期
   - MA54：冷凍櫃控制
   - MA55、MA56：退貨控制
8. **營運控制**：
   - MA58：使用狀況（A-ACTIVE，I-INACTIVE）
   - MA57：自動訂貨控制
   - MA59：營業部歸屬
9. **價格管理**：
   - MA40-MA49：各種進貨平均單價（歷史、新進、促銷、贈品、試飲）
   - 分為進價（入）和出價（出）
10. **日期管理**：
    - MA39：盤點最後日期（8位數值，B2CHKA檢核）
    - MA53：建檔日期（8位數值，B2CHKA檢核）
    - MAXX：異動日期（8位數值，B2CHKA檢核）
    - MA18：出貨日期
11. **異動追蹤**：
    - MAYY：異動時間
    - MAZZ：異動操作者
    - 完整的異動記錄機制
12. **會計整合**：
    - MA21、MA22：應收帳款會計科目
    - 支援會計系統整合
13. **參考欄位設計**：
    - 使用REF(RERF)參考檔案定義
    - 所有欄位都有對應的參考定義
    - 確保資料一致性和完整性
14. **業務應用**：
    - 產品基本資料維護
    - 庫存管理
    - 採購管理
    - 銷售管理
    - 成本分析
    - 會計處理
15. **系統特色**：
    - 完整的產品生命週期管理
    - 多維度成本控制
    - 彈性的庫存管理
    - 完善的異動追蹤
16. **資料完整性**：
    - UNIQUE主鍵約束
    - 參考完整性檢核
    - 日期格式檢核（B2CHKA） 