# SOS7PF 檔案規格書

## 1. 基本資料

| 欄位 | 內容 |
|------|------|
| 檔案名稱 | SOS7PF |
| 檔案描述 | 試飲收回活動客戶明細檔 |
| 檔案類型 | 實體檔案 (PF) |
| 記錄格式 | S70 |
| 關鍵字 | S702+S703+S704 |
| 作業系統 | AS/400 |
| 資料庫 | DB2/400 |
| 存取方式 | 索引存取 |

## 2. 檔案功能說明

試飲收回活動客戶明細檔記錄試飲商品收回活動的詳細客戶資訊與收回明細，管理試飲收回活動的執行狀況與客戶參與情形。本檔案支援試飲收回活動的完整管理流程，包含客戶資訊、收回明細、數量控制與多重備註欄位。

## 3. 系統檔案清單

| 相關檔案 | 檔案名稱 | 說明 |
|----------|----------|------|
| 主檔案 | SOS7PF | 試飲收回活動客戶明細檔 |
| 參考檔案 | RERF | 參考檔案 |
| 暫存檔 | SOS7PF2 | 試飲收回活動客戶明細暫存 |
| 相關檔案 | SOS6PF | 試飲訂單活動客戶明細檔 |

## 4. 紀錄格式

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| S701 | 客戶編號 | 1-5 | 5 | 文數字 | - | 參考SD01欄位，客戶編號 |
| S702 | 活動編號 | 6-13 | 8 | 文數字 | 主鍵1 | 參考SD02欄位，活動編號 |
| S703 | 商品編號 | 14-22 | 9 | 文數字 | 主鍵2 | 參考SD03欄位，商品編號 |
| S704 | 活動客戶代號 | 23-31 | 9 | 文字 | 主鍵3 | 活動客戶識別代號 |
| S705 | 收回數量 | 32-36 | 5,0 | 數值 | - | 試飲收回數量 |
| S706 | 文字一 | 37-48 | 12 | 文字 | - | 備註文字一 |
| S707 | 文字二 | 49-60 | 12 | 文字 | - | 備註文字二 |
| S708 | 文字三 | 61-72 | 12 | 文字 | - | 備註文字三 |
| S709 | 數字一 | 73-83 | 11,2 | 數值 | - | 備註數字一 |
| S710 | 數字二 | 84-94 | 11,2 | 數值 | - | 備註數字二 |
| S711 | 數字三 | 95-105 | 11,2 | 數值 | - | 備註數字三 |
| S712 | 文字說明一 | 106-135 | 30 | 輸出 | - | 文字說明一 |
| S713 | 文字說明二 | 136-165 | 30 | 輸出 | - | 文字說明二 |
| S714 | 文字說明三 | 166-195 | 30 | 輸出 | - | 文字說明三 |
| S715 | 狀態一 | 196 | 1 | 文字 | - | 收回狀態標記一 |
| S716 | 狀態二 | 197 | 1 | 文字 | - | 收回狀態標記二 |
| S717 | 狀態三 | 198 | 1 | 文字 | - | 收回狀態標記三 |
| S7XX | 建立日期 | 199-206 | 8,0 | 數值 | - | 建立日期 |
| S7YY | 建立時間 | 207-212 | 6,0 | 數值 | - | 建立時間 |
| S7ZZ | 建立者 | 213-222 | 10 | 文字 | - | 建立者 |

## 5. 主鍵欄位

- **主鍵**：S702+S703+S704 (活動編號+商品編號+活動客戶代號)
- **索引類型**：UNIQUE
- **排序方式**：遞增排序

## 6. 索引資料

| 索引名稱 | 索引欄位 | 索引類型 | 說明 |
|----------|----------|----------|------|
| PRIMARY | S702+S703+S704 | UNIQUE | 主索引，活動+商品+客戶 |

## 7. 使用說明

1. **收回活動管理**：記錄試飲商品收回活動的詳細執行資訊
2. **客戶追蹤**：管理參與收回活動的客戶明細
3. **數量控制**：記錄與控制試飲商品的收回數量
4. **多重備註**：支援豐富的收回備註與說明資訊
5. **狀態管理**：透過狀態欄位控制收回活動執行流程

## 8. 備註

- 三重主鍵確保收回活動客戶商品層級的唯一性
- 與試飲訂單活動檔案(SOS6PF)形成完整的試飲業務循環
- 提供豐富的備註欄位支援多樣化的收回活動管理需求
- 包含文字、數字、說明、狀態等多種類型的備註欄位
- 數字欄位保留兩位小數精度，文字說明採用輸出型態設計 