# WFJL01PF 檔案規格書

## 1. 基本資料

| 欄位 | 內容 |
|------|------|
| 檔案名稱 | WFJL01PF |
| 檔案描述 | 銷貨收入－暫存檔 |
| 檔案類型 | 實體檔案 (PF) |
| 記錄格式 | WFJL01R |
| 關鍵字 | JL0101+JL0102+JL0109+JL0103+JL0104+JL0105 |
| 作業系統 | AS/400 |
| 資料庫 | DB2/400 |
| 存取方式 | 索引存取 |

## 2. 檔案功能說明

WFJL01PF是傳票系統銷貨收入暫存檔，專門處理銷貨收入交易的暫存作業。本檔案記錄確認日期、單據編號、產品法規、編號、客戶別碼等關鍵資訊，並計算金額總計、稅前價格、統一發票等，為會計傳票處理提供銷貨收入的基礎資料。

## 3. 系統檔案清單

| 相關檔案 | 檔案名稱 | 說明 |
|----------|----------|------|
| 暫存檔 | WFJL01PF | 銷貨收入暫存檔 |
| 參考檔 | RERF | 參考欄位檔 |
| 相關檔 | WFJL02PF | 銷貨成本暫存檔 |
| 相關檔 | WFJL10PF | 傳票暫存檔 |

## 4. 紀錄格式

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| JL0101 | 確認日期 | 1-8 | 8,0 | 數值 | 主鍵1 | 確認日期 |
| JL0102 | 單據編號第一位 | 9-9 | 1 | 文字 | 主鍵2 | 單據編號第一位 |
| J0102$ | 舊制單據編號第一位 | 10-10 | 1 | 文字 | - | W=產銷,C=直銷,R=退回 |
| JL0103 | 產品法規 | 11-17 | 7 | 文字 | 主鍵4 | 產品法規代碼 |
| JL0104 | 編號 | 18-20 | 3 | 文字 | 主鍵5 | 編號 |
| JL0105 | 客戶別碼 | 21-32 | 12 | 文字 | 主鍵6 | 客戶別碼 |
| JL0106 | 金額總計 | 33-43 | 11,2 | 數值 | - | 金額總計(含稅價格) |
| JL0107 | 稅前價格 | 44-54 | 11,2 | 數值 | - | 稅前價格(價格稅前、退貨稅前) |
| JL0108 | 統一發票 | 55-65 | 11,2 | 數值 | - | 統一發票 |
| JL0109 | 單據編號第二位 | 66-66 | 1 | 文字 | 主鍵3 | 單據編號第二位 |

## 5. 主鍵欄位

- **主鍵**：JL0101+JL0102+JL0109+JL0103+JL0104+JL0105 (六重複合主鍵)
- **索引類型**：UNIQUE
- **排序方式**：遞增排序

## 6. 索引資料

| 索引名稱 | 索引欄位 | 索引類型 | 說明 |
|----------|----------|----------|------|
| PRIMARY | JL0101+JL0102+JL0109+JL0103+JL0104+JL0105 | UNIQUE | 主索引，銷貨收入複合鍵 |

## 7. 使用說明

1. **銷貨收入處理**：暫存銷貨收入交易資料進行後續會計處理
2. **傳票作業準備**：為會計傳票系統提供銷貨收入基礎資料
3. **客戶別碼管理**：支援不同客戶類型的收入分類
4. **稅額計算**：記錄含稅與稅前價格進行稅額計算
5. **業務類型區分**：透過單據編號區分產銷、直銷、退回等業務

## 8. 備註

- 使用UNIQUE屬性確保暫存資料的唯一性
- J0102$欄位說明：W=產銷、C=直銷、R=退回
- 客戶別碼代碼：A0001=退回、A0002=產銷、A0003=直銷、B類業務=特殊專櫃
- 參考RERF檔案進行欄位定義標準化
- 支援多種價格類型(含稅、稅前、發票)
- 為A1149系統會計傳票作業提供銷貨收入資料來源
- 暫存檔案設計支援批次處理與資料驗證需求 