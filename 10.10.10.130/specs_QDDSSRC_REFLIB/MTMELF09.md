# MTMELF09 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | MTMELF09 |
| 檔案描述 | 客戶分店資料檔 (邏輯檔) |
| 檔案類型 | LF (Logical File) |
| 記錄格式 | ME0 |
| 主鍵 | ME01 + ME02 (客戶代號 + 分店代號) |
| 實體檔案 | MTMEPF |
| 檔案屬性 | 邏輯檢視，特殊條件排序 |

## 2. 檔案功能說明

MTMELF09 為 MTMEPF 客戶分店資料檔的特殊條件邏輯檔案，提供：
- 客戶分店特殊檢視
- 分店管理專用檢視
- 分店分析支援
- 分店績效統計

## 3. 系統檔案清單

| 檔案代號 | 檔案名稱 | 說明 |
|----------|----------|------|
| MTMELF09 | 客戶分店資料邏輯檔9 | 主檔 |
| MTMEPF | 客戶分店資料實體檔 | 實體檔案 |
| MTMELF | 客戶分店資料邏輯檔 | 基本邏輯檔 |
| RERF | 參考檔案 | 欄位定義參考 |

## 4. 紀錄格式

### 記錄格式：ME0 (繼承自 MTMEPF)

## 5. 欄位規格

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| ME01 | 客戶代號 | 1-7 | 7 | A | R | 主鍵，客戶識別碼 |
| ME02 | 分店代號 | 8-12 | 5 | A | R | 主鍵，分店識別碼 |
| ME03 | 分店名稱 | 13-30 | 18 | A | R | 分店中文名稱 |
| ME04 | 英文名稱 | 31-48 | 18 | A | R | 分店英文名稱 |
| ME05 | 分店簡稱 | 49-58 | 10 | A | R | 分店簡稱 |
| ME06 | 地區代號 | 59-63 | 5 | A | R | 所屬地區 |
| ME07 | 區域代號 | 64-68 | 5 | A | R | 所屬區域 |
| ME08 | 業務員 | 69-73 | 5 | A | R | 負責業務員代號 |
| ME09 | 分店狀態 | 74 | 1 | A | R | 'A'-營業，'I'-停業，'S'-暫停 |
| ME10 | 分店類型 | 75 | 1 | A | R | 'M'-總店，'B'-分店，'O'-門市 |
| ME11 | 負責人 | 76-85 | 10 | A | R | 分店負責人 |
| ME12 | 聯絡電話 | 86-100 | 15 | A | R | 分店電話 |
| ME13 | 傳真號碼 | 101-115 | 15 | A | R | 傳真號碼 |
| ME14 | 分店地址 | 116-155 | 40 | A | R | 分店地址 |
| ME15 | 開店日期 | 156-163 | 8 | N | R | 格式：YYYYMMDD |
| ME16 | 結束日期 | 164-171 | 8 | N | R | 格式：YYYYMMDD |
| ME17 | 營業面積 | 172-178 | 7 | N | R | 營業面積 (平方米) |
| ME18 | 員工人數 | 179-181 | 3 | N | R | 分店員工人數 |
| 其他欄位 | 繼承MTMEPF | | | | | 參考MTMEPF規格 |

## 6. 主鍵欄位

| 鍵值序號 | 欄位代號 | 欄位名稱 | 排序 |
|----------|----------|----------|------|
| 1 | ME01 | 客戶代號 | 升序 |
| 2 | ME02 | 分店代號 | 升序 |

## 7. 索引資料

### 主要索引
- **索引名稱**：特殊條件索引
- **索引欄位**：ME01 + ME02
- **索引類型**：PRIMARY
- **說明**：客戶代號 + 分店代號複合升序排序

### 輔助索引
1. **類型索引**：ME10 + ME01 + ME02 (分店類型 + 客戶 + 分店)
2. **類型狀態索引**：ME10 + ME09 + ME01 + ME02
3. **類型地區索引**：ME10 + ME06 + ME01 + ME02
4. **類型業務員索引**：ME10 + ME08 + ME01 + ME02
5. **開店日期索引**：ME15 + ME01 + ME02
6. **面積索引**：ME17 + ME10 + ME01 + ME02

### 邏輯檢視特性
- **基底檔案**：MTMEPF
- **檢視類型**：特殊條件檢視
- **排序方式**：特殊業務需求排序
- **分組顯示**：依分店類型分組
- **過濾條件**：可設定特殊條件過濾

## 8. 備註

### 設計考量
1. 此檔案為 MTMEPF 的特殊條件邏輯檢視檔案
2. 提供分店管理專門功能
3. 支援分店分析和統計需求

### 特殊功能
- **條件篩選**：按特殊條件篩選分店
- **類型管理**：分店類型專門管理
- **統計分析**：支援分店統計分析
- **績效評估**：分店績效評估支援

### 分店類型說明
- **M級 (總店)**：客戶主要營業據點
- **B級 (分店)**：客戶分支營業據點
- **O級 (門市)**：客戶零售門市據點

### 參考關聯
- **實體檔案**：MTMEPF (客戶分店資料)
- **客戶檔案**：MTMDPF (ME01 = MD01)
- **業務員檔案**：MTMCPF (ME08 = MC01)
- **地區檔案**：PA#DPF (ME06 = #D01)
- **區域檔案**：PA#EPF (ME07 = #E01)

### 業務規則
1. 顯示順序：依特殊業務需求排序
2. 類型關係需維持完整性
3. 營業面積需符合實際狀況
4. 特殊條件可動態調整

### 資料完整性
1. 資料內容完全依賴 MTMEPF 實體檔案
2. ME01 需對應 MTMDPF 中的有效客戶
3. ME08 需對應 MTMCPF 中的有效業務員
4. ME10 分店類型需符合業務規則

### 使用注意事項
1. 此為邏輯檔案，不可直接寫入資料
2. 所有異動需透過 MTMEPF 實體檔案進行
3. 類型調整會影響分店分組
4. 適用於分店管理與特殊業務需求 