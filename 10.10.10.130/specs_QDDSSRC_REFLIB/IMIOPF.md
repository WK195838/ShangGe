# IMIOPF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案代號 | IMIOPF |
| 檔案名稱 | 盤點單檔 |
| 檔案類型 | PF (實體檔案) |
| 資料庫 | REFLIB |
| 記錄格式 | IO0 |
| 參照檔案 | RERF |
| 檔案特性 | UNIQUE |

## 2. 檔案功能說明

此實體檔案為盤點作業的核心檔案，記錄每個產品項次的盤點資訊。包含帳簿數量、初盤數量、複盤數量等盤點相關資料，以及盤點日期、盤點員、確認標記等管理資訊。提供完整的盤點作業管理功能，支援盤點計畫產生、盤點執行、盤點確認等各階段作業，是盤點系統的基礎資料檔案。

## 3. 系統檔案清單

| 檔案代號 | 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|----------|------|
| IMIOPF | 盤點單檔 | PF | 主要實體檔案 |
| RERF | 參照檔案 | PF | 欄位參照定義檔案 |

## 4. 紀錄格式

### 記錄格式：IO0
- **記錄類型**：實體記錄
- **存取方式**：直接存取
- **檔案組織**：索引檔案組織
- **唯一性**：UNIQUE（不允許重複鍵值）

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|----------|----------|
| IO01 | 單據編號 | - | - | - | R,K | 參照 RERF，單據編號，主鍵欄位2 |
| IO02 | 產品項次代號 | - | - | - | R,K | 參照 RERF，產品項次代號，主鍵欄位1 |
| IO03 | 盤點順序 | - | - | - | R,K | 參照 RERF，盤點順序，主鍵欄位3 |
| IO04 | 產品項次代號 | - | - | - | R,K | 參照 RERF，產品項次代號，主鍵欄位4 |
| IO05 | 帳簿數量 | - | - | - | R | 參照 RERF，帳簿數量 |
| IO06 | 初盤數量 | - | - | - | R | 參照 RERF，初盤數量 |
| IO07 | 複盤數量 | - | - | - | R | 參照 RERF，複盤數量 |
| IO08 | 盤點日期 | - | 8 | N | R | 參照 RERF，盤點日期，格式：YYYYMMDD |
| IO09 | 已確認標記 | - | - | - | R | 參照 RERF，已確認標記，'V'-已確認 |
| IO10 | 備註 | - | - | - | R | 參照 RERF，備註說明 |
| IO11 | 盤點員 | - | - | - | R | 參照 RERF，盤點員代號 |
| IOXX | 異動日期 | - | 8 | N | R | 參照 RERF，異動日期，格式：YYYYMMDD |
| IOYY | 異動時間 | - | - | - | R | 參照 RERF，異動時間 |
| IOZZ | 異動者 | - | - | - | R | 參照 RERF，異動者代號 |

## 6. 主鍵欄位

| 主鍵順序 | 欄位代號 | 欄位名稱 | 排序 |
|----------|----------|----------|------|
| 1 | IO02 | 產品項次代號 | ASC |
| 2 | IO01 | 單據編號 | ASC |
| 3 | IO03 | 盤點順序 | ASC |
| 4 | IO04 | 產品項次代號 | ASC |

## 7. 索引資料

### 主要索引
- **索引鍵值**：IO02 + IO01 + IO03 + IO04
- **索引類型**：唯一複合索引
- **排序方式**：遞增排序
- **用途**：主鍵索引，確保記錄唯一性

## 8. 備註

1. 此檔案為盤點作業的核心實體檔案
2. 採用 UNIQUE 約束，確保主鍵值的唯一性
3. 所有欄位定義參照 RERF 檔案
4. 支援完整的盤點作業流程管理
5. 記錄帳簿數量、初盤數量、複盤數量
6. 提供盤點員指派和確認功能
7. 記錄異動日期、時間、異動者等審計資訊
8. 為多個邏輯檔案提供基礎資料來源
9. 支援盤點計畫產生到盤點確認的完整流程
10. 提供盤點盈虧分析的基礎資料 