# SOSZLF02 檔案規格書

## 1. 基本資料

| 欄位 | 內容 |
|------|------|
| 檔案名稱 | SOSZLF02 |
| 檔案描述 | 發票稅額明細檔邏輯檔 |
| 檔案類型 | 邏輯檔案 (LF) |
| 記錄格式 | SZ0 |
| 關鍵字 | SZ01+SZ11+SZ03+SZ16+SZ02 |
| 實體檔案 | SOSZPF |
| 作業系統 | AS/400 |
| 資料庫 | DB2/400 |
| 存取方式 | 索引存取 |

## 2. 檔案功能說明

發票稅額明細檔邏輯檔提供發票稅額明細資料的多重索引存取功能，按照客戶編號、門市編號、商品編號、發票日期、發票號碼的複合順序排列，支援發票日期與發票號碼的降序排列，適用於稅額明細查詢與報表作業。

## 3. 系統檔案清單

| 相關檔案 | 檔案名稱 | 說明 |
|----------|----------|------|
| 邏輯檔案 | SOSZLF02 | 發票稅額明細檔邏輯檔 |
| 實體檔案 | SOSZPF | 發票稅額明細檔 |

## 4. 紀錄格式

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| SZ01 | 客戶編號 | 1-5 | 5 | 文數字 | 索引1 | 參考SJ01欄位，客戶編號 |
| SZ11 | 門市編號 | 6-13 | 8 | 文數字 | 索引2 | 參考SJ11欄位，門市編號 |
| SZ03 | 商品編號 | 14-22 | 9 | 文數字 | 索引3 | 參考SJ03欄位，商品編號 |
| SZ16 | 發票日期 | 23-30 | 8,0 | 數值 | 索引4,DESC | 參考SJ16欄位，發票日期降序 |
| SZ02 | 發票號碼 | 31-38 | 8 | 文數字 | 索引5,DESC | 參考SJ02欄位，發票號碼降序 |

## 5. 主鍵欄位

- **排序鍵**：SZ01+SZ11+SZ03+SZ16+SZ02 
- **索引類型**：複合索引
- **排序方式**：SZ01,SZ11,SZ03遞增；SZ16,SZ02遞減

## 6. 索引資料

| 索引名稱 | 索引欄位 | 索引類型 | 說明 |
|----------|----------|----------|------|
| COMPOSITE | SZ01+SZ11+SZ03+SZ16+SZ02 | MULTIKEY | 複合索引，支援多維度查詢 |

## 7. 使用說明

1. **多維查詢**：支援按客戶、門市、商品的複合條件查詢
2. **時間排序**：發票日期與發票號碼降序，最新記錄優先顯示
3. **報表作業**：提供稅額明細報表的資料存取路徑
4. **稽核查詢**：支援依時間序列的稅額明細追蹤
5. **資料分析**：便於進行客戶、門市、商品的稅額分析

## 8. 備註

- 邏輯檔案基於SOSZPF實體檔案建立
- 採用DESCEND排序，確保最新資料優先存取
- 複合索引設計支援多層次的資料查詢需求
- 適用於稅務申報與財務分析作業
- 與發票明細系統緊密整合，提供完整的稅額明細視圖 