# IMIYLF01 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案代號 | IMIYLF01 |
| 檔案名稱 | 年終庫存檔 |
| 檔案類型 | LF (邏輯檔案) |
| 資料庫 | REFLIB |
| 記錄格式 | IY0 |
| 基礎實體檔案 | IMIYPF |

## 2. 檔案功能說明

此邏輯檔案基於 IMIYPF（年終庫存檔實體檔案），提供以年終年月、產品項次代號、盤點項次代號、單據編號的排序存取路徑。主要用於年終庫存資料的產品別查詢，按照產品項次代號優先的順序進行資料存取。適用於產品別庫存分析、庫存盤點結果查詢和年終庫存報表編製等作業。

## 3. 系統檔案清單

| 檔案代號 | 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|----------|------|
| IMIYLF01 | 年終庫存檔 | LF | 邏輯檔案 |
| IMIYPF | 年終庫存檔 | PF | 基礎實體檔案 |

## 4. 紀錄格式

### 記錄格式：IY0
- **基於實體檔案**：IMIYPF
- **存取方式**：直接邏輯存取
- **排序方式**：複合排序（年終年月 + 產品項次代號 + 盤點項次代號 + 單據編號）

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|----------|----------|
| IY01 | 單據編號 | - | - | - | R,K | 參照 RERF，單據編號，索引欄位4 |
| IY02 | 盤點項次代號 | - | - | - | R,K | 參照 RERF，盤點項次代號，索引欄位3 |
| IY03 | 產品項次代號 | - | - | - | R,K | 參照 RERF，產品項次代號，索引欄位2 |
| IY04 | 產品名稱 | - | - | - | R | 參照 RERF，產品名稱 |
| IY05 | 產品類別 | - | - | - | R | 參照 RERF，產品類別 |
| IY06 | 庫存數量 | - | - | - | R | 參照 RERF，庫存數量 |
| IY07 | 帳簿數量 | - | - | - | R | 參照 RERF，帳簿數量 |
| IY08 | 實盤數量 | - | - | - | R | 參照 RERF，實盤數量 |
| IY09 | 保留數量 | - | - | - | R | 參照 RERF，保留數量 |
| IY10 | 可用數量 | - | - | - | R | 參照 RERF，可用數量 |
| IY15 | 年終年月 | - | 6 | N | R,K | 參照 RERF，年終年月，索引欄位1，格式：YYYYMM |
| IYXX | 建立日期 | - | 8 | N | R | 參照 RERF，建立日期，格式：YYYYMMDD |
| IYYY | 建立時間 | - | - | - | R | 參照 RERF，建立時間 |
| IYZZ | 建立者 | - | - | - | R | 參照 RERF，建立者 |

## 6. 主鍵欄位

| 主鍵順序 | 欄位代號 | 欄位名稱 | 排序 |
|----------|----------|----------|------|
| 1 | IY15 | 年終年月 | 升序 |
| 2 | IY03 | 產品項次代號 | 升序 |
| 3 | IY02 | 盤點項次代號 | 升序 |
| 4 | IY01 | 單據編號 | 升序 |

## 7. 索引資料

### 主要索引
- **索引名稱**：邏輯索引
- **索引欄位**：IY15 + IY03 + IY02 + IY01
- **索引類型**：邏輯索引
- **排序方式**：升序

## 8. 備註

1. **檔案用途**：提供年終庫存資料的產品別存取
2. **排序特性**：產品項次代號優先排序，便於產品別查詢
3. **查詢優化**：適用於按產品分類的庫存查詢
4. **相關作業**：產品別庫存分析、庫存盤點結果查詢、年終庫存報表編製
5. **注意事項**：
   - 年終年月為第一排序鍵，確保時間順序
   - 產品項次代號為第二排序鍵，便於產品別分析
   - 盤點項次代號和單據編號提供詳細的記錄識別
   - 適用於需要按產品分類查詢庫存資訊的作業 