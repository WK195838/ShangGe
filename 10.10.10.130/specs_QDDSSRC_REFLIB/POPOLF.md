# POPOLF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | POPOLF |
| 檔案類型 | 邏輯檔 (LF) |
| 檔案說明 | 國內外驗收明細主檔邏輯檔 |
| 主索引鍵 | PO03+PO02+PO04 |
| 實體檔案 | POPEPF, POPIPF |
| 建立日期 | (依實際建立日期填入) |
| 維護人員 | (依實際維護人員填入) |

## 2. 檔案功能說明

此邏輯檔案統合國外採購驗收明細檔及國內採購驗收明細檔，提供統一的檢視介面，以採購編號+檢索編號+產品項次排序。

### 主要功能
- 統合國內外驗收明細資料的檢視
- 提供統一的存取介面
- 支援跨檔案的驗收明細資料查詢

## 3. 系統檔案清單

| 檔案名稱 | 檔案類型 | 說明 | 關聯 |
|----------|----------|------|------|
| POPOLF | LF | 國內外驗收明細主檔邏輯檔 | 主檔案 |
| POPEPF | PF | 國外採購驗收明細檔實體檔 | 實體檔案參照 |
| POPIPF | PF | 國內採購驗收明細檔實體檔 | 實體檔案參照 |

## 4. 記錄格式

### 記錄格式名稱：PE0, PI0

| 格式名稱 | 格式說明 | 參照檔案 | 重新命名 |
|----------|----------|----------|----------|
| PE0 | 國外採購驗收明細格式 | POPEPF | PE01→PO01, PE02→PO02, PE03→PO03, PE04→PO04, PE05→PO05, PE06→PO06, PE10→PO07 |
| PI0 | 國內採購驗收明細格式 | POPIPF | PI01→PO01, PI02→PO02, PI03→PO03, PI04→PO04, PI05→PO05, PI06→PO06, PI08→PO07 |

## 5. 欄位規格

### 統一欄位定義

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| PO01 | 廠商編號 | 1 | R | 文字 | RENAME | 重新命名自各檔案的廠商編號 |
| PO02 | 檢索編號 | - | R | 文字 | KEY | 主鍵欄位 |
| PO03 | 採購編號 | - | R | 文字 | KEY | 主鍵欄位 |
| PO04 | 產品項次 | - | R | 文字 | KEY | 主鍵欄位 |
| PO05 | 供貨日期 | - | R | 日期 | RENAME | 重新命名自各檔案的供貨日期 |
| PO06 | 供貨量 | - | R | 數值 | RENAME | 重新命名自各檔案的供貨量（PI06精度6S0） |
| PO07 | 供貨單位異常 | - | R | 文字 | RENAME | 重新命名自各檔案的異常指標 |

## 6. 主鍵欄位

| 順序 | 欄位代號 | 欄位名稱 | 排序 |
|------|----------|----------|------|
| 1 | PO03 | 採購編號 | 升序 |
| 2 | PO02 | 檢索編號 | 升序 |
| 3 | PO04 | 產品項次 | 升序 |

## 7. 索引資料

### 主要索引
- **索引名稱**：主鍵索引
- **索引欄位**：PO03+PO02+PO04
- **索引類型**：複合索引，全部升序排列
- **唯一性**：依實體檔案設定

### 索引用途
- 依採購編號優先檢視所有相關驗收明細
- 依檢索編號細分同採購編號的明細
- 依產品項次排序明細項目

## 8. 備註

### 特殊說明
- 此邏輯檔案統合兩個不同的實體檔案
- 使用 RENAME 功能將各檔案欄位統一命名
- 提供跨國內外驗收明細資料的統一檢視介面
- 特別注意 PI06 欄位具有特殊精度設定（6S 0）

### 檔案統合關係
- **POPEPF 記錄格式 PE0**：國外採購驗收明細檔
  - PE10 → PO07（供貨單位異常）
- **POPIPF 記錄格式 PI0**：國內採購驗收明細檔
  - PI08 → PO07（供貨單位異常）
  - PI06 特殊精度：6S 0

### 欄位對應關係
| 統一欄位 | 國外檔案欄位 | 國內檔案欄位 | 說明 |
|----------|-------------|-------------|------|
| PO01 | PE01 | PI01 | 廠商編號 |
| PO02 | PE02 | PI02 | 檢索編號 |
| PO03 | PE03 | PI03 | 採購編號 |
| PO04 | PE04 | PI04 | 產品項次 |
| PO05 | PE05 | PI05 | 供貨日期 |
| PO06 | PE06 | PI06 | 供貨量 |
| PO07 | PE10 | PI08 | 供貨單位異常 |

### 相關檔案
- POPEPF（國外採購驗收明細檔實體檔）
- POPIPF（國內採購驗收明細檔實體檔）
- POPDPF（國外採購驗收主檔實體檔）
- POPHPF（國內採購驗收主檔實體檔）

### 維護注意事項
- 邏輯檔案結構變更需同步更新兩個實體檔案
- 欄位重新命名需確保一致性
- 注意 PI06 欄位的特殊精度設定
- 資料異動透過各自的實體檔案進行 