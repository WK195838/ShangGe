# SOSELF05 檔案規格書

## 1. 基本資料
- **檔案名稱**: SOSELF05
- **檔案類型**: LF (邏輯檔案)
- **基底檔案**: SOSEPF (送貨單主檔)
- **檔案說明**: 送貨單主檔邏輯檔案 - 最新配送狀態管理
- **建立日期**: (依系統記錄)
- **最後異動日期**: (依系統記錄)

## 2. 檔案功能說明
此邏輯檔案提供以出貨訊息統計為主的複合排序索引，特點是送貨日期使用遞減排序，支援送貨單按最新配送狀態的查詢需求。

### 主要功能
- 最新配送狀態管理
- 即時配送監控
- 配送效率分析

## 3. 系統檔案清單
| 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|------|
| SOSEPF | PF | 送貨單主檔 (基底檔案) |
| SOSELF05 | LF | 送貨單主檔邏輯檔案 |

## 4. 紀錄格式

### 4.1 邏輯檔案設定
```
PFILE(SOSEPF)      // 基底實體檔案
```

### 4.2 關鍵欄位 (Key Fields)
| 順序 | 欄位代號 | 欄位名稱 | 型態 | 長度 | 排序 | 說明 |
|------|----------|----------|------|------|------|------|
| 1 | SE07 | 出貨訊息統計 | A | 8 | ASC | 主要排序鍵 |
| 2 | SE21 | 配送起始日 | N | 8,0 | ASC | 配送日期 |
| 3 | SE22 | 路線代號 | A | 3 | ASC | 配送路線 |
| 4 | SE23 | 配送時段 | N | 4,0 | ASC | 時段代號 |
| 5 | SE06 | 送貨日期 | N | 8,0 | DESC | 降序排列 |
| 6 | SE34 | 地區 | A | 5 | ASC | 地區代號 |
| 7 | SE35 | 通路 | A | 5 | ASC | 通路代號 |
| 8 | SE10 | 送貨地址郵遞區號 | A | 5 | ASC | 郵遞區號 |
| 9 | SE11 | 送貨地址電話號碼 | A | 15 | ASC | 電話號碼 |
| 10 | SE02 | 送貨單號 | A | 10 | ASC | 送貨單號 |

### 4.3 選擇條件 (SELECT/OMIT)
無特殊選擇條件設定

## 5. 主鍵欄位
- **主要鍵值**: SE07 + SE21 + SE22 + SE23 + SE06 + SE34 + SE35 + SE10 + SE11 + SE02
- **排序方式**: 出貨訊息統計、配送起始日、路線、時段、送貨日期(降序)、地區、通路、郵遞區號、電話、單號
- **索引類型**: 複合索引，十層排序

## 6. 索引資料
- **排序方式**: SE07 + SE21 + SE22 + SE23 + SE06(遞減) + SE34 + SE35 + SE10 + SE11 + SE02
- **索引類型**: 復合索引，支援最新配送狀態查詢
- **特殊屬性**: 送貨日期使用遞減排序

## 7. 使用說明

### 7.1 檔案用途
- 送貨單最新配送狀態管理
- 最新配送狀態查詢
- 即時配送監控相關程式

### 7.2 程式存取方式
```rpg
// 依出貨統計查詢最新配送狀態
SETLL (出貨訊息統計) SOSELF05;
READ SOSELF05;
// 依出貨統計和配送時間查詢
CHAIN (出貨訊息統計:配送起始日:路線代號) SOSELF05;
```

## 8. 備註
- 此邏輯檔案強調最新配送狀態的即時性
- 提供詳細的配送時間與地址資訊
- 支援配送效率分析與優化
- 送貨日期遞減排序，最新資料優先顯示 