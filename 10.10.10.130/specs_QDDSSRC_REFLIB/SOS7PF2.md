# SOS7PF2 檔案規格書

## 1. 基本資料

| 欄位 | 內容 |
|------|------|
| 檔案名稱 | SOS7PF2 |
| 檔案描述 | 試飲收回活動客戶明細暫存 |
| 檔案類型 | 實體檔案 (PF) |
| 記錄格式 | S70 |
| 關鍵字 | S702+S703+S704 |
| 作業系統 | AS/400 |
| 資料庫 | DB2/400 |
| 存取方式 | 索引存取 |

## 2. 檔案功能說明

試飲收回活動客戶明細暫存是SOS7PF的暫存工作檔案，具有相同的欄位結構與記錄格式。本檔案主要用於試飲收回活動資料的暫存處理、批次作業與資料交換，支援複雜的試飲收回活動資料處理流程。

## 3. 系統檔案清單

| 相關檔案 | 檔案名稱 | 說明 |
|----------|----------|------|
| 暫存檔 | SOS7PF2 | 試飲收回活動客戶明細暫存 |
| 參考檔案 | RERF | 參考檔案 |
| 主檔案 | SOS7PF | 試飲收回活動客戶明細檔 |
| 相關檔案 | SOS6PF2 | 試飲活動客戶明細檔暫存 |

## 4. 紀錄格式

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| S701 | 客戶編號 | 1-5 | 5 | 文數字 | - | 參考SD01欄位，客戶編號 |
| S702 | 活動編號 | 6-13 | 8 | 文數字 | 主鍵1 | 參考SD02欄位，活動編號 |
| S703 | 商品編號 | 14-22 | 9 | 文數字 | 主鍵2 | 參考SD03欄位，商品編號 |
| S704 | 活動客戶代號 | 23-31 | 9 | 文字 | 主鍵3 | 活動客戶識別代號 |
| S705 | 收回數量 | 32-36 | 5,0 | 數值 | - | 試飲收回數量 |
| S706 | 文字一 | 37-48 | 12 | 文字 | - | 備註文字一 |
| S707 | 文字二 | 49-60 | 12 | 文字 | - | 備註文字二 |
| S708 | 文字三 | 61-72 | 12 | 文字 | - | 備註文字三 |
| S709 | 數字一 | 73-83 | 11,2 | 數值 | - | 備註數字一 |
| S710 | 數字二 | 84-94 | 11,2 | 數值 | - | 備註數字二 |
| S711 | 數字三 | 95-105 | 11,2 | 數值 | - | 備註數字三 |
| S712 | 文字說明一 | 106-135 | 30 | 輸出 | - | 文字說明一 |
| S713 | 文字說明二 | 136-165 | 30 | 輸出 | - | 文字說明二 |
| S714 | 文字說明三 | 166-195 | 30 | 輸出 | - | 文字說明三 |
| S715 | 狀態一 | 196 | 1 | 文字 | - | 收回狀態標記一 |
| S716 | 狀態二 | 197 | 1 | 文字 | - | 收回狀態標記二 |
| S717 | 狀態三 | 198 | 1 | 文字 | - | 收回狀態標記三 |
| S7XX | 建立日期 | 199-206 | 8,0 | 數值 | - | 建立日期 |
| S7YY | 建立時間 | 207-212 | 6,0 | 數值 | - | 建立時間 |
| S7ZZ | 建立者 | 213-222 | 10 | 文字 | - | 建立者 |

## 5. 主鍵欄位

- **主鍵**：S702+S703+S704 (活動編號+商品編號+活動客戶代號)
- **索引類型**：UNIQUE
- **排序方式**：遞增排序

## 6. 索引資料

| 索引名稱 | 索引欄位 | 索引類型 | 說明 |
|----------|----------|----------|------|
| PRIMARY | S702+S703+S704 | UNIQUE | 主索引，活動+商品+客戶 |

## 7. 使用說明

1. **暫存處理**：作為試飲收回活動資料的暫存工作空間
2. **批次作業**：支援大量收回資料的批次處理
3. **資料交換**：用於系統間的收回資料傳輸與交換
4. **備份復原**：提供收回活動資料的備份與復原功能
5. **測試環境**：作為收回活動測試與驗證的資料環境

## 8. 備註

- 暫存檔案設計，與SOS7PF具有相同的欄位結構
- 支援試飲收回活動資料的暫存與批次處理需求
- 保持與主檔案相同的主鍵設計與索引結構
- 適用於複雜的試飲收回活動資料處理流程
- 與試飲管理系統完整整合，提供彈性的收回資料處理能力 