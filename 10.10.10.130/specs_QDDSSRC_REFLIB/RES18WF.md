# RES18WF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | RES18WF |
| 檔案類型 | 實體檔 (PF) |
| 檔案說明 | 禮盒結構拆解金額成本計算暫存檔 |
| 主索引鍵 | R181 |
| 參照檔案 | RERF |
| 建立日期 | (依實際建立日期填入) |
| 維護人員 | (依實際維護人員填入) |

## 2. 檔案功能說明

此實體檔案用於禮盒產品的結構拆解和成本計算作業，暫存禮盒組成元件的成本資料和相關金額計算。

### 主要功能
- 暫存禮盒結構拆解資料
- 計算禮盒組成元件成本
- 管理內外銷成本差異
- 提供成本分析基礎資料

## 3. 系統檔案清單

| 檔案名稱 | 檔案類型 | 說明 | 關聯 |
|----------|----------|------|------|
| RES18WF | PF | 禮盒結構拆解金額成本計算暫存檔 | 主檔案 |
| RERF | PF | 參照檔案 | REF參照 |

## 4. 記錄格式

### 記錄格式名稱：RE18R

| 格式說明 | 記錄長度 | 參照檔案 |
|----------|----------|----------|
| 禮盒成本計算記錄格式 | (依欄位定義計算) | RERF |

## 5. 欄位規格

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| R181 | 產品代碼 | 1 | 9 | 文字 | KEY | 主鍵欄位，產品編號 |
| R182 | 內銷數量 | 2 | 5 | 數值 | 0 | 內銷銷售數量 |
| R183 | 外銷數量 | 3 | 5 | 數值 | 0 | 外銷銷售數量 |
| R184 | 單價 | 4 | 12 | 數值 | 2 | 產品銷售單價 |
| R185 | 內銷金額FOB | 5 | 13 | 數值 | 2 | 內銷FOB金額 |
| R186 | 內銷金額FHI | 6 | 13 | 數值 | 2 | 內銷FHI金額 |
| R187 | 內銷金額DUTY | 7 | 13 | 數值 | 2 | 內銷關稅金額 |
| R188 | 外銷金額FOB | 8 | 13 | 數值 | 2 | 外銷FOB金額 |
| R189 | 外銷金額FHI | 9 | 13 | 數值 | 2 | 外銷FHI金額 |
| R18A | 外銷金額DUTY | 10 | 13 | 數值 | 2 | 外銷關稅金額 |
| R18B | 累計內銷金額FOB | 11 | 13 | 數值 | 2 | 累計內銷FOB金額 |
| R18C | 累計內銷金額FHI | 12 | 13 | 數值 | 2 | 累計內銷FHI金額 |
| R18D | 累計內銷金額DUTY | 13 | 13 | 數值 | 2 | 累計內銷關稅金額 |
| R18E | 累計外銷金額FOB | 14 | 13 | 數值 | 2 | 累計外銷FOB金額 |
| R18F | 累計外銷金額FHI | 15 | 13 | 數值 | 2 | 累計外銷FHI金額 |
| R18G | 累計外銷金額DUTY | 16 | 13 | 數值 | 2 | 累計外銷關稅金額 |

## 6. 主鍵欄位

| 欄位代號 | 欄位名稱 | 排序 | 說明 |
|----------|----------|------|------|
| R181 | 產品代碼 | 升序 | 唯一識別產品 |

## 7. 索引資料

### 主要索引
- **索引名稱**：主鍵索引
- **索引欄位**：R181
- **索引類型**：唯一索引 (UNIQUE)
- **唯一性**：是

### 檔案特性
- UNIQUE：確保產品代碼唯一性
- REF(RERF)：欄位定義參照RERF檔案

## 8. 備註

### 特殊說明
- 此檔案為禮盒成本計算的暫存檔案
- 使用 UNIQUE 關鍵字確保產品代碼唯一性
- 使用 REF(RERF) 參照外部檔案定義
- 暫存檔案，用於計算過程中的資料暫存

### 成本計算機制
檔案設計支援多維度成本計算：
- **內外銷分離**：區分內銷與外銷成本
- **多種計價基礎**：FOB、FHI、DUTY 等不同基礎
- **累計計算**：支援累計金額統計

### 檔案用途
- 用於禮盒產品的成本拆解計算
- 支援內外銷不同計價基礎
- 提供禮盒組成元件的成本分析
- 暫存計算過程中的中間結果

### 參照檔案說明
使用 REF(RERF) 參照：
- 欄位定義統一參照RERF檔案
- 確保欄位規格的一致性
- 便於集中維護欄位定義

### 維護注意事項
- 產品代碼為主鍵，不可重複
- 金額欄位均使用兩位小數精度
- 作為暫存檔案，需定期清理
- 計算完成後應及時更新正式檔案

### 系統應用
- 用於禮盒產品的BOM展開計算
- 支援成本會計作業
- 提供價格分析基礎資料
- 配合庫存評價作業

### 相關作業
- 禮盒BOM展開作業
- 成本計算作業
- 價格分析作業
- 庫存評價作業

### 技術特性
- 使用外部參照(REF)確保資料一致性
- 支援多精度數值計算
- 提供完整的成本追蹤機制
- 暫存檔案設計便於批次處理

### 業務流程整合
- 與產品管理流程整合
- 支援成本會計作業
- 配合定價策略執行
- 提供獲利分析基礎

### 成本管理特性
- 支援多層次成本結構
- 區分不同銷售通路成本
- 提供成本變動分析
- 支援成本標準化作業

### 禮盒產品特殊需求
- 支援組合產品拆解
- 處理複雜的成本分攤
- 管理內外銷價差
- 提供組成明細追蹤

### 計算邏輯說明
- **FOB成本**：離岸價格成本
- **FHI成本**：到岸價格成本  
- **DUTY成本**：含關稅成本
- **累計金額**：期間累計統計

### 暫存檔案管理
- 定期清理過期資料
- 控制檔案大小
- 備份重要計算結果
- 監控計算效能

### 資料完整性
- 確保數量與金額的一致性
- 驗證內外銷資料正確性
- 檢核累計數據準確性
- 防止計算溢位問題 