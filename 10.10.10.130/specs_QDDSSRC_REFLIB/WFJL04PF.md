# WFJL04PF 檔案規格書

## 1. 基本資料

| 欄位 | 內容 |
|------|------|
| 檔案名稱 | WFJL04PF |
| 檔案描述 | 收款沖帳－暫存檔 |
| 檔案類型 | 實體檔案 (PF) |
| 記錄格式 | WFJL04R |
| 關鍵字 | JL0401+JL0402+J0402$+JL0403+J0403$+JL0404+JL0405 |
| 作業系統 | AS/400 |
| 資料庫 | DB2/400 |
| 存取方式 | 索引存取 |

## 2. 檔案功能說明

WFJL04PF是傳票系統收款沖帳暫存檔，專門處理收款沖帳交易的暫存作業。本檔案記錄收帳日期、收款單據編號、發票單據編號、收款種類、客戶別碼等關鍵資訊，並計算沖銷發票、統一發票、客戶欠款等，為會計傳票處理提供收款沖帳的基礎資料。

## 3. 系統檔案清單

| 相關檔案 | 檔案名稱 | 說明 |
|----------|----------|------|
| 暫存檔 | WFJL04PF | 收款沖帳暫存檔 |
| 參考檔 | RERF | 參考欄位檔 |
| 相關檔 | WFADPF | 收款明細檔 |
| 相關檔 | WFJL10PF | 傳票暫存檔 |

## 4. 紀錄格式

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| JL0401 | 收帳日期 | 1-8 | 8,0 | 數值 | 主鍵1 | 收帳日期 |
| JL0402 | 收款單據編號第一位 | 9-9 | 1 | 文字 | 主鍵2 | 收款單據編號第一位 |
| J0402$ | 收款單據編號第二位 | 10-10 | 1 | 文字 | 主鍵3 | W=產銷,C=直銷,R=退回 |
| JL0403 | 發票單據編號第一位 | 11-11 | 1 | 文字 | 主鍵4 | 發票單據編號第一位 |
| J0403$ | 發票單據編號第二位 | 12-12 | 1 | 文字 | 主鍵5 | 發票單據編號第二位 |
| JL0404 | 收款種類 | 13-13 | 1 | 文字 | 主鍵6 | 收款種類代碼 |
| JL0405 | 客戶別碼 | 14-25 | 12 | 文字 | 主鍵7 | 客戶別碼 |
| JL0406 | 沖銷發票 | 26-36 | 11,2 | 數值 | - | 沖銷發票金額 |
| JL0407 | 統一發票 | 37-47 | 11,2 | 數值 | - | 統一發票金額 |
| JL0408 | 客戶欠款 | 48-58 | 11,2 | 數值 | - | 客戶欠款餘額 |

## 5. 主鍵欄位

- **主鍵**：JL0401+JL0402+J0402$+JL0403+J0403$+JL0404+JL0405 (七重複合主鍵)
- **索引類型**：UNIQUE
- **排序方式**：遞增排序

## 6. 索引資料

| 索引名稱 | 索引欄位 | 索引類型 | 說明 |
|----------|----------|----------|------|
| PRIMARY | JL0401+JL0402+J0402$+JL0403+J0403$+JL0404+JL0405 | UNIQUE | 主索引，收款沖帳複合鍵 |

## 7. 使用說明

1. **收款沖帳處理**：暫存收款沖帳交易資料進行後續會計處理
2. **雙重單據管理**：同時管理收款單據與發票單據編號
3. **收款種類分類**：支援不同收款種類的分別處理
4. **客戶欠款管理**：追蹤客戶欠款的變動情況
5. **發票沖銷作業**：處理發票與收款的沖銷配對

## 8. 備註

- 使用UNIQUE屬性確保暫存資料的唯一性
- J0402$與J0403$欄位說明：W=產銷、C=直銷、R=退回
- 客戶別碼代碼：A0001=退回、A0002=產銷、A0003=直銷、B類業務=特殊專櫃
- 參考RERF檔案進行欄位定義標準化
- 雙重單據編號設計支援收款與發票的完整配對
- 七重複合主鍵確保沖帳交易的唯一性
- 為A1149系統會計傳票作業提供收款沖帳資料來源
- 整合收款明細檔(WFADPF)資料進行帳務處理 