# SOSCPF 檔案規格書

## 1. 基本資料
- 檔名: SOSCPF
- 類型: PF (Physical File)
- 說明: 銷售訂單主檔 KEY=SC02
- 主鍵: SC02
- 建立日期: (待補)
- 最後修改日期: (待補)
- 參考檔案: RERF
- 索引約束: UNIQUE

## 2. 檔案功能說明
此實體檔案為銷售訂單主檔，提供以下功能：
- 記錄所有銷售訂單的主要資訊
- 儲存客戶訂單的基本資料與狀態
- 管理訂單的確認流程與狀態控制
- 記錄送貨地址與發貨資訊
- 支援多種訂單類型（一般、試飲、專櫃等）
- 提供訂單審核與確認機制
- 管理業務員與客戶關聯資料
- 記錄訂單的完整生命週期
- 支援應收帳款管理
- 提供訂單統計與分析基礎

## 3. 系統檔案清單
- 主要實體檔: SOSCPF (銷售訂單主檔)
- 參考檔案: RERF (參考檔案)
- 延伸檔案: SOSCPFA (銷售訂單延伸檔)
- 明細檔案: SOSDPF (銷售訂單明細檔)

## 4. 紀錄格式
實體檔案記錄格式SC0，包含42個欄位，記錄完整的銷售訂單主要資訊。

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明
| 欄位代號 | 名稱 | 位置 | 長度 | 屬性 | 檢核說明 |
|----------|------|------|------|------|----------|
| SC01 | 程式記號 | 1 | REF | 參考欄位 | 程式記號 |
| SC02 | 程式編號出站 | 待計算 | REF | 參考欄位 | 主鍵，程式編號出站（格式：XX-XX-XX-XXXXXX） |
| SC03 | 狀態 | 待計算 | REF | 參考欄位 | 訂單狀態記號 |
| SC04 | 客戶代號 | 待計算 | REF | 參考欄位 | 客戶代號 |
| SC05 | 聯絡代號 | 待計算 | REF | 參考欄位 | 聯絡人代號 |
| SC06 | 客戶程式編號出站 | 待計算 | REF | 參考欄位 | 客戶程式編號 |
| SC07 | 程式日期 | 待計算 | 8 | 日期 | 程式執行日期 |
| SC08 | 已排定送貨日期 | 待計算 | 8 | 日期 | 已排定送貨日期 |
| SC09 | 發貨地址 | 待計算 | REF | 參考欄位 | 發貨地址 |
| SC10 | 應收帳務代號出站 | 待計算 | REF | 參考欄位 | 應收帳務代號 |
| SC11 | 業務員編號 | 待計算 | REF | 參考欄位 | 業務員編號 |
| SC12 | 溫層 | 待計算 | REF | 參考欄位 | 溫層處理 |
| SC13 | 程式狀態 | 待計算 | REF | 參考欄位 | 程式狀態（*:待確認、' ':已確認、C:程式確認、V:已送貨確認、D:發貨中發貨異常） |
| SC14 | 發貨地址簡稱 | 待計算 | REF | 參考欄位 | 發貨地址簡稱 |
| SC15 | 發貨地址詳址 | 待計算 | REF | 參考欄位 | 發貨地址詳址 |
| SC16 | 送貨地址簡稱 | 待計算 | REF | 參考欄位 | 送貨地址簡稱 |
| SC17 | 送貨地址詳址 | 待計算 | REF | 參考欄位 | 送貨地址詳址 |
| SC18 | 程式備註一 | 待計算 | REF | 參考欄位 | 程式備註一 |
| SC19 | 程式備註二 | 待計算 | REF | 參考欄位 | 程式備註二 |
| SC20 | 程式備註三 | 待計算 | REF | 參考欄位 | 程式備註三 |
| SC21 | 確認狀態 | 待計算 | REF | 參考欄位 | 確認狀態記號 |
| SC22 | 總務確認狀態記號 | 待計算 | REF | 參考欄位 | 總務確認狀態（*:待確認、' ':已確認） |
| SC23 | 處理確認狀態記號 | 待計算 | REF | 參考欄位 | 處理確認狀態（*:待確認、' ':已確認、C:程式確認） |
| SC24 | 保管確認狀態記號 | 待計算 | REF | 參考欄位 | 保管確認狀態（*:待確認、' ':已確認、C:程式確認） |
| SC25 | 倉庫確認狀態記號 | 待計算 | REF | 參考欄位 | 倉庫確認狀態（*:待確認、' ':已確認、C:程式確認） |
| SC26 | 應收確認狀態記號 | 待計算 | REF | 參考欄位 | 應收確認狀態（*:待確認、' ':已確認） |
| SC27 | 業務人員 | 待計算 | REF | 參考欄位 | 業務人員（來自客戶主檔） |
| SC28 | 業務負責者 | 待計算 | REF | 參考欄位 | 業務負責者（來自報價檔建立或新增時自動） |
| SC29 | 送貨箱數 | 待計算 | REF | 參考欄位 | 送貨箱數 |
| SC30 | 發貨箱出站 | 待計算 | REF | 參考欄位 | 發貨箱出站 |
| SC31 | 客戶地址 | 待計算 | REF | 參考欄位 | 客戶地址 |
| SC32 | 客戶電話 | 待計算 | REF | 參考欄位 | 客戶電話 |
| SC33 | 程式 | 待計算 | REF | 參考欄位 | 程式 |
| SC34 | 備註 | 待計算 | REF | 參考欄位 | 備註 |
| SC35 | 應收記號 | 待計算 | REF | 參考欄位 | 應收記號（V:已應收、' ':可產生應收、*:舊程式清除、T:應收程式、N:無法應收） |
| SC36 | 可倉庫業務員 | 待計算 | REF | 參考欄位 | 可倉庫業務員 |
| SC37 | 稅務記號 | 待計算 | REF | 參考欄位 | 稅務記號（D:含稅、B:免稅、Z:零稅） |
| SC38 | 預收記號 | 待計算 | REF | 參考欄位 | 預收記號（V:已預收） |
| SC39 | 確認者 | 待計算 | 8 | 日期 | 確認者 |
| SCXX | 異動日期 | 待計算 | 8 | 日期 | 異動日期 |
| SCYY | 異動時間 | 待計算 | REF | 參考欄位 | 異動時間 |
| SCZZ | 異動者 | 待計算 | REF | 參考欄位 | 異動人員 |

## 6. 主鍵欄位
- 主鍵: SC02（程式編號出站）
- 約束類型: UNIQUE

## 7. 索引資料
- 主要索引: SC02 (程式編號出站)
- 索引類型: 主鍵索引
- 唯一性約束: UNIQUE
- 排序方式: 升序

## 8. 備註
- 此實體檔案為銷售訂單管理的核心檔案
- 記錄SC0為實體檔案記錄格式名稱
- 使用REF(RERF)參考外部檔案定義
- SC02主鍵格式：XX-XX-XX-XXXXXX（程式-記號-類別業務員-流水號）
- 程式狀態SC13的值：
  - '*': 待確認
  - ' ': 已確認  
  - 'C': 程式確認
  - 'V': 已送貨確認
  - 'D': 發貨中發貨異常
- 各確認狀態欄位（SC22-SC26）統一格式：
  - '*': 待確認
  - ' ': 已確認
  - 'C': 程式確認（部分欄位）
- 應收記號SC35的值：
  - 'V': 已應收
  - ' ': 可產生應收
  - '*': 舊程式清除CL->RE無法應收
  - 'T': 應收程式
  - 'N': 無法應收（應收處理時改寫）
- 稅務記號SC37的值：
  - 'D': 含稅
  - 'B': 免稅
  - 'Z': 零稅
- 提供完整的訂單生命週期管理
- 支援多種確認流程控制
- 記錄詳細的業務與客戶資訊
- 用於各種訂單相關的程式與報表
- 與明細檔SOSDPF形成一對多關係
- 與延伸檔SOSCPFA形成一對一關係 