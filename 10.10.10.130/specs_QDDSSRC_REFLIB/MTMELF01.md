# MTMELF01 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | MTMELF01 |
| 檔案描述 | 客戶分店資料檔 (邏輯檔) |
| 檔案類型 | LF (Logical File) |
| 記錄格式 | ME0 |
| 主鍵 | ME01 + ME02 (客戶代號 + 分店代號) |
| 實體檔案 | MTMEPF |
| 檔案屬性 | 邏輯檢視，特殊排序 |

## 2. 檔案功能說明

MTMELF01 為 MTMEPF 客戶分店資料檔的特殊邏輯檔案，提供：
- 客戶分店資料的特殊排序檢視
- 分店業務管理檢視
- 地區分店查詢
- 分店績效分析支援

## 3. 系統檔案清單

| 檔案代號 | 檔案名稱 | 說明 |
|----------|----------|------|
| MTMELF01 | 客戶分店資料邏輯檔01 | 主檔 |
| MTMEPF | 客戶分店資料實體檔 | 實體檔案 |
| MTMELF | 客戶分店資料邏輯檔 | 基本邏輯檔 |
| RERF | 參考檔案 | 欄位定義參考 |

## 4. 紀錄格式

### 記錄格式：ME0 (繼承自 MTMEPF)

## 5. 欄位規格

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| ME01 | 客戶代號 | 1-7 | 7 | A | R | 主鍵，客戶識別碼 |
| ME02 | 分店代號 | 8-12 | 5 | A | R | 主鍵，分店識別碼 |
| ME03 | 分店名稱 | 13-30 | 18 | A | R | 分店中文名稱 |
| ME04 | 英文名稱 | 31-48 | 18 | A | R | 分店英文名稱 |
| ME05 | 分店地址 | 49-88 | 40 | A | R | 分店地址 |
| ME06 | 電話號碼 | 89-103 | 15 | A | R | 分店電話 |
| ME07 | 負責人 | 104-113 | 10 | A | R | 分店負責人 |
| ME08 | 業務員 | 114-118 | 5 | A | R | 負責業務員代號 |
| ME09 | 地區代號 | 119-123 | 5 | A | R | 所屬地區 |
| ME10 | 區域代號 | 124-128 | 5 | A | R | 所屬區域 |
| ME11 | 分店狀態 | 129 | 1 | A | R | 'A'-有效，'I'-停用 |
| ME12 | 配送方式 | 130-134 | 5 | A | R | 配送方式代號 |
| ME13 | 開店日期 | 135-142 | 8 | N | R | 格式：YYYYMMDD |
| ME14 | 營業時間 | 143-150 | 8 | A | R | 營業時間 |
| 其他欄位 | 繼承MTMEPF | | | | | 參考MTMEPF規格 |

## 6. 主鍵欄位

| 鍵值序號 | 欄位代號 | 欄位名稱 | 排序 |
|----------|----------|----------|------|
| 1 | ME01 | 客戶代號 | 升序 |
| 2 | ME02 | 分店代號 | 升序 |

## 7. 索引資料

### 主要索引
- **索引名稱**：特殊排序索引
- **索引欄位**：ME01 + ME02
- **索引類型**：PRIMARY
- **說明**：客戶代號與分店代號複合升序排序

### 輔助索引
1. **地區排序索引**：ME09 + ME01 + ME02
2. **業務員排序索引**：ME08 + ME01 + ME02
3. **狀態排序索引**：ME11 + ME09 + ME01
4. **配送方式索引**：ME12 + ME01 + ME02

### 邏輯檢視特性
- **基底檔案**：MTMEPF
- **檢視類型**：特殊排序檢視
- **排序方式**：依地區群組排序
- **過濾條件**：可設定有效分店過濾

## 8. 備註

### 設計考量
1. 此檔案為 MTMEPF 的特殊排序邏輯檢視檔案
2. 提供地區別分店管理功能
3. 支援業務分析與配送管理

### 特殊功能
- **地區分組**：按地區代號分組排序
- **業務分工**：按業務員分組管理
- **狀態篩選**：可選擇顯示有效或所有分店
- **配送管理**：按配送方式分組管理

### 參考關聯
- **實體檔案**：MTMEPF (客戶分店資料)
- **客戶檔案**：MTMDPF (ME01 = MD01)
- **業務員檔案**：MTMCPF (ME08 = MC01)
- **地區檔案**：PA#DPF (ME09 = #D01)
- **區域檔案**：PA#EPF (ME10 = #E01)

### 業務規則
1. 顯示順序：地區代號 + 客戶代號 + 分店代號
2. 業務員關係需維持完整性
3. 停用分店可選擇性顯示
4. 地區調整影響排序結果

### 資料完整性
1. 資料內容完全依賴 MTMEPF 實體檔案
2. ME01 需對應 MTMDPF 中的有效客戶
3. ME08 需對應 MTMCPF 中的有效業務員
4. 地區區域代號需對應有效參數

### 使用注意事項
1. 此為邏輯檔案，不可直接寫入資料
2. 所有異動需透過 MTMEPF 實體檔案進行
3. 地區調整會影響排序結果
4. 適用於地區管理與配送分析 