# ARAGLF03 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | ARAGLF03 |
| 檔案描述 | 銷貨折讓明細檔邏輯檔案03 |
| 檔案類型 | 邏輯檔案 (Logical File) |
| 基礎實體檔 | ARAGPF |
| 作業系統 | IBM i (AS/400) |
| 程式語言 | DDS |

## 2. 檔案功能說明

ARAGLF03是基於銷貨折讓明細實體檔ARAGPF的邏輯檔案，提供以下功能：
- 以業務員(AG03)、發票日期(AG04)、客戶代號(AG02)的組合作為存取路徑
- 支援按業務員別時間順序的銷貨折讓明細資料查詢
- 適用於業務員時間導向的銷貨折讓分析和報表
- 便於進行業務員日常工作追蹤和客戶服務管理

## 3. 系統檔案清單

| 序號 | 檔案名稱 | 檔案類型 | 說明 |
|------|----------|----------|------|
| 1 | ARAGPF | 實體檔案 | 銷貨折讓明細主檔 |
| 2 | ARAGLF03 | 邏輯檔案 | 銷貨折讓明細檔邏輯檔案03 |

## 4. 紀錄格式

| 紀錄格式名稱 | 說明 | 基礎檔案 |
|--------------|------|----------|
| AG0 | 銷貨折讓明細紀錄格式 | ARAGPF |

## 5. 欄位規格

ARAGLF03使用與基礎實體檔ARAGPF相同的欄位結構，主要欄位包括：

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|----------|
| AG03 | 業務員 | 9-11 | 3 | 文字 | 必填欄位 |
| AG04 | 發票日期 | 12-19 | 8 | 數值 | 日期格式YYYYMMDD |
| AG02 | 客戶代號 | 3-8 | 6 | 文字 | 必填欄位 |
| AG01 | 公司別 | 1-2 | 2 | 文字 | 必填欄位 |
| AG05 | 發票別 | 20-21 | 2 | 文字 | 必填欄位 |
| AG06 | 發票號碼 | 22-29 | 8 | 文字 | 必填欄位 |
| AG07 | 項次 | 30-32 | 3 | 數值 | 必填欄位 |
| AG09 | 產品代號 | 33-47 | 15 | 文字 | 必填欄位 |
| ... | ... | ... | ... | ... | (其他欄位同ARAGPF) |

## 6. 主鍵欄位

ARAGLF03本身為邏輯檔案，無獨立主鍵定義，其資料完整性由基礎實體檔ARAGPF維護。

## 7. 索引資料

| 索引名稱 | 索引欄位 | 排序 | 說明 |
|----------|----------|------|------|
| 主要索引 | AG03 + AG04 + AG02 | 升序排列 | 業務員+發票日期+客戶代號 |

### 索引鍵值組成：
1. AG03 (業務員) - 升序排列
2. AG04 (發票日期) - 升序排列
3. AG02 (客戶代號) - 升序排列

## 8. 備註

### 設計考量：
- 以業務員為第一排序鍵，支援業務員別查詢和工作管理
- 以發票日期為第二排序鍵，按時間順序排列便於追蹤業務進展
- 以客戶代號為第三排序鍵，同日期下可依客戶區分處理

### 使用時機：
- 業務員日常工作管理和追蹤
- 業務員時間序列的銷貨折讓分析
- 客戶服務歷程追蹤查詢
- 業務員績效考核報表
- 按時間順序的折讓處理流程

### 業務應用場景：
- **日常管理**: 業務員按時間順序查看折讓處理工作
- **績效分析**: 分析業務員在特定時間段的折讓處理績效
- **客戶服務**: 追蹤業務員對客戶的服務歷程
- **工作排程**: 協助業務員安排客戶拜訪和服務順序

### 與其他邏輯檔案的差異：
- **ARAGLF**: AG02+AG03+AG04(降序) - 客戶業務員最新優先
- **ARAGLF01**: AG03+AG09+AG10+AG01+AG11(降序) - 業務員產品客戶複雜分析
- **ARAGLF03**: AG03+AG04+AG02 - 業務員時間客戶簡潔導向

### 索引設計特色：
- **三欄位簡潔設計**: 相較於ARAGLF01的五欄位複雜索引，更簡潔實用
- **時間導向**: 發票日期升序排列，便於按時間順序處理
- **業務員工作流**: 特別適合業務員日常工作管理需求

### 注意事項：
- 本邏輯檔案依賴ARAGPF實體檔案的資料完整性
- AG04發票日期採升序排列，適合歷史資料追蹤和工作流程管理
- 索引結構簡潔，查詢效率較高
- 特別適合業務員日常作業和客戶服務管理 