# IMIPLF01 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案代號 | IMIPLF01 |
| 檔案名稱 | 進貨單據主檔 |
| 檔案類型 | LF (邏輯檔案) |
| 資料庫 | REFLIB |
| 記錄格式 | PF0, SN0, II0 |
| 基礎實體檔案 | POPFPF, SOSNPF, IMIIPF |

## 2. 檔案功能說明

此聯結邏輯檔案整合三個實體檔案（POPFPF、SOSNPF、IMIIPF），提供以收貨項次代號加單據號碼的排序存取路徑。主要用於進貨單據的整合管理，將進貨、銷退、調撥等相關單據資料統一呈現。具有特定的選擇條件，限制單據第四碼小於'0'，適用於特定類型的單據號碼查詢和管理。

## 3. 系統檔案清單

| 檔案代號 | 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|----------|------|
| IMIPLF01 | 進貨單據主檔 | LF | 邏輯檔案 |
| POPFPF | 進貨單據主檔 | PF | 基礎實體檔案1 |
| SOSNPF | 銷退單據檔案 | PF | 基礎實體檔案2 |
| IMIIPF | 存貨調撥主檔 | PF | 基礎實體檔案3 |

## 4. 紀錄格式

### 記錄格式：PF0 (基於POPFPF)
- **基於實體檔案**：POPFPF
- **存取方式**：聯結邏輯存取
- **排序方式**：複合排序（收貨項次代號 + 單據號碼）
- **選擇條件**：IP021 LT '0' (單據第四碼小於'0')

### 記錄格式：SN0 (基於SOSNPF)
- **基於實體檔案**：SOSNPF
- **存取方式**：聯結邏輯存取
- **排序方式**：複合排序（收貨項次代號 + 單據號碼）
- **選擇條件**：IP021 LT '0' (單據第四碼小於'0')

### 記錄格式：II0 (基於IMIIPF)
- **基於實體檔案**：IMIIPF
- **存取方式**：聯結邏輯存取
- **排序方式**：複合排序（收貨項次代號 + 單據號碼）
- **選擇條件**：IP021 LT '0' (單據第四碼小於'0')

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明

### 共通欄位 (所有記錄格式)
| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|----------|----------|
| IP01 | 單據編號 | - | - | - | R | 對應各檔案的單據編號欄位 |
| IP02 | 單據號碼 | - | - | - | R,K | 對應各檔案的單據號碼欄位，索引欄位2 |
| IP021 | 單據第四碼 | - | 1 | A | I | 單據號碼第4碼，選擇條件欄位 |
| IP03 | 出貨項次代號 | - | - | - | R | 對應各檔案的出貨項次代號 |
| IP04 | 收貨項次代號 | - | - | - | R,K | 對應各檔案的收貨項次代號，索引欄位1 |
| IP05 | 收貨日期 | - | - | - | R | 對應各檔案的收貨日期 |
| IP06 | 已確認數量 | - | - | - | R | 對應各檔案的已確認數量 |

### PF0記錄格式特有欄位
| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|----------|----------|
| IP01 | 單據編號 | - | - | - | R | RENAME(PF01) |
| IP02 | 單據號碼 | - | - | - | R | RENAME(PF02) |
| IP03 | 出貨項次代號 | - | - | - | R | RENAME(PF06) |
| IP04 | 收貨項次代號 | - | - | - | R | RENAME(PF07) |
| IP05 | 收貨日期 | - | - | - | R | RENAME(PF04) |
| IP06 | 已確認數量 | - | - | - | R | RENAME(PF11) |

## 6. 主鍵欄位

| 主鍵順序 | 欄位代號 | 欄位名稱 | 排序 |
|----------|----------|----------|------|
| 1 | IP04 | 收貨項次代號 | ASC |
| 2 | IP02 | 單據號碼 | ASC |

## 7. 索引資料

### 主要索引
- **索引鍵值**：IP04 + IP02
- **索引類型**：複合索引
- **排序方式**：遞增排序
- **用途**：支援按照收貨項次代號和單據號碼的查詢

### 選擇條件
- **條件**：IP021 LT '0' (單據第四碼小於'0')
- **說明**：限制特定類型的單據號碼

## 8. 備註

1. 此檔案為聯結邏輯檔案，整合三個實體檔案
2. 具有特定的選擇條件，限制單據第四碼小於'0'
3. 提供進貨、銷退、調撥等單據的統一存取介面
4. 採用收貨項次代號優先的排序方式
5. 支援多種單據類型的整合查詢
6. 適用於進貨單據的綜合管理
7. 提供統一的單據號碼存取功能
8. 便於跨檔案的單據資料整合分析 