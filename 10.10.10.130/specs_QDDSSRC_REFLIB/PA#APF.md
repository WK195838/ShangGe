# PA#APF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | PA#APF |
| 檔案類型 | 實體檔案 (Physical File) |
| 檔案用途 | 規則代碼主檔 |
| 紀錄格式 | #A0 |
| 主鍵欄位 | #A01 + #A02 |
| 排序方式 | 升序 |
| 參照檔案 | RERF |
| 特殊屬性 | UNIQUE |

## 2. 檔案功能說明

PA#APF是系統規則代碼的主檔案：

1. **主要功能**：儲存系統各種規則代碼及其說明
2. **資料內容**：包含規則類別、規則內容、規則說明等
3. **系統用途**：作為系統代碼管理的基礎檔案
4. **索引設計**：以規則類別和規則內容組成複合主鍵
5. **代碼管理**：支援系統各種業務規則的編碼管理

## 3. 系統檔案清單

| 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|------|
| PA#APF | 實體檔案 | 規則代碼主檔（主檔案） |
| RERF | 參考檔案 | 參考欄位定義檔 |

## 4. 紀錄格式

| 格式名稱 | 說明 |
|----------|------|
| #A0 | 規則代碼主記錄格式 |

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 說明 |
|----------|----------|------|------|------|------|------|
| #A01 | 規則類別 | 1 | - | 字元 | 參考#101/主鍵 | 規則類別代號 |
| #A02 | 規則內容 | 2 | - | 字元 | 參考#A02/主鍵 | 規則內容代號 |
| #A03 | 規則說明 | 3 | - | 字元 | 參考#A03 | 規則說明 |
| #AXX | 異動日期 | 4 | 8 | 數值 | B2CHKA | 異動日期 |
| #AYY | 異動時間 | 5 | - | 字元 | 參考#AYY | 異動時間 |
| #AZZ | 異動操作者 | 6 | - | 字元 | 參考#AZZ | 異動操作者 |

## 6. 主鍵欄位

本實體檔案的主鍵欄位為：
- #A01（規則類別） + #A02（規則內容）

### 主鍵特性：
- **複合主鍵**：由規則類別和規則內容組成
- **UNIQUE屬性**：確保規則代碼的唯一性
- **階層結構**：支援規則的分類管理

## 7. 索引資料

| 索引名稱 | 索引鍵 | 排序 | 用途說明 |
|----------|--------|------|----------|
| 主索引 | #A01 + #A02 | 升序 | 規則代碼查詢 |

### 索引特性：
- **複合索引**：以規則類別和內容作為存取路徑
- **唯一性**：確保規則代碼組合的唯一性
- **分類查詢**：支援按類別查詢規則

## 8. 備註

1. **系統代碼管理**：作為系統各種業務規則的統一管理檔案
2. **階層結構設計**：
   - #A01：規則類別（參考#101欄位定義）
   - #A02：規則內容（具體規則代號）
   - #A03：規則說明（規則的詳細說明）
3. **異動追蹤**：
   - #AXX：異動日期（8位數值，B2CHKA檢核）
   - #AYY：異動時間
   - #AZZ：異動操作者
   - 完整記錄規則代碼的異動歷史
4. **參考欄位設計**：
   - 使用REF(RERF)參考檔案定義
   - #A01參考#101欄位（REFFLD(#101)）
   - 確保資料一致性
5. **UNIQUE約束**：
   - 複合主鍵確保規則代碼的唯一性
   - 防止重複的規則定義
6. **業務應用**：
   - 系統參數設定
   - 業務規則管理
   - 代碼標準化
   - 系統維護
7. **資料完整性**：
   - 複合主鍵約束
   - 參考完整性檢核
   - 日期格式檢核（B2CHKA）
8. **系統整合**：
   - 與其他系統檔案的代碼對照
   - 支援業務流程的規則控制
   - 提供系統設定的基礎資料
9. **維護特性**：
   - 支援規則的新增、修改、刪除
   - 完整的異動記錄
   - 分類管理便於維護
10. **查詢效率**：
    - 複合索引提供高效查詢
    - 支援按類別或內容的快速查詢
    - 適合系統大量規則查詢需求 