# SOSELF07 檔案規格書

## 1. 基本資料
- **檔案名稱**: SOSELF07
- **檔案類型**: LF (邏輯檔案)
- **基底檔案**: SOSEPF (送貨單主檔)
- **檔案說明**: 送貨單主檔邏輯檔案 - 詳細業務管理
- **建立日期**: (依系統記錄)
- **最後異動日期**: (依系統記錄)

## 2. 檔案功能說明
此邏輯檔案提供完整的欄位定義與複合排序索引，支援送貨單的詳細查詢與管理需求，包含完整的業務欄位結構。

### 主要功能
- 詳細業務管理
- 客戶編號區段分析
- 多層次狀態管理

## 3. 系統檔案清單
| 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|------|
| SOSEPF | PF | 送貨單主檔 (基底檔案) |
| SOSELF07 | LF | 送貨單主檔邏輯檔案 |

## 4. 紀錄格式

### 4.1 邏輯檔案設定
```
PFILE(SOSEPF)      // 基底實體檔案
```

### 4.2 關鍵欄位 (Key Fields)
| 順序 | 欄位代號 | 欄位名稱 | 型態 | 長度 | 排序 | 說明 |
|------|----------|----------|------|------|------|------|
| 1 | SE011 | 客戶編號第二碼 | A | 1 | ASC | 主要排序鍵 |
| 2 | SE07 | 出貨訊息統計 | A | 8 | ASC | 次要排序鍵 |
| 3 | SE06 | 送貨日期 | N | 8,0 | ASC | 第三排序鍵 |
| 4 | SE22 | 路線代號 | A | 3 | ASC | 第四排序鍵 |
| 5 | SE23 | 配送時段 | N | 4,0 | ASC | 第五排序鍵 |
| 6 | SE02 | 送貨單號 | A | 10 | ASC | 第六排序鍵 |

### 4.3 計算欄位
| 欄位代號 | 計算公式 | 說明 |
|----------|----------|------|
| SE011 | SST(SE01 2 1) | 客戶編號第二碼 |
| SE07L | SST(SE07 1 1) | 出貨訊息統計第一碼 |

### 4.4 選擇條件 (SELECT/OMIT)
無特殊選擇條件設定

### 4.5 欄位代號、名稱、位置、長度、屬性、檢核說明
| 欄位代號 | 欄位名稱 | 型態 | 長度 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|----------|
| SE011 | 客戶編號第二碼 | A | 1 | Key,Computed | SST(SE01 2 1) |
| SE02 | 送貨單號 | A | 10 | Key | 送貨單唯一識別 |
| SE03 | 部門 | A | 5 | - | 業務部門 |
| SE06 | 送貨日期 | N | 8,0 | Key | 送貨執行日期 |
| SE07 | 出貨訊息統計 | A | 8 | Key | 出貨狀態統計 |
| SE07L | 出貨訊息統計第一碼 | A | 1 | Computed | SST(SE07 1 1) |
| SE09 | 送貨檢驗狀態 | A | 1 | - | '*'=待驗收,'V'=已送貨確認,'C'=取消,' '=已驗收 |
| SE22 | 路線代號 | A | 3 | Key | 配送路線代號 |
| SE23 | 配送時段 | N | 4,0 | Key | 配送時段代號 |
| SE34 | 地區 | A | 5 | - | 配送地區代號 |
| SE35 | 通路 | A | 5 | - | 銷售通路代號 |
| SE38 | 轄區編號 | A | 1 | - | 'D'=高屏,'B'=北部,'Z'=桃園 |

## 5. 主鍵欄位
- **主要鍵值**: SE011 + SE07 + SE06 + SE22 + SE23 + SE02
- **排序方式**: 客戶編號第二碼、出貨訊息統計、送貨日期、路線代號、配送時段、送貨單號
- **索引類型**: 複合索引，六層排序

## 6. 索引資料
- **排序方式**: SE011 + SE07 + SE06 + SE22 + SE23 + SE02
- **索引類型**: 復合索引，支援詳細業務查詢
- **特殊屬性**: 包含子字串欄位

## 7. 使用說明

### 7.1 檔案用途
- 送貨單詳細業務管理
- 送貨單詳細管理
- 業務分析相關程式

### 7.2 程式存取方式
```rpg
// 依客戶編號第二碼查詢
SETLL (客戶編號第二碼) SOSELF07;
READ SOSELF07;
// 依客戶編號第二碼和出貨統計查詢
CHAIN (客戶編號第二碼:出貨訊息統計) SOSELF07;
```

## 8. 備註
- 此邏輯檔案提供最完整的送貨單業務查詢功能
- 包含詳細的狀態管理與地區分析
- 支援複雜的業務邏輯處理
- 包含計算欄位 SE011 和 SE07L，提供客戶區段分析功能 