# PA#BLF01 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | PA#BLF01 |
| 檔案描述 | 公司檔 (邏輯檔) |
| 檔案類型 | LF (Logical File) |
| 記錄格式 | #B0 |
| 主鍵 | #B01 (公司代號) |
| 實體檔案 | PA#BPF |
| 檔案屬性 | 邏輯檢視，特殊排序 |

## 2. 檔案功能說明

PA#BLF01 為 PA#BPF 公司檔的特殊邏輯檔案，提供：
- 公司資料特殊排序檢視
- 企業組織管理
- 多公司合併報表支援
- 公司別業務分析

## 3. 系統檔案清單

| 檔案代號 | 檔案名稱 | 說明 |
|----------|----------|------|
| PA#BLF01 | 公司檔邏輯檔01 | 主檔 |
| PA#BPF | 公司檔實體檔 | 實體檔案 |
| PA#BLF | 公司檔邏輯檔 | 基本邏輯檔 |
| RERF | 參考檔案 | 欄位定義參考 |

## 4. 紀錄格式

### 記錄格式：#B0 (繼承自 PA#BPF)

## 5. 欄位規格

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| #B01 | 公司代號 | 1-5 | 5 | A | R | 主鍵，公司識別碼 |
| #B02 | 公司名稱 | 6-25 | 20 | A | R | 公司中文名稱 |
| #B03 | 英文名稱 | 26-45 | 20 | A | R | 公司英文名稱 |
| #B04 | 公司簡稱 | 46-55 | 10 | A | R | 公司簡稱 |
| #B05 | 統一編號 | 56-63 | 8 | A | R | 統一編號 |
| #B06 | 公司地址 | 64-103 | 40 | A | R | 公司地址 |
| #B07 | 聯絡電話 | 104-118 | 15 | A | R | 公司電話 |
| #B08 | 傳真號碼 | 119-133 | 15 | A | R | 傳真號碼 |
| #B09 | 負責人 | 134-143 | 10 | A | R | 公司負責人 |
| #B10 | 公司狀態 | 144 | 1 | A | R | 'A'-有效，'I'-停用，'M'-合併 |
| #B11 | 母公司 | 145-149 | 5 | A | R | 母公司代號 |
| #B12 | 公司層級 | 150-151 | 2 | N | R | 公司層級 |
| #B13 | 財務年度 | 152-155 | 4 | N | R | 財務年度起始月 |
| #B14 | 幣別 | 156-158 | 3 | A | R | 記帳幣別 |
| #BXX | 建立日期 | 159-166 | 8 | N | R | 格式：YYYYMMDD |
| #BYY | 建立時間 | 167-172 | 6 | N | R | 格式：HHMMSS |
| #BZZ | 建立者 | 173-182 | 10 | A | R | 操作人員 |

## 6. 主鍵欄位

| 鍵值序號 | 欄位代號 | 欄位名稱 | 排序 |
|----------|----------|----------|------|
| 1 | #B01 | 公司代號 | 升序 |

## 7. 索引資料

### 主要索引
- **索引名稱**：特殊排序索引
- **索引欄位**：#B01
- **索引類型**：PRIMARY
- **說明**：公司代號升序排序

### 輔助索引
1. **層級索引**：#B11 + #B12 (母公司 + 層級)
2. **狀態索引**：#B10 (公司狀態)
3. **財務年度索引**：#B13 (財務年度)
4. **幣別索引**：#B14 (記帳幣別)
5. **母公司索引**：#B11 (母公司代號)

### 邏輯檢視特性
- **基底檔案**：PA#BPF
- **檢視類型**：特殊排序檢視
- **排序方式**：公司層級排序
- **過濾條件**：可設定有效公司過濾

## 8. 備註

### 設計考量
1. 此檔案為 PA#BPF 的特殊排序邏輯檢視檔案
2. 提供公司組織架構管理功能
3. 支援多公司合併報表需求

### 特殊功能
- **階層管理**：按公司層級排序顯示
- **組織架構**：支援母子公司關係
- **狀態管理**：公司狀態分類管理
- **合併報表**：支援集團合併分析

### 參考關聯
- **實體檔案**：PA#BPF (公司檔)
- **母公司檔案**：PA#BPF (#B11 = #B01)
- **幣別檔案**：PA#幣別檔 (#B14 = 幣別代號)
- **財務檔案**：各種財務檔案 (公司別分組)

### 業務規則
1. 顯示順序：公司層級 + 公司代號
2. 母公司關係需維持完整性
3. 財務年度需符合會計規範
4. 停用公司不影響歷史資料

### 資料完整性
1. 資料內容完全依賴 PA#BPF 實體檔案
2. #B11 需對應有效的公司代號或空值
3. #B14 需對應有效的幣別代號
4. 公司層級需與母子關係一致

### 使用注意事項
1. 此為邏輯檔案，不可直接寫入資料
2. 所有異動需透過 PA#BPF 實體檔案進行
3. 公司結構調整影響報表分析
4. 適用於集團管理與合併報表 