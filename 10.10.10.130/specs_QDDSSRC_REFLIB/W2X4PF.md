# W2X4PF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | W2X4PF |
| 檔案類型 | 實體檔 (PF) |
| 檔案描述 | 專櫃盤點上傳檔 |
| 作業系統 | AS/400 |
| 資料庫 | DB2/400 |

## 2. 檔案功能說明

此檔案為專櫃盤點的上傳檔，負責管理專櫃盤點作業的資料上傳及維護。主要功能：
- 記錄專櫃盤點的庫存資料
- 管理產品盤點的各種數量類型
- 提供專櫃盤點的上傳功能
- 支援盤點結果的資料驗證
- 提供專櫃盤點管理的基礎資料

## 3. 系統檔案清單

| 項目 | 檔案名稱 | 類型 | 說明 |
|------|----------|------|------|
| 主檔 | W2X4PF | PF | 專櫃盤點上傳檔 |
| 關聯檔 | W2X1PF | PF | 茂世專櫃期初庫存上傳檔 |
| 關聯檔 | W2X3PF | PF | 茂世專櫃11月庫存上傳檔 |

## 4. 紀錄格式

### 記錄格式：X40
**唯一性約束：UNIQUE**

| 欄位代號 | 欄位名稱 | 型態 | 長度 | 小數 | 說明 |
|----------|----------|------|------|------|------|
| X401 | 營業點代號 | A | 5 | 0 | 營業點代號 |
| X402 | 產品代號 | A | 9 | 0 | 產品代號 |
| X403 | 實際數量 | S | 9 | 0 | 實際盤點數量 |
| X404 | 開帳數量 | S | 9 | 0 | 開帳數量 |
| X405 | 進貨數量 | S | 9 | 0 | 進貨數量 |
| X406 | 盤點日期 | S | 8 | 0 | 盤點日期 |
| X407 | 檢查記號 | A | 1 | 0 | 檢查記號 |

## 5. 主鍵欄位

| 順序 | 欄位代號 | 欄位名稱 | 排序方式 |
|------|----------|----------|----------|
| 1 | X401 | 營業點代號 | 遞增 |
| 2 | X402 | 產品代號 | 遞增 |

## 6. 索引資料

### 索引鍵值
- **主索引**：X401 + X402
- **唯一性約束**：UNIQUE
- **排序方式**：營業點代號遞增，產品代號遞增

### 存取路徑
此檔案提供以下存取路徑：
1. 依營業點代號檢索盤點資料
2. 依產品代號分組統計
3. 支援營業點×產品的二維分析

## 7. 使用說明

### 查詢功能
- 支援依營業點代號查詢盤點資料
- 提供產品代號分組檢索
- 支援盤點數量統計分析
- 支援盤點日期範圍查詢
- 支援檢查記號分類檢索
- 提供營業點×產品的交叉分析

### 作業程序
1. 上傳專櫃盤點的庫存資料
2. 記錄實際盤點數量
3. 比對開帳數量及進貨數量
4. 計算盤點差異
5. 設定檢查記號進行資料驗證

### 維護作業
- **新增**：建立新的盤點記錄
- **查詢**：支援多重條件檢索
- **更新**：更新盤點數量及狀態
- **上傳**：批次上傳盤點資料
- **驗證**：透過檢查記號進行資料檢查

### 注意事項
- 檔案具有UNIQUE約束，確保記錄唯一性
- 所有數量欄位均不含小數位
- 盤點日期記錄盤點作業日期
- 檢查記號用於盤點結果驗證

### 數量類型說明
- **實際數量**：實際盤點結果數量
- **開帳數量**：期初帳面數量
- **進貨數量**：期間進貨數量
- **盤點差異**：實際數量-(開帳數量+進貨數量)

### 檢查記號說明
- **空白**：正常盤點記錄
- **特定代號**：需要特別檢查的盤點結果
- **驗證用途**：盤點差異控制

## 8. 備註

- 此檔案為專櫃盤點的上傳檔案
- 雙重複合主鍵確保盤點記錄唯一性
- 支援完整的專櫃盤點管理
- 提供盤點資料的上傳功能
- 所有數量欄位均為整數設計
- 檢查記號提供盤點結果驗證控制機制
- 支援盤點差異分析功能 