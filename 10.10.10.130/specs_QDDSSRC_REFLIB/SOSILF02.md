# SOSILF02 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | SOSILF02 |
| 檔案類型 | LF (邏輯檔案) |
| 檔案說明 | 發票主檔 |
| 參考檔案 | SOSIPF |
| 排序鍵值 | SI01+SI21(DESCEND)+SI12+SI13+SI02 |
| 記錄長度 | 依據 SOSIPF |
| 記錄格式 | SI0 |

## 2. 檔案功能說明

本檔案為發票主檔的邏輯檔案，透過索引鍵進行複合排序存取，其中 SI21（發票日期）為遞減排序，並包含選擇條件篩選特定記錄。

## 3. 系統檔案清單

| 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|------|
| SOSILF02 | LF | 發票主檔邏輯檔 |
| SOSIPF | PF | 發票主檔物理檔 |

## 4. 記錄格式

### 記錄格式：SI0

本邏輯檔案參考 SOSIPF 物理檔案的 SI0 記錄格式。

## 5. 欄位說明

| 欄位代號 | 名稱 | 位置 | 長度 | 屬性 | 檢核說明 |
|----------|------|------|------|------|----------|
| SI01 | 客戶編號 | 1 | - | R | 第一排序鍵 |
| SI21 | 發票日期 | 2 | - | R | 第二排序鍵（遞減） |
| SI12 | 路線代碼 | 3 | - | R | 第三排序鍵 |
| SI13 | 銷貨代碼 | 4 | - | R | 第四排序鍵 |
| SI02 | 發票編號 | 5 | - | R | 第五排序鍵 |

*其他欄位詳細定義請參考 SOSIPF 檔案規格書*

## 6. 主鍵欄位

### 排序鍵值
- 主要鍵：SI01（客戶編號）
- 次要鍵：SI21（發票日期）[遞減排序]
- 第三鍵：SI12（路線代碼）
- 第四鍵：SI13（銷貨代碼）
- 第五鍵：SI02（發票編號）

## 7. 索引資料

| 索引名稱 | 索引欄位 | 排序方式 | 說明 |
|----------|----------|----------|------|
| 主索引 | SI01+SI21+SI12+SI13+SI02 | 遞增（SI21遞減） | 客戶、日期（新到舊）、代碼排序 |

## 8. 備註

1. 此檔案為 SOSIPF 的邏輯檔案
2. 包含選擇條件：
   - SI20（抄報編號）≠ 'V'
   - SI16（電腦發票）≠ 'Y'
3. SI21（發票日期）採用遞減排序，最新日期在前
4. 主要用於客戶發票歷史查詢，按日期倒序排列 