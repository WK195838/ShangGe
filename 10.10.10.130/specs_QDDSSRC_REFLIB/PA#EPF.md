# PA#EPF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | PA#EPF |
| 檔案類型 | 實體檔案 (Physical File) |
| 檔案用途 | 銷售地區區域資料檔 |
| 紀錄格式 | #E0 |
| 主鍵欄位 | #E01 + #E02 |
| 排序方式 | 升序 |
| 參照檔案 | RERF |
| 特殊屬性 | UNIQUE |

## 2. 檔案功能說明

PA#EPF是銷售地區區域資料的管理檔案：

1. **主要功能**：儲存銷售地區下的區域細分資料
2. **資料內容**：包含地區代號、區域代號、區域說明等資訊
3. **系統用途**：作為銷售地區細分管理的基礎檔案
4. **索引設計**：以地區代號和區域代號組成複合主鍵
5. **階層管理**：支援地區下多區域的階層式管理需求

## 3. 系統檔案清單

| 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|------|
| PA#EPF | 實體檔案 | 銷售地區區域資料檔（主檔案） |
| RERF | 參考檔案 | 參考欄位定義檔 |
| PA#DPF | 關聯檔案 | 銷售地區資料檔（上層檔案） |

## 4. 紀錄格式

| 格式名稱 | 說明 |
|----------|------|
| #E0 | 銷售地區區域資料主記錄格式 |

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 說明 |
|----------|----------|------|------|------|------|------|
| #E01 | 地區代號 | 1 | - | 字元 | 參考#D01/主鍵 | 地區代號 |
| #E02 | 區域代號 | 2 | - | 字元 | 參考#E02/主鍵 | 區域代號 |
| #E03 | 區域說明 | 3 | - | 字元 | 參考#E03 | 區域說明 |
| #EXX | 異動日期 | 4 | 8 | 數值 | B2CHKA/參考#AXX | 異動日期 |
| #EYY | 異動時間 | 5 | - | 字元 | 參考#AYY | 異動時間 |
| #EZZ | 異動操作者 | 6 | - | 字元 | 參考#AZZ | 異動操作者 |

## 6. 主鍵欄位

本實體檔案的主鍵欄位為：
- #E01（地區代號） + #E02（區域代號）

### 主鍵特性：
- **複合主鍵**：由地區代號和區域代號組成
- **UNIQUE屬性**：確保地區區域組合的唯一性
- **階層結構**：支援地區下多區域的管理

## 7. 索引資料

| 索引名稱 | 索引鍵 | 排序 | 用途說明 |
|----------|--------|------|----------|
| 主索引 | #E01 + #E02 | 升序 | 地區區域代號查詢 |

### 索引特性：
- **複合索引**：以地區代號和區域代號作為存取路徑
- **唯一性**：確保地區區域組合的唯一性
- **階層查詢**：支援按地區查詢區域

## 8. 備註

1. **階層式地區管理**：管理地區下的細分區域劃分
2. **階層結構設計**：
   - #E01：地區代號（上層分類，參考PA#DPF）
   - #E02：區域代號（下層分類）
   - #E03：區域說明（區域名稱或描述）
3. **複合主鍵設計**：
   - 地區代號 + 區域代號形成唯一識別
   - 支援一個地區下多個區域
   - 防止重複的區域定義
4. **異動追蹤**：
   - #EXX：異動日期（8位數值，B2CHKA檢核）
   - #EYY：異動時間
   - #EZZ：異動操作者
   - 完整記錄區域資料的異動歷史
5. **參考欄位設計**：
   - 使用REF(RERF)參考檔案定義
   - #E01參考#D01欄位（REFFLD(#D01)）
   - #EXX參考#AXX欄位（REFFLD(#AXX)）
   - #EYY參考#AYY欄位（REFFLD(#AYY)）
   - #EZZ參考#AZZ欄位（REFFLD(#AZZ)）
   - 與PA#APF檔案的異動欄位保持一致性
6. **UNIQUE約束**：
   - 複合主鍵確保地區區域組合的唯一性
   - 防止重複的區域定義
7. **業務應用**：
   - 精細化地區管理
   - 區域業務分配
   - 詳細配送規劃
   - 區域績效分析
   - 細分市場管理
8. **系統整合**：
   - 與PA#DPF地區檔案的階層關聯
   - 與客戶檔案的區域關聯
   - 與業務員檔案的區域關聯
   - 支援多層級業務分析
9. **資料完整性**：
   - 複合主鍵約束
   - 參考完整性檢核（與PA#DPF關聯）
   - 日期格式檢核（B2CHKA）
10. **查詢效率**：
    - 複合索引提供高效查詢
    - 支援按地區或區域的快速查詢
    - 適合階層式統計和分析需求
11. **維護特性**：
    - 支援區域的新增、修改、刪除
    - 完整的異動記錄
    - 階層式管理便於維護
12. **業務分析支援**：
    - 區域業績分析
    - 地區內區域比較
    - 細分市場分析
    - 配送效率分析
13. **組織管理**：
    - 支援多層級銷售架構
    - 區域責任制管理
    - 精細化業務區域劃分
14. **擴展性設計**：
    - 複合主鍵支援未來擴展
    - 彈性的區域分類架構
    - 適應細分業務發展需求
15. **階層完整性**：
    - 與上層地區檔案的關聯完整性
    - 支援地區區域的一致性管理
    - 防止孤立區域資料
16. **配送細分**：
    - 支援更精細的配送路線規劃
    - 區域配送效率管理
    - 細分物流管理 