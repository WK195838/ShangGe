# POPCLF01 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | POPCLF01 |
| 檔案類型 | 邏輯檔案 (LF) |
| 檔案用途 | 採購明細檔邏輯檔 |
| 作業系統 | AS/400 |
| 建立日期 | - |
| 最後修改日期 | - |

## 2. 檔案功能說明

POPCLF01 為採購明細檔 (POPCPF) 的條件篩選邏輯檔案，提供透過特定鍵值組合 PC03+PC02 存取實體檔資料的路徑。此邏輯檔案具有複合選擇條件，僅顯示處理狀態 (PC12) 為空白且確認數量 (PC11) 不等於預計數量 (PC06) 的記錄，適用於未完成採購明細的查詢與管理。

## 3. 系統檔案清單

- **實體檔案**: POPCPF (採購明細檔)
- **邏輯檔案**: POPCLF01 (本檔案)

## 4. 記錄格式

### 記錄格式 PC0
- **記錄識別**: PC0
- **檔案參照**: POPCPF
- **記錄類型**: 邏輯檔記錄格式

## 5. 欄位規格

POPCLF01 邏輯檔案使用 POPCPF 實體檔案的所有欄位，詳細欄位規格請參考 POPCPF 實體檔案規格書。

## 6. 主鍵欄位

| 順序 | 欄位代號 | 欄位名稱 | 說明 |
|------|----------|----------|------|
| 1 | PC03 | 產品代碼 | 第一排序鍵值 |
| 2 | PC02 | 採購單編號 | 第二排序鍵值 |

## 7. 索引資料

### 存取路徑設定
- **排序方式**: 升序
- **重複鍵值**: 不允許
- **索引類型**: 唯一索引

### 索引鍵值
- 第一鍵值: PC03 (產品代碼)
- 第二鍵值: PC02 (採購單編號)

### 選擇條件
- **第一選擇條件**: PC12 COMP(EQ ' ') - 處理狀態為空白
- **第二選擇條件**: PC11 COMP(NE PC06) - 確認數量不等於預計數量

## 8. 備註

1. **檔案特性**: 
   - 邏輯檔案
   - 參照實體檔案 POPCPF
   - 具有複合選擇條件

2. **存取特性**:
   - 提供以產品為主的存取路徑
   - 支援複合條件篩選
   - 按產品代碼→採購單編號順序排序

3. **選擇條件特色**:
   - 雙重條件篩選機制
   - PC12 = ' ': 僅顯示未處理完成的記錄
   - PC11 ≠ PC06: 確認數量與預計數量不符的記錄

4. **業務應用場景**:
   - 採購進度追蹤與管理
   - 未完成採購項目查詢
   - 數量差異分析與處理
   - 採購執行狀況監控

5. **使用注意事項**:
   - 適用於需要追蹤未完成採購的作業程式
   - 自動過濾已完成與數量正確的採購記錄
   - 以產品為主要檢視角度，便於產品採購狀況掌握
   - 特別適合採購進度管控與異常處理作業
   - 支援採購數量差異的及時發現與處理 