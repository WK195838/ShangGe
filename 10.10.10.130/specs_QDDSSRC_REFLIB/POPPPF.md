# POPPPF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | POPPPF |
| 檔案類型 | 實體檔 (PF) |
| 檔案說明 | 國內採購驗收明細記錄檔 |
| 主索引鍵 | PP02+PP03+PP04 |
| 參照檔案 | RERF |
| 建立日期 | (依實際建立日期填入) |
| 維護人員 | (依實際維護人員填入) |

## 2. 檔案功能說明

此實體檔案用於儲存國內採購驗收明細的記錄檔案，記錄驗收明細異動的完整軌跡。

### 主要功能
- 儲存國內採購驗收明細記錄
- 記錄驗收明細的異動軌跡
- 提供明細異動的稽核追蹤機制

## 3. 系統檔案清單

| 檔案名稱 | 檔案類型 | 說明 | 關聯 |
|----------|----------|------|------|
| POPPPF | PF | 國內採購驗收明細記錄檔實體檔 | 主檔案 |
| RERF | PF | 參照檔案 | 欄位定義參照 |

## 4. 記錄格式

### 記錄格式名稱：PP0

| 格式說明 | 記錄長度 | 參照檔案 |
|----------|----------|----------|
| 國內採購驗收明細記錄檔記錄格式 | (依欄位定義計算) | RERF |

## 5. 欄位規格

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| PP01 | 廠商編號 | 1 | R | 文字 | REFFLD(PI01) | 參照PI01欄位 |
| PP02 | 檢索編號 | - | R | 文字 | REFFLD(PI02), KEY | 主鍵欄位 |
| PP03 | 採購編號 | - | R | 文字 | REFFLD(PI03), KEY | 主鍵欄位 |
| PP04 | 產品項次 | - | R | 文字 | REFFLD(PI04), KEY | 主鍵欄位 |
| PP05 | 供貨日期 | - | 8 | 日期 | REFFLD(PI05) | 供貨日期 |
| PP06 | 檢索量 | - | R | 數值 | REFFLD(PI06) | 檢索數量 |
| PP07 | 重量 | - | R | 數值 | REFFLD(PI07) | 商品重量 |
| PP08 | 供貨單位異常 | - | R | 文字 | REFFLD(PI08) | 異常指標 |
| PP09 | 稅費 | - | R | 數值 | REFFLD(PI09) | 稅費計算 |
| PP10 | 單費 | - | R | 數值 | REFFLD(PI10) | 單費計算 |
| PP99 | 建檔異動 | - | 1 | 文字 | - | 異動類型標記 |
| PPXX | 建檔日期 | - | 8 | 日期 | REFFLD(PIXX) | 記錄建立日期 |
| PPYY | 建檔時間 | - | R | 時間 | REFFLD(PIYY) | 記錄建立時間 |
| PPZZ | 建檔者 | - | R | 文字 | REFFLD(PIZZ) | 記錄建立人員 |

## 6. 主鍵欄位

| 欄位代號 | 欄位名稱 | 排序 | 說明 |
|----------|----------|------|------|
| PP02 | 檢索編號 | 升序 | 複合主鍵第一部分 |
| PP03 | 採購編號 | 升序 | 複合主鍵第二部分 |
| PP04 | 產品項次 | 升序 | 複合主鍵第三部分 |

## 7. 索引資料

### 主要索引
- **索引名稱**：主鍵索引
- **索引欄位**：PP02+PP03+PP04
- **索引類型**：複合索引
- **唯一性**：依檔案設計決定

### 檔案特性
- REF(RERF)：參照 RERF 檔案的欄位定義
- REFFLD：參照原始檔案 POPIPF 的對應欄位

## 8. 備註

### 特殊說明
- 此檔案為國內採購驗收明細的記錄檔案
- 使用 REFFLD 參照原始檔案 POPIPF 的欄位定義
- 複合主鍵由檢索編號、採購編號、產品項次組成
- 包含異動類型欄位 PP99 用於追蹤異動性質

### 異動類型說明
- PP99（建檔異動）異動類型：
  - ' '：檢索異動情況
  - '1'：新增 (ADD)
  - '2'：修改 (UPDATE)
  - '4'：刪除 (DELETE)

### 欄位參照關係
| 記錄檔欄位 | 參照欄位 | 說明 |
|------------|----------|------|
| PP01 | PI01 | 廠商編號 |
| PP02 | PI02 | 檢索編號 |
| PP03 | PI03 | 採購編號 |
| PP04 | PI04 | 產品項次 |
| PP05 | PI05 | 供貨日期 |
| PP06 | PI06 | 檢索量 |
| PP07 | PI07 | 重量 |
| PP08 | PI08 | 供貨單位異常 |
| PP09 | PI09 | 稅費 |
| PP10 | PI10 | 單費 |
| PPXX | PIXX | 建檔日期 |
| PPYY | PIYY | 建檔時間 |
| PPZZ | PIZZ | 建檔者 |

### 相關檔案
- POPIPF（國內採購驗收明細檔實體檔）
- POPHPF（國內採購驗收主檔實體檔）
- POPOLF（國內外驗收明細主檔邏輯檔）

### 維護注意事項
- 檢索編號+採購編號+產品項次組成複合主鍵
- 異動類型欄位 PP99 需正確設定以追蹤異動性質
- 所有欄位定義參照原始檔案，確保資料一致性
- 記錄檔案用於稽核追蹤，不可任意刪除 