# ARAALF02 檔案規格書

## 1. 基本資料
- 檔名: ARAALF02
- 類型: LF (Logical File)
- 說明: 發票號碼設定資料檔
- 基礎實體檔: ARAAPF
- 建立日期: (待補)
- 最後修改日期: (待補)
- 參考檔: RERF

## 2. 檔案功能說明
此邏輯檔案為發票號碼設定資料檔(ARAAPF)的特殊存取路徑，提供以下功能：
- 依公司別、發票類別進行索引存取
- 包含選擇條件，僅顯示電子發票相關記錄 (AA03A='E')
- 支援電子發票專用的查詢與維護作業
- 提供電子發票號碼設定的專門存取路徑
- 用於電子發票管理系統的相關作業

## 3. 系統檔案清單
- 基礎實體檔: ARAAPF (發票號碼設定資料檔)
- 相關邏輯檔: 
  - ARAALF (KEY=AA01+AA02+AA03) - 主要存取路徑
  - ARAALF01 (KEY=AA02+AA01+AA03) - 依發票類別排序
- 參考檔: RERF (系統參考檔)

## 4. 紀錄格式
基於 ARAAPF 實體檔的邏輯視圖，使用 PFILE(ARAAPF) 存取路徑，僅包含符合選擇條件的電子發票記錄。

## 5. 欄位明細
| 欄位代號 | 名稱 | 位置 | 長度 | 屬性 | 檢核說明 |
|----------|------|------|------|------|----------|
| AA01 | 公司別 | 1-2 | 2A | 文字 | 參考 #B01，必填 |
| AA02 | 發票類別 | 3-8 | 6S0 | 數值 | 發票類別代碼，必填 |
| AA03A | 類別 | 9 | 1A | 文字 | 固定為 'E' (電子發票) |
| AA03 | 序號 | 10-11 | 2S0 | 數值 | 發票序號 |
| AA04 | 字軌 | 12-13 | 2A | 文字 | 發票字軌 |
| AA05 | 起始號碼 | 14-21 | 8S0 | 數值 | 發票起始號碼 |
| AA06 | 結束號碼 | 22-29 | 8S0 | 數值 | 發票結束號碼 |
| AA07 | 使用號碼 | 30-37 | 8S0 | 數值 | 目前使用到的號碼 |
| AA08 | 預設狀態 | 38 | 1A | 文字 | V=已預設 |
| AA09 | 建立日期 | 39-46 | 8S0 | 日期 | 參考 #AXX |
| AAXX | 異動日期 | 47-54 | 8S0 | 日期 | 參考 #AXX |
| AAYY | 異動時間 | 55-60 | 6S0 | 時間 | 參考 #AYY |
| AAZZ | 異動者 | 61-70 | 10A | 文字 | 參考 #AZZ |

## 6. 主鍵欄位
- 主鍵: AA01 + AA02
  - AA01: 公司別
  - AA02: 發票類別
- 選擇條件: AA03A = 'E' (僅電子發票)

## 7. 索引資料
- 主要索引: AA01 + AA02 (依公司別、發票類別)
- 存取路徑: PFILE(ARAAPF)
- 索引類型: 非唯一索引
- 選擇條件: S AA03A COMP(EQ 'E')
- 排序特性: 
  - 第一層: 公司別 (AA01)
  - 第二層: 發票類別 (AA02)
- 特殊功能:
  - 僅包含電子發票記錄 (AA03A='E')
  - 過濾掉傳統發票記錄

## 8. 備註
- 此邏輯檔案專門用於電子發票號碼設定的存取
- 包含選擇條件 AA03A='E'，僅顯示電子發票相關記錄
- 支援電子發票管理系統的專門查詢需求
- 與電子發票相關作業密切配合
- 提供電子發票號碼設定的專用存取路徑
- 有助於區分電子發票與傳統發票的管理
- 基於相同的實體檔案，但透過選擇條件過濾資料
- 適用於電子發票統計與管理相關功能 