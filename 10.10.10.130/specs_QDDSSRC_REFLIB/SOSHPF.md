# SOSHPF 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | SOSHPF |
| 檔案類型 | PF (物理檔案) |
| 檔案說明 | 銷貨退回明細檔 |
| 排序鍵值 | SH02+SH03 |
| 記錄長度 | - |
| 記錄格式 | SH0 |
| 參考檔案 | RERF |
| 檔案屬性 | UNIQUE |

## 2. 檔案功能說明

本檔案儲存銷貨退回的明細資料，包含每筆退回單的商品明細、數量、價格等詳細資訊。與銷貨退回主檔配合，完整記錄退貨作業。

## 3. 系統檔案清單

| 檔案名稱 | 檔案類型 | 說明 |
|----------|----------|------|
| SOSHPF | PF | 銷貨退回明細檔物理檔 |

## 4. 記錄格式

### 記錄格式：SH0

## 5. 欄位說明

| 欄位代號 | 名稱 | 位置 | 長度 | 型態 | 屬性 | 說明 |
|----------|------|------|------|------|------|------|
| SH01 | 客戶編號 | - | - | R | COLHDG | 客戶編號 |
| SH02 | 退貨單號 | - | - | R | COLHDG | 退貨單號 |
| SH03 | 商品代碼 | - | - | R | COLHDG | 商品代碼 |
| SH04 | 數量 | - | - | R | COLHDG | 數量 |
| SH05 | 出貨數量 | - | - | R | COLHDG | 出貨數量 |
| SH06 | 確認退回數量 | - | - | R | COLHDG | 確認退回數量 |
| SH07 | 退回折扣 | - | - | R | COLHDG | 退回折扣 |
| SH08 | 退回放置郵遞區號 | - | - | R | COLHDG | 退回放置郵遞區號 |
| SH09 | 退貨日期 | - | 8 | DATE | COLHDG | 退貨日期 |
| SH10 | 退回地點代號 | - | - | R | COLHDG | 退回地點代號 |
| SH11 | 商品編號 | - | - | R | COLHDG | 商品編號 |
| SH12 | 確認退回數量單位訂單 | - | - | R | COLHDG | 確認退回數量單位訂單 |
| SH13 | 確認退回數量單位出貨 | - | - | R | COLHDG | 確認退回數量單位出貨 |
| SH14 | 退回總金額FOB | - | - | R | COLHDG | 退回總金額FOB |
| SH15 | 退回總金額FHI | - | - | R | COLHDG | 退回總金額FHI |
| SH16 | 退回總金額DUTY | - | - | R | COLHDG | 退回總金額DUTY |
| SH17 | 實際退回總金額FOB | - | - | R | COLHDG | 實際退回總金額FOB |
| SH18 | 實際退回總金額FHI | - | - | R | COLHDG | 實際退回總金額FHI |
| SH19 | 實際退回總金額DUTY | - | - | R | COLHDG | 實際退回總金額DUTY |
| SH20 | 實際退回幣別金額 | - | - | R | COLHDG | 實際退回幣別金額 |
| SHXX | 異動日期 | - | 8 | DATE | COLHDG | 異動日期 |
| SHYY | 異動時間 | - | - | R | COLHDG | 異動時間 |
| SHZZ | 異動者 | - | - | R | COLHDG | 異動者 |

## 6. 主鍵欄位

### 主鍵
- SH02（退貨單號）
- SH03（商品代碼）

## 7. 索引資料

| 索引名稱 | 索引欄位 | 排序方式 | 說明 |
|----------|----------|----------|------|
| 主索引 | SH02+SH03 | 遞增 | 按退貨單號、商品代碼排序 |

## 8. 備註

1. 本檔案為銷貨退回明細的主要儲存檔案
2. 具有 UNIQUE 屬性，確保記錄唯一性
3. 包含 FOB、FHI、DUTY 等多種成本金額計算方式
4. 與 SOSGPF 銷貨退回主檔搭配使用，提供完整的退貨作業資料
5. 支援退回數量的確認機制
6. 記錄退回商品的實際和計劃金額 