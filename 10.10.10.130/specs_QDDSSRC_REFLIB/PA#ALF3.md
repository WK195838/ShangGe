# PA#ALF3 檔案規格書

## 1. 基本資料

| 項目 | 內容 |
|------|------|
| 檔案名稱 | PA#ALF3 |
| 檔案描述 | 試飲原因代碼檔 (邏輯檔) |
| 檔案類型 | LF (Logical File) |
| 記錄格式 | #A0 |
| 主鍵 | #A01 (代碼) |
| 實體檔案 | PA#APF |
| 檔案屬性 | 邏輯檢視，條件：#A02 = 'TASTE' |

## 2. 檔案功能說明

PA#ALF3 為 PA#APF 規則代碼檔的試飲原因專用邏輯檔案，提供：
- 試飲原因代碼的專門檢視
- 試飲活動管理
- 試飲原因分析
- 促銷活動支援

## 3. 系統檔案清單

| 檔案代號 | 檔案名稱 | 說明 |
|----------|----------|------|
| PA#ALF3 | 試飲原因代碼邏輯檔 | 主檔 |
| PA#APF | 規則代碼實體檔 | 實體檔案 |
| RERF | 參考檔案 | 欄位定義參考 |

## 4. 紀錄格式

### 記錄格式：#A0 (繼承自 PA#APF，條件篩選)

## 5. 欄位規格

| 欄位代號 | 欄位名稱 | 位置 | 長度 | 型態 | 屬性 | 檢核說明 |
|----------|----------|------|------|------|------|----------|
| #A01 | 原因代碼 | 1-10 | 10 | A | R | 主鍵，試飲原因識別碼 |
| #A02 | 代碼類型 | 11-20 | 10 | A | R | 固定值：'TASTE' |
| #A03 | 原因名稱 | 21-60 | 40 | A | R | 試飲原因中文名稱 |
| #A04 | 英文名稱 | 61-100 | 40 | A | R | 試飲原因英文名稱 |
| #A05 | 原因說明 | 101-200 | 100 | A | R | 試飲原因詳細說明 |
| #A06 | 使用狀態 | 201 | 1 | A | R | 'A'-有效，'I'-停用 |
| #A07 | 排序序號 | 202-204 | 3 | N | R | 顯示排序 |
| #A08 | 原因分類 | 205 | 1 | A | R | 'P'-促銷，'M'-市場，'S'-服務 |
| #A09 | 費用歸屬 | 206-210 | 5 | A | R | 費用歸屬部門 |
| #A10 | 統計群組 | 211-215 | 5 | A | R | 統計分析群組 |
| #AXX | 建立日期 | 216-223 | 8 | N | R | 格式：YYYYMMDD |
| #AYY | 建立時間 | 224-229 | 6 | N | R | 格式：HHMMSS |
| #AZZ | 建立者 | 230-239 | 10 | A | R | 操作人員 |

## 6. 主鍵欄位

| 鍵值序號 | 欄位代號 | 欄位名稱 | 排序 |
|----------|----------|----------|------|
| 1 | #A01 | 原因代碼 | 升序 |

## 7. 索引資料

### 主要索引
- **索引名稱**：主鍵索引
- **索引欄位**：#A01
- **索引類型**：PRIMARY
- **說明**：原因代碼升序排序

### 輔助索引
1. **分類索引**：#A08 (原因分類)
2. **排序索引**：#A07 (排序序號)
3. **狀態索引**：#A06 (使用狀態)
4. **統計群組索引**：#A10 (統計群組)
5. **費用歸屬索引**：#A09 (費用歸屬部門)

### 邏輯檢視特性
- **基底檔案**：PA#APF
- **檢視條件**：#A02 = 'TASTE'
- **檢視類型**：條件篩選檢視
- **排序方式**：#A01 升序

## 8. 備註

### 設計考量
1. 此檔案為 PA#APF 的條件邏輯檢視檔案
2. 專門處理試飲原因相關代碼資料
3. 提供試飲活動管理功能

### 試飲原因分類說明
- **P級 (促銷類)**：新品推廣、節慶促銷、優惠活動
- **M級 (市場類)**：市場調查、品牌推廣、競品對比
- **S級 (服務類)**：客戶服務、會員回饋、售後服務

### 參考關聯
- **實體檔案**：PA#APF (#A02 = 'TASTE')
- **費用歸屬**：PA#DPF (#A09 = #D01)
- **統計群組**：PA#統計檔 (#A10 = 統計代號)
- **試飲記錄**：試飲檔案 (原因代碼關聯)

### 業務規則
1. 原因代碼必須唯一
2. 費用歸屬需對應有效部門
3. 統計群組需對應有效群組代號
4. 停用原因不影響歷史試飲記錄

### 資料完整性
1. 資料內容完全依賴 PA#APF 實體檔案
2. 僅顯示 #A02 = 'TASTE' 的記錄
3. #A09 需對應有效的部門代號
4. #A10 需對應有效的統計群組

### 使用注意事項
1. 此為邏輯檔案，不可直接寫入資料
2. 所有異動需透過 PA#APF 實體檔案進行
3. 新增試飲原因時需設定 #A02 = 'TASTE'
4. 適用於試飲活動管理與分析 