# ARAFPF 檔案規格書

## 1. 基本資料
- 檔名: ARAFPF
- 類型: PF (Physical File)
- 說明: 價差折讓資料檔
- 主鍵: AF02
- 建立日期: (待補)
- 最後修改日期: 2010/06/14 (DEREK修改)
- 參考檔: RERF
- 索引約束: UNIQUE
- 修改記錄:
  - M004 (2000/04/13 MICHELLE): FOR DUTY營業稅法
  - 00A (2010/06/14 DEREK): 新增欄位:是否變更每月申報(N)

## 2. 檔案功能說明
此實體檔案為價差折讓資料檔，提供以下功能：
- 記錄價差折讓的基本資料
- 儲存價差折讓的金額與稅額資訊
- 支援價差折讓的完整生命週期管理
- 提供價差折讓與發票的對應關係
- 記錄價差折讓的處理狀態
- 支援應收帳款管理系統的價差折讓處理
- 提供價差折讓資料的主要儲存結構
- 記錄價差折讓的稅務處理資訊
- 支援價差折讓的查詢與報表作業
- 支援營業稅法相關的DUTY處理

## 3. 系統檔案清單
- 主要實體檔: ARAFPF (價差折讓資料檔)
- 相關邏輯檔: 
  - ARAFLF1 至 ARAFLF9 (各種索引邏輯檔)
- 參考檔: RERF (系統參考檔)
- 相關檔案: 發票相關檔案

## 4. 紀錄格式
實體檔案記錄格式，包含完整的價差折讓資料欄位，支援 UNIQUE 約束確保資料唯一性。

## 5. 欄位代號、名稱、位置、長度、屬性、檢核說明
| 欄位代號 | 名稱 | 位置 | 長度 | 屬性 | 檢核說明 |
|----------|------|------|------|------|----------|
| AF01 | 公司別 | 1-2 | 2A | 文字 | 參考 #B01，必填，公司代碼 |
| AF02 | 折讓單號 | 3-14 | 12A | 文字 | 必填，折讓單號，主鍵 |
| AF03 | 客戶代號 | 15-28 | 14A | 文字 | 參考 #B14，必填，客戶識別碼 |
| AF04 | 單據代號 | 29-38 | 10A | 文字 | 參考 #B15，必填，單據識別碼 |
| AF05 | 折讓日期 | 39-46 | 8S0 | 日期 | 參考 #AXX，必填，折讓日期 |
| AF06 | 發票號碼 | 47-54 | 8A | 文字 | 參考 SI02，發票號碼 |
| AF07 | 折讓稅前金額 | 55-63 | 9P0 | 數值 | 折讓稅前金額，以分為單位 |
| AF08 | 折讓稅額 | 64-65 | 2A | 文字 | 折讓稅額代碼 |
| AF09 | 營業稅額 | 66-74 | 9P0 | 數值 | 營業稅額，以分為單位 |
| AF10 | 折讓營業稅額 | 75-83 | 9P0 | 數值 | 折讓營業稅額，以分為單位 |
| AF11 | 是否變更 | 84 | 1A | 文字 | 是否變更每月申報，N-不變更每月申報 |
| AFXX | 異動日期 | 85-92 | 8S0 | 日期 | 參考 #AXX，最後異動日期 |
| AFYY | 異動時間 | 93-98 | 6S0 | 時間 | 參考 #AYY，最後異動時間 |
| AFZZ | 異動者 | 99-108 | 10A | 文字 | 參考 #AZZ，最後異動人員 |

## 6. 主鍵欄位
- 主鍵: AF02
  - AF02: 折讓單號
- 約束類型: UNIQUE (唯一約束)

## 7. 索引資料
- 主要索引: AF02 (依折讓單號)
- 索引類型: 唯一索引 (UNIQUE)
- 排序特性: 
  - 第一層: 折讓單號 (AF02)

## 8. 備註
- 此實體檔案為價差折讓的主要儲存結構
- 使用 UNIQUE 約束確保折讓單號的唯一性
- 支援價差折讓的完整資訊管理
- 記錄價差折讓的金額與稅額資訊
- 與發票相關檔案密切相關，透過發票號碼關聯
- 支援應收帳款管理系統的價差折讓處理
- 提供多個邏輯檔案的基礎資料來源
- 記錄價差折讓的稅務處理資訊
- 支援價差折讓的查詢、報表與統計分析
- 包含完整的異動追蹤欄位(日期、時間、異動者)
- 支援營業稅法相關的DUTY處理功能
- 2010年新增是否變更每月申報欄位，支援申報管理
- 歷經多次修改以符合稅法要求 